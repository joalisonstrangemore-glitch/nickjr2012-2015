(function(){var n=function(){function i(){(typeof window.Flux4!="object"||typeof window.Flux!="object"||_.isNull(window.Flux))&&(window.Flux4={},window.Flux={}),Flux.createWidget=function(){var u=arguments,r,i;document.readyState!="complete"&&(r=arguments.length==2&&typeof arguments[1]!="function"||arguments.length==3?arguments[1]:{},r.container||r.containerId||(i="Flux4DebugWidget_"+t,t++,document.write('<div id="'+i+'"><\/div>'),arguments.length==1?u=[arguments[0],{containerId:i}]:arguments.length==2&&typeof arguments[1]=="function"?u=[arguments[0],{containerId:i},arguments[1]]:r.containerId=i)),n.push(u)},Flux4.createWidget=function(){var u=arguments,r,i;document.readyState!="complete"&&(r=arguments.length==2&&typeof arguments[1]!="function"||arguments.length==3?arguments[1]:{},r.container||r.containerId||(i="Flux4DebugWidget_"+t,t++,document.write('<div id="'+i+'"><\/div>'),arguments.length==1?u=[arguments[0],{containerId:i}]:arguments.length==2&&typeof arguments[1]=="function"?u=[arguments[0],{containerId:i},arguments[1]]:r.containerId=i)),n.push(u)}}function r(){for(var t=document.getElementsByTagName("script"),i=new RegExp("http://widgets[34].(flux-dev.com|flux-staging.com|flux.com)/(Core|Loader)","i"),n=0;n<t.length;n++)if(i.test(t[n].getAttribute("src")||""))return t[n]}function u(){return typeof(window.Flux4=="object"&&!!window.Flux4)&&window.Flux=="object"&&!!window.Flux}var n=[],t=1;return{reloadOnDebug:function(t){var h,o,c,s,f,e;return!u()&&window.location.href.toLowerCase().indexOf(t.toLowerCase())>-1?(i(),h=r(),o=h.getAttribute("id"),o||(c=$("script[widgets4Debug=true]")[0]||$("script.widgets4Core")[0],c&&(o=c.getAttribute("id"))),s=h.getAttribute("src").replace(/widgets3/g,"widgets4").replace(/Loader/gi,"Core"),s+=(s.indexOf("?")>-1?"&":"?")+t,f=document.createElement("script"),f.setAttribute("type","text/javascript"),f.setAttribute("src",s),f.setAttribute("id",o),f.setAttribute("widgets4Debug","true"),e=document.getElementsByTagName("HEAD")[0]||document.documentElement,f.onload=f.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){f.onload=f.onreadystatechange=null,e&&f.parentNode&&e.removeChild(f),this.removeAttribute("widgets4Debug");for(var t=0;t<n.length;t++)Flux4.createWidget.apply(null,n[t])}},e.insertBefore(f,e.firstChild),!0):!1}}}();if(!n.reloadOnDebug("enableWidgetsDebug=true")){
/*!
* jQuery Cookie Plugin v1.3
* https://github.com/carhartl/jquery-cookie
*
* Copyright 2011, Klaus Hartl
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://www.opensource.org/licenses/mit-license.php
* http://www.opensource.org/licenses/GPL-2.0
*/
(function(n,t,i){function f(n){return n}function e(n){return decodeURIComponent(n.replace(u," "))}var u=/\+/g,r=n.cookie=function(u,o,s){var p,c,l,a,h,w,v,y;if(o!==i)return s=n.extend({},r.defaults,s),o===null&&(s.expires=-1),typeof s.expires=="number"&&(p=s.expires,c=s.expires=new Date,c.setDate(c.getDate()+p)),o=r.json?JSON.stringify(o):String(o),t.cookie=[encodeURIComponent(u),"=",r.raw?o:encodeURIComponent(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(l=r.raw?f:e,a=t.cookie.split("; "),h=0,w=a.length;h<w;h++)if(v=a[h].split("="),l(v.shift())===u)return y=l(v.join("=")),r.json?JSON.parse(y):y;return null};r.defaults={},n.removeCookie=function(t,i){return n.cookie(t)!==null?(n.cookie(t,null,i),!0):!1}})(jQuery,document),function(){var y=this,at=y._,e={},r=Array.prototype,nt=Object.prototype,vt=Function.prototype,p=r.push,t=r.slice,o=r.concat,f=nt.toString,yt=nt.hasOwnProperty,tt=r.forEach,it=r.map,rt=r.reduce,ut=r.reduceRight,ft=r.filter,et=r.every,ot=r.some,s=r.indexOf,st=r.lastIndexOf,pt=Array.isArray,wt=Object.keys,w=vt.bind,n=function(t){if(t instanceof n)return t;if(!(this instanceof n))return new n(t);this._wrapped=t},i,b,k,h,d,g,c,u,ht,ct,l,a,lt,v;typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports._=n):y._=n,n.VERSION="1.4.4",i=n.each=n.forEach=function(t,i,r){var u,o,f;if(t!=null)if(tt&&t.forEach===tt)t.forEach(i,r);else if(t.length===+t.length){for(u=0,o=t.length;u<o;u++)if(i.call(r,t[u],u,t)===e)return}else for(f in t)if(n.has(t,f)&&i.call(r,t[f],f,t)===e)return},n.map=n.collect=function(n,t,r){var u=[];return n==null?u:it&&n.map===it?n.map(t,r):(i(n,function(n,i,f){u[u.length]=t.call(r,n,i,f)}),u)},b="Reduce of empty array with no initial value",n.reduce=n.foldl=n.inject=function(t,r,u,f){var e=arguments.length>2;if(t==null&&(t=[]),rt&&t.reduce===rt)return f&&(r=n.bind(r,f)),e?t.reduce(r,u):t.reduce(r);if(i(t,function(n,t,i){e?u=r.call(f,u,n,t,i):(u=n,e=!0)}),!e)throw new TypeError(b);return u},n.reduceRight=n.foldr=function(t,r,u,f){var o=arguments.length>2,e,s;if(t==null&&(t=[]),ut&&t.reduceRight===ut)return f&&(r=n.bind(r,f)),o?t.reduceRight(r,u):t.reduceRight(r);if(e=t.length,e!==+e&&(s=n.keys(t),e=s.length),i(t,function(n,i,h){i=s?s[--e]:--e,o?u=r.call(f,u,t[i],i,h):(u=t[i],o=!0)}),!o)throw new TypeError(b);return u},n.find=n.detect=function(n,t,i){var r;return k(n,function(n,u,f){if(t.call(i,n,u,f))return r=n,!0}),r},n.filter=n.select=function(n,t,r){var u=[];return n==null?u:ft&&n.filter===ft?n.filter(t,r):(i(n,function(n,i,f){t.call(r,n,i,f)&&(u[u.length]=n)}),u)},n.reject=function(t,i,r){return n.filter(t,function(n,t,u){return!i.call(r,n,t,u)},r)},n.every=n.all=function(t,r,u){r||(r=n.identity);var f=!0;return t==null?f:et&&t.every===et?t.every(r,u):(i(t,function(n,t,i){if(!(f=f&&r.call(u,n,t,i)))return e}),!!f)},k=n.some=n.any=function(t,r,u){r||(r=n.identity);var f=!1;return t==null?f:ot&&t.some===ot?t.some(r,u):(i(t,function(n,t,i){if(f||(f=r.call(u,n,t,i)))return e}),!!f)},n.contains=n.include=function(n,t){return n==null?!1:s&&n.indexOf===s?n.indexOf(t)!=-1:k(n,function(n){return n===t})},n.invoke=function(i,r){var u=t.call(arguments,2),f=n.isFunction(r);return n.map(i,function(n){return(f?r:n[r]).apply(n,u)})},n.pluck=function(t,i){return n.map(t,function(n){return n[i]})},n.where=function(t,i,r){return n.isEmpty(i)?r?null:[]:n[r?"find":"filter"](t,function(n){for(var t in i)if(i[t]!==n[t])return!1;return!0})},n.findWhere=function(t,i){return n.where(t,i,!0)},n.max=function(t,r,u){if(!r&&n.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!r&&n.isEmpty(t))return-Infinity;var f={computed:-Infinity,value:-Infinity};return i(t,function(n,t,i){var e=r?r.call(u,n,t,i):n;e>=f.computed&&(f={value:n,computed:e})}),f.value},n.min=function(t,r,u){if(!r&&n.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!r&&n.isEmpty(t))return Infinity;var f={computed:Infinity,value:Infinity};return i(t,function(n,t,i){var e=r?r.call(u,n,t,i):n;e<f.computed&&(f={value:n,computed:e})}),f.value},n.shuffle=function(t){var u,f=0,r=[];return i(t,function(t){u=n.random(f++),r[f-1]=r[u],r[u]=t}),r},h=function(t){return n.isFunction(t)?t:function(n){return n[t]}},n.sortBy=function(t,i,r){var u=h(i);return n.pluck(n.map(t,function(n,t,i){return{value:n,index:t,criteria:u.call(r,n,t,i)}}).sort(function(n,t){var i=n.criteria,r=t.criteria;if(i!==r){if(i>r||i===void 0)return 1;if(i<r||r===void 0)return-1}return n.index<t.index?-1:1}),"value")},d=function(t,r,u,f){var e={},o=h(r||n.identity);return i(t,function(n,i){var r=o.call(u,n,i,t);f(e,r,n)}),e},n.groupBy=function(t,i,r){return d(t,i,r,function(t,i,r){(n.has(t,i)?t[i]:t[i]=[]).push(r)})},n.countBy=function(t,i,r){return d(t,i,r,function(t,i){n.has(t,i)||(t[i]=0),t[i]++})},n.sortedIndex=function(t,i,r,u){var e;r=r==null?n.identity:h(r);for(var s=r.call(u,i),f=0,o=t.length;f<o;)e=f+o>>>1,r.call(u,t[e])<s?f=e+1:o=e;return f},n.toArray=function(i){return i?n.isArray(i)?t.call(i):i.length===+i.length?n.map(i,n.identity):n.values(i):[]},n.size=function(t){return t==null?0:t.length===+t.length?t.length:n.keys(t).length},n.first=n.head=n.take=function(n,i,r){if(n!=null)return i!=null&&!r?t.call(n,0,i):n[0]},n.initial=function(n,i,r){return t.call(n,0,n.length-(i==null||r?1:i))},n.last=function(n,i,r){if(n!=null)return i==null||r?n[n.length-1]:t.call(n,Math.max(n.length-i,0))},n.rest=n.tail=n.drop=function(n,i,r){return t.call(n,i==null||r?1:i)},n.compact=function(t){return n.filter(t,n.identity)},g=function(t,r,u){return i(t,function(t){n.isArray(t)?r?p.apply(u,t):g(t,r,u):u.push(t)}),u},n.flatten=function(n,t){return g(n,t,[])},n.without=function(i){return n.difference(i,t.call(arguments,1))},n.uniq=n.unique=function(t,r,u,f){n.isFunction(r)&&(f=u,u=r,r=!1);var s=u?n.map(t,u,f):t,o=[],e=[];return i(s,function(i,u){(r?u&&e[e.length-1]===i:n.contains(e,i))||(e.push(i),o.push(t[u]))}),o},n.union=function(){return n.uniq(o.apply(r,arguments))},n.intersection=function(i){var r=t.call(arguments,1);return n.filter(n.uniq(i),function(t){return n.every(r,function(i){return n.indexOf(i,t)>=0})})},n.difference=function(i){var u=o.apply(r,t.call(arguments,1));return n.filter(i,function(t){return!n.contains(u,t)})},n.zip=function(){for(var r=t.call(arguments),u=n.max(n.pluck(r,"length")),f=new Array(u),i=0;i<u;i++)f[i]=n.pluck(r,""+i);return f},n.object=function(n,t){var r,i,u;if(n==null)return{};for(r={},i=0,u=n.length;i<u;i++)t?r[n[i]]=t[i]:r[n[i][0]]=n[i][1];return r},n.indexOf=function(t,i,r){if(t==null)return-1;var u=0,f=t.length;if(r)if(typeof r=="number")u=r<0?Math.max(0,f+r):r;else return u=n.sortedIndex(t,i),t[u]===i?u:-1;if(s&&t.indexOf===s)return t.indexOf(i,r);for(;u<f;u++)if(t[u]===i)return u;return-1},n.lastIndexOf=function(n,t,i){var u,r;if(n==null)return-1;if(u=i!=null,st&&n.lastIndexOf===st)return u?n.lastIndexOf(t,i):n.lastIndexOf(t);for(r=u?i:n.length;r--;)if(n[r]===t)return r;return-1},n.range=function(n,t,i){arguments.length<=1&&(t=n||0,n=0),i=arguments[2]||1;for(var r=Math.max(Math.ceil((t-n)/i),0),u=0,f=new Array(r);u<r;)f[u++]=n,n+=i;return f},n.bind=function(n,i){if(n.bind===w&&w)return w.apply(n,t.call(arguments,1));var r=t.call(arguments,2);return function(){return n.apply(i,r.concat(t.call(arguments)))}},n.partial=function(n){var i=t.call(arguments,1);return function(){return n.apply(this,i.concat(t.call(arguments)))}},n.bindAll=function(r){var u=t.call(arguments,1);return u.length===0&&(u=n.functions(r)),i(u,function(t){r[t]=n.bind(r[t],r)}),r},n.memoize=function(t,i){var r={};return i||(i=n.identity),function(){var u=i.apply(this,arguments);return n.has(r,u)?r[u]:r[u]=t.apply(this,arguments)}},n.delay=function(n,i){var r=t.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},i)},n.defer=function(i){return n.delay.apply(n,[i,1].concat(t.call(arguments,1)))},n.throttle=function(n,t){var r,u,i,f,e=0,o=function(){e=new Date,i=null,f=n.apply(r,u)};return function(){var s=new Date,h=t-(s-e);return r=this,u=arguments,h<=0?(clearTimeout(i),i=null,e=s,f=n.apply(r,u)):i||(i=setTimeout(o,h)),f}},n.debounce=function(n,t,i){var r,u;return function(){var f=this,e=arguments,o=function(){r=null,i||(u=n.apply(f,e))},s=i&&!r;return clearTimeout(r),r=setTimeout(o,t),s&&(u=n.apply(f,e)),u}},n.once=function(n){var i=!1,t;return function(){return i?t:(i=!0,t=n.apply(this,arguments),n=null,t)}},n.wrap=function(n,t){return function(){var i=[n];return p.apply(i,arguments),t.apply(this,i)}},n.compose=function(){var n=arguments;return function(){for(var i=arguments,t=n.length-1;t>=0;t--)i=[n[t].apply(this,i)];return i[0]}},n.after=function(n,t){return n<=0?t():function(){if(--n<1)return t.apply(this,arguments)}},n.keys=wt||function(t){var i,r;if(t!==Object(t))throw new TypeError("Invalid object");i=[];for(r in t)n.has(t,r)&&(i[i.length]=r);return i},n.values=function(t){var r=[],i;for(i in t)n.has(t,i)&&r.push(t[i]);return r},n.pairs=function(t){var r=[],i;for(i in t)n.has(t,i)&&r.push([i,t[i]]);return r},n.invert=function(t){var r={},i;for(i in t)n.has(t,i)&&(r[t[i]]=i);return r},n.functions=n.methods=function(t){var r=[],i;for(i in t)n.isFunction(t[i])&&r.push(i);return r.sort()},n.extend=function(n){return i(t.call(arguments,1),function(t){if(t)for(var i in t)n[i]=t[i]}),n},n.pick=function(n){var u={},f=o.apply(r,t.call(arguments,1));return i(f,function(t){t in n&&(u[t]=n[t])}),u},n.omit=function(i){var f={},e=o.apply(r,t.call(arguments,1)),u;for(u in i)n.contains(e,u)||(f[u]=i[u]);return f},n.defaults=function(n){return i(t.call(arguments,1),function(t){if(t)for(var i in t)n[i]==null&&(n[i]=t[i])}),n},n.clone=function(t){return n.isObject(t)?n.isArray(t)?t.slice():n.extend({},t):t},n.tap=function(n,t){return t(n),n},c=function(t,i,r,u){var a,v,e,o,h,l,s;if(t===i)return t!==0||1/t==1/i;if(t==null||i==null)return t===i;if(t instanceof n&&(t=t._wrapped),i instanceof n&&(i=i._wrapped),a=f.call(t),a!=f.call(i))return!1;switch(a){case"[object String]":return t==String(i);case"[object Number]":return t!=+t?i!=+i:t==0?1/t==1/i:t==+i;case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if(typeof t!="object"||typeof i!="object")return!1;for(v=r.length;v--;)if(r[v]==t)return u[v]==i;if(r.push(t),u.push(i),e=0,o=!0,a=="[object Array]"){if(e=t.length,o=e==i.length,o)while(e--)if(!(o=c(t[e],i[e],r,u)))break}else{if(h=t.constructor,l=i.constructor,h!==l&&!(n.isFunction(h)&&h instanceof h&&n.isFunction(l)&&l instanceof l))return!1;for(s in t)if(n.has(t,s)&&(e++,!(o=n.has(i,s)&&c(t[s],i[s],r,u))))break;if(o){for(s in i)if(n.has(i,s)&&!e--)break;o=!e}}return r.pop(),u.pop(),o},n.isEqual=function(n,t){return c(n,t,[],[])},n.isEmpty=function(t){if(t==null)return!0;if(n.isArray(t)||n.isString(t))return t.length===0;for(var i in t)if(n.has(t,i))return!1;return!0},n.isElement=function(n){return!!(n&&n.nodeType===1)},n.isArray=pt||function(n){return f.call(n)=="[object Array]"},n.isObject=function(n){return n===Object(n)},i(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}}),n.isArguments(arguments)||(n.isArguments=function(t){return!!(t&&n.has(t,"callee"))}),typeof/./!="function"&&(n.isFunction=function(n){return typeof n=="function"}),n.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},n.isNaN=function(t){return n.isNumber(t)&&t!=+t},n.isBoolean=function(n){return n===!0||n===!1||f.call(n)=="[object Boolean]"},n.isNull=function(n){return n===null},n.isUndefined=function(n){return n===void 0},n.has=function(n,t){return yt.call(n,t)},n.noConflict=function(){return y._=at,this},n.identity=function(n){return n},n.times=function(n,t,i){for(var u=Array(n),r=0;r<n;r++)u[r]=t.call(i,r);return u},n.random=function(n,t){return t==null&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},u={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}},u.unescape=n.invert(u.escape),ht={escape:new RegExp("["+n.keys(u.escape).join("")+"]","g"),unescape:new RegExp("("+n.keys(u.unescape).join("|")+")","g")},n.each(["escape","unescape"],function(t){n[t]=function(n){return n==null?"":(""+n).replace(ht[t],function(n){return u[t][n]})}}),n.result=function(t,i){if(t==null)return null;var r=t[i];return n.isFunction(r)?r.call(t):r},n.mixin=function(t){i(n.functions(t),function(i){var r=n[i]=t[i];n.prototype[i]=function(){var t=[this._wrapped];return p.apply(t,arguments),v.call(this,r.apply(n,t))}})},ct=0,n.uniqueId=function(n){var t=++ct+"";return n?n+t:t},n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},l=/(.)^/,a={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t"},a[String.fromCharCode(8232)]="u2028",a[String.fromCharCode(8233)]="u2029",lt=/\\|'|\r|\n|\t|\u2028|\u2029/g,n.template=function(t,i,r){var f,e;r=n.defaults({},r,n.templateSettings);var h=new RegExp([(r.escape||l).source,(r.interpolate||l).source,(r.evaluate||l).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(h,function(n,i,r,f,e){return u+=t.slice(o,e).replace(lt,function(n){return"\\"+a[n]}),i&&(u+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),f&&(u+="';\n"+f+"\n__p+='"),o=e+n.length,n}),u+="';\n",r.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{f=new Function(r.variable||"obj","_",u)}catch(s){s.source=u;throw s;}return i?f(i,n):(e=function(t){return f.call(this,t,n)},e.source="function("+(r.variable||"obj")+"){\n"+u+"}",e)},n.chain=function(t){return n(t).chain()},v=function(t){return this._chain?n(t).chain():t},n.mixin(n),i(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=r[t];n.prototype[t]=function(){var n=this._wrapped;return i.apply(n,arguments),(t=="shift"||t=="splice")&&n.length===0&&delete n[0],v.call(this,n)}}),i(["concat","join","slice"],function(t){var i=r[t];n.prototype[t]=function(){return v.call(this,i.apply(this._wrapped,arguments))}}),n.extend(n.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this);
/*! A fix for the iOS orientationchange zoom bug.
 Script by @scottjehl, rebound by @wilto.
 MIT License.
*/
(function(n){function h(n,i,r){var e=n.children(),o=!1,u,s,f;for(n.empty(),u=0,s=e.length;u<s;u++)if(f=e.eq(u),n.append(f),r&&n.append(r),t(n,i)){f.remove(),o=!0;break}else r&&r.remove();return o}function e(i,r,u,f,s){var v=i.contents(),h=!1,y,c,p,l,a,w;for(i.empty(),y="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style",c=0,p=v.length;c<p;c++){if(h)break;(l=v[c],a=n(l),typeof l!="undefined")&&(i.append(a),s&&(w=i.is(y)?"after":"append",i[w](s)),l.nodeType==3?t(u,f)&&(h=o(a,r,u,f,s)):h=e(a,r,u,f,s),h||s&&s.remove())}return h}function o(i,r,u,f,e){var v=!1,a=i[0],d,h,g;if(typeof a=="undefined")return!1;for(var y=f.wrap=="letter"?"":" ",p=c(a).split(y),w=-1,l=-1,b=0,k=p.length-1;b<=k;){if(d=Math.floor((b+k)/2),d==l)break;l=d,s(a,p.slice(0,l+1).join(y)+f.ellipsis),t(u,f)?k=l:(w=l,b=l)}if(w!=-1){for(h=p.slice(0,w+1).join(y),v=!0;n.inArray(h.slice(-1),f.lastCharacter.remove)>-1;)h=h.slice(0,-1);n.inArray(h.slice(-1),f.lastCharacter.noEllipsis)<0&&(h+=f.ellipsis),s(a,h)}else g=i.parent(),i.remove(),$n=g.contents().eq(-1),v=o($n,r,u,f,e);return v}function t(n,t){return n.innerHeight()>t.maxHeight}function i(n){return{width:n.innerWidth(),height:n.innerHeight()}}function s(n,t){n.innerText?n.innerText=t:n.nodeValue?n.nodeValue=t:n.textContent&&(n.textContent=t)}function c(n){return n.innerText?n.innerText:n.nodeValue?n.nodeValue:n.textContent?n.textContent:""}function a(t,i){return typeof t=="undefined"?!1:t?typeof t=="string"?(t=n(t,i),t.length?t:!1):typeof t=="object"?typeof t.jquery=="undefined"?!1:t:!1:!1}function v(n){var i=n.innerHeight(),r=["paddingTop","paddingBottom"],t;for(z=0,l=r.length;z<l;z++)t=parseInt(n.css(r[z]),10),isNaN(t)&&(t=0),i-=t;return i}function y(n,t){return n?(t=typeof t=="string"?"dotdotdot: "+t:["dotdotdot:",t],window.console&&window.console.log&&window.console.log(t),!1):!1}var f,r,u;n.fn.dotdotdot||(n.fn.dotdotdot=function(r){var u;if(this.length==0)return y(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){n(this).dotdotdot(r)});u=this,u.data("dotdotdot")&&u.trigger("destroy.dot"),u.bind_events=function(){return u.bind("update.dot",function(i,r){i.preventDefault(),i.stopPropagation(),o.maxHeight=typeof o.height=="number"?o.height:v(u),o.maxHeight+=o.tolerance,typeof r!="undefined"&&((typeof r=="string"||r instanceof HTMLElement)&&(r=n("<div />").append(r).contents()),r instanceof n&&(l=r)),c=u.wrapInner('<div class="dotdotdot" />').children(),c.empty().append(l.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var a=!1,f=!1;return s.afterElement&&(a=s.afterElement.clone(!0),s.afterElement.remove()),t(c,o)&&(f=o.wrap=="children"?h(c,o,a):e(c,u,c,o,a)),c.replaceWith(c.contents()),c=null,n.isFunction(o.callback)&&o.callback.call(u[0],f,l),s.isTruncated=f,f}).bind("isTruncated.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),typeof t=="function"&&t.call(u[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),typeof t=="function"&&t.call(u[0],l),l}).bind("destroy.dot",function(n){n.preventDefault(),n.stopPropagation(),u.unwatch().unbind_events().empty().append(l).data("dotdotdot",!1)}),u},u.unbind_events=function(){return u.unbind(".dot"),u},u.watch=function(){if(u.unwatch(),o.watch=="window"){var t=n(window),r=t.width(),f=t.height();t.bind("resize.dot"+s.dotId,function(){r==t.width()&&f==t.height()&&o.windowResizeFix||(r=t.width(),f=t.height(),p&&clearInterval(p),p=setTimeout(function(){u.trigger("update.dot")},10))})}else w=i(u),p=setInterval(function(){var n=i(u);(w.width!=n.width||w.height!=n.height)&&(u.trigger("update.dot"),w=i(u))},100);return u},u.unwatch=function(){return n(window).unbind("resize.dot"+s.dotId),p&&clearInterval(p),u};var l=u.contents(),o=n.extend(!0,{},n.fn.dotdotdot.defaults,r),s={},w={},p=null,c=null;return s.afterElement=a(o.after,u),s.isTruncated=!1,s.dotId=f++,u.data("dotdotdot",!0).bind_events().trigger("update.dot"),o.watch&&u.watch(),u},n.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1},f=1,r=n.fn.html,n.fn.html=function(n){return typeof n!="undefined"?this.data("dotdotdot")&&typeof n!="function"?this.trigger("update",[n]):r.call(this,n):r.call(this)},u=n.fn.text,n.fn.text=function(t){if(typeof t!="undefined"){if(this.data("dotdotdot")){var i=n("<div />");return i.text(t),t=i.html(),i.remove(),this.trigger("update",[t])}return u.call(this,t)}return u.call(this)})})(jQuery);
/*! jQuery UI - v1.10.3 - 2013-07-16
* http://jqueryui.com
* Includes: jquery.ui.position.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(n,t){function a(n,t,i){return[parseFloat(n[0])*(l.test(n[0])?t/100:1),parseFloat(n[1])*(l.test(n[1])?i/100:1)]}function u(t,i){return parseInt(n.css(t,i),10)||0}function y(t){var i=t[0];return i.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var f,r=Math.max,i=Math.abs,e=Math.round,o=/left|center|right/,s=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,l=/%$/,v=n.fn.position;n.position={scrollbarWidth:function(){if(f!==t)return f;var u,r,i=n("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),e=i.children()[0];return n("body").append(i),u=e.offsetWidth,i.css("overflow","scroll"),r=e.offsetWidth,u===r&&(r=i[0].clientWidth),i.remove(),f=u-r},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),u=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,f=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]);return{element:i,isWindow:r,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r?i.width():i.outerWidth(),height:r?i.height():i.outerHeight()}}},n.fn.position=function(t){if(!t||!t.of)return v.apply(this,arguments);t=n.extend({},t);var b,f,l,w,p,d,g=n(t.of),tt=n.position.getWithinInfo(t.within),it=n.position.getScrollInfo(tt),k=(t.collision||"flip").split(" "),nt={};return d=y(g),g[0].preventDefault&&(t.at="left top"),f=d.width,l=d.height,w=d.offset,p=n.extend({},w),n.each(["my","at"],function(){var n=(t[this]||"").split(" "),i,r;n.length===1&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=s.test(n[1])?n[1]:"center",i=h.exec(n[0]),r=h.exec(n[1]),nt[this]=[i?i[0]:0,r?r[0]:0],t[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),k.length===1&&(k[1]=k[0]),t.at[0]==="right"?p.left+=f:t.at[0]==="center"&&(p.left+=f/2),t.at[1]==="bottom"?p.top+=l:t.at[1]==="center"&&(p.top+=l/2),b=a(nt.at,f,l),p.left+=b[0],p.top+=b[1],this.each(function(){var y,d,s=n(this),h=s.outerWidth(),c=s.outerHeight(),rt=u(this,"marginLeft"),ut=u(this,"marginTop"),ft=h+rt+u(this,"marginRight")+it.width,et=c+ut+u(this,"marginBottom")+it.height,o=n.extend({},p),v=a(nt.my,s.outerWidth(),s.outerHeight());t.my[0]==="right"?o.left-=h:t.my[0]==="center"&&(o.left-=h/2),t.my[1]==="bottom"?o.top-=c:t.my[1]==="center"&&(o.top-=c/2),o.left+=v[0],o.top+=v[1],n.support.offsetFractions||(o.left=e(o.left),o.top=e(o.top)),y={marginLeft:rt,marginTop:ut},n.each(["left","top"],function(i,r){n.ui.position[k[i]]&&n.ui.position[k[i]][r](o,{targetWidth:f,targetHeight:l,elemWidth:h,elemHeight:c,collisionPosition:y,collisionWidth:ft,collisionHeight:et,offset:[b[0]+v[0],b[1]+v[1]],my:t.my,at:t.at,within:tt,elem:s})}),t.using&&(d=function(n){var u=w.left-o.left,v=u+f-h,e=w.top-o.top,y=e+l-c,a={target:{element:g,left:w.left,top:w.top,width:f,height:l},element:{element:s,left:o.left,top:o.top,width:h,height:c},horizontal:v<0?"left":u>0?"right":"center",vertical:y<0?"top":e>0?"bottom":"middle"};f<h&&i(u+v)<f&&(a.horizontal="center"),l<c&&i(e+y)<l&&(a.vertical="middle"),a.important=r(i(u),i(v))>r(i(e),i(y))?"horizontal":"vertical",t.using.call(this,n,a)}),s.offset(n.extend(o,{using:d}))})},n.ui.position={fit:{left:function(n,t){var e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,i=u-s,f=s+t.collisionWidth-o-u,h;t.collisionWidth>o?i>0&&f<=0?(h=n.left+i+t.collisionWidth-o-u,n.left+=i-h):n.left=f>0&&i<=0?u:i>f?u+o-t.collisionWidth:u:i>0?n.left+=i:f>0?n.left-=f:n.left=r(n.left-s,n.left)},top:function(n,t){var o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,i=u-s,f=s+t.collisionHeight-e-u,h;t.collisionHeight>e?i>0&&f<=0?(h=n.top+i+t.collisionHeight-e-u,n.top+=i-h):n.top=f>0&&i<=0?u:i>f?u+e-t.collisionHeight:u:i>0?n.top+=i:f>0?n.top-=f:n.top=r(n.top-s,n.top)}},flip:{left:function(n,t){var r=t.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-t.collisionPosition.marginLeft,a=l-o,v=l+t.collisionWidth-c-o,u=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,f=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,e=-2*t.offset[0],s,h;a<0?(s=n.left+u+f+e+t.collisionWidth-c-y,(s<0||s<i(a))&&(n.left+=u+f+e)):v>0&&(h=n.left-t.collisionPosition.marginLeft+u+f+e-o,(h>0||i(h)<v)&&(n.left+=u+f+e))},top:function(n,t){var r=t.within,y=r.offset.top+r.scrollTop,c=r.height,o=r.isWindow?r.scrollTop:r.offset.top,l=n.top-t.collisionPosition.marginTop,a=l-o,v=l+t.collisionHeight-c-o,p=t.my[1]==="top",u=p?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,f=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,e=-2*t.offset[1],s,h;a<0?(h=n.top+u+f+e+t.collisionHeight-c-y,(h<0||h<i(a))&&(n.top+=u+f+e)):v>0&&(s=n.top-t.collisionPosition.marginTop+u+f+e-o,(s>0||i(s)<v)&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments),n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments),n.ui.position.fit.top.apply(this,arguments)}}}})(jQuery),function(n){function ir(t,i){function nt(t,i,r,u){var f=t.find(i);t.is(i)&&f.push(t),f.each(function(){h(n(this),r,u)})}function h(n,t,i){var f=t+(i?g:0),r,u;n.text().replace(s,"").length>f&&(r=n.html(),u=l(r,t),i&&(u+='<a class="more">&nbsp;more<\/a>'),n.html(u).find(".more").click(function(){this.parentNode.innerHTML=r}))}function c(t){var i=n("<div>").html(t);return i.contents().each(function(){var i=n(this),t;this.nodeType==8?i.remove():(t=i.html(),!!t&&t.length>0&&i.html(c(t)))}),i.html()}function l(n,t){n=c(n);var f=0,e=[],o="",r=0,h=!1,l=!1,a=!1,u="",v=0,i;for(n=n.replace(s,""),n=n.replace(/<br>/gi,"<br/>");f<t&&f!=t&&v<n.length;)i=n.charAt(r),i=="<"&&(o="",a=!0,n.length>r+1&&n.charAt(r+1)=="/"?l=!0:h=!0),a?(o+=i,i==">"&&(h&&!rt(o)&&e.push(o),l&&e.pop(),h=!1,l=!1,a=!1)):(f++,i=="&"&&(f-=tt(n,r))),u+=i,r++,v++;return v<n.length&&(u+="..."),e.length>0&&(u=it(e,u)),u}function tt(t,i){for(var f=t.substring(i,i+7),e=f.charAt(0),r,u=1;u<f.length;u++){if(r=f.charAt(u),r=="<"||r=="&")break;e+=r}return e.length-n("<span>"+e+"<\/span>").text().length}function it(n,t){for(var i=0;i<n.length;i++){for(var u=n[i],f=u.charAt(0)+"/",e=1,r=u.charAt(e);r!=" "&&r!=">";)f+=r,e++,r=u.charAt(e);f+=">",t+=f}return t}function rt(n){for(var i=n.length-2,t=n.charAt(i);t!="<"&&t!="/"&&t==" ";)i--,t=n.charAt(i);return t=="/"?!0:!1}function a(n){var t,r,i;try{return t=Array.prototype.slice.call(n)}catch(u){for(t=[],r=n.length,i=0;i<r;i++)t.push(n[i]);return t}}function u(n){if(typeof n=="string")return n;if(n.nodeType===r.TEXT_NODE)return n.nodeValue;var t=document.createElement("div");return t.appendChild(n),t.innerHTML}function f(t,i){n(t).html(i)}function y(n){var s=[],t,h,f,i,u,e={node:n,nodeType:n.nodeType,subNodes:null},o=[];if(n.nodeType===r.TEXT_NODE){for(i=n.nodeValue.split(st),t=1,f=i.length;t<f;t++)i[t].indexOf("/")||(i[t-1]+="/",i[t]=i[t].substring(1));u=n.nodeValue}else if(n.nodeType===r.ELEMENT_NODE){for(h=a(n.childNodes),t=0,f=h.length;t<f;t++)o.push(y(h[t])),s=s.concat(o[o.length-1].texts);u=s.join(""),i=[u]}else u="",i=[];return e.text=u,e.texts=i,e.subNodes=o,e}function p(n){for(var l,w,h="",o=[],v,a=[],t,s=[],y,k,d=n.node,i=0,c=n.subNodes.length;i<c;i++)if(t=n.subNodes[i],t.nodeType===r.TEXT_NODE)for(y=t.texts,l=0,w=y.length;l<w;l++)a.push([y[l],r.TEXT_NODE,undefined]);else k=t.text,a.push([k,r.ELEMENT_NODE,t]);for(i=0,c=a.length;i<c;i++)t=a[i],v=h+t[0],e(v,!0)?(h=v,t[1]===r.ELEMENT_NODE?o.push(u(t[2].node)):o.push(t[0])):(e(h)?s.push(b(o.join(""))):s.push(o.join("")),h="",o=[],t[1]===r.ELEMENT_NODE?(t[2]=p(t[2]),s.push(u(t[2].node))):s.push(t[0]));return e(h)?s.push(b(o.join(""))):s.push(o.join("")),f(d,s.join("")),n}function ht(t,i){var h=[],e=[],c,b,y=!1,s,p,l,f,k=!1;for(t=a(t),c=0,b=t.length;c<b;c++)s=t[c],s.nodeType===r.TEXT_NODE?(y=!0,l=s.nodeValue):(p=w(s,n.inArray(s.nodeName,v)>=0),y=!p[1],l=p[0]),y?e.push(l):(e&&(f=e.join(""),i||(f=o(f)),h.push(f),e=[]),h.push(u(l)),k=!0);return e&&(f=e.join(""),i||(f=o(f)),h.push(f)),[h,k]}function w(t,i,e){var s,h=n.inArray(t.nodeName,v)===-1;return t?t.nodeType===r.TEXT_NODE?[i?t.nodeValue:o(t.nodeValue),!1]:(t.nodeType===r.ELEMENT_NODE&&t.nodeName!=="A"&&(s=ht(t.childNodes,i),f(t,s[0].join("")),h=h||s[1]),[e?t.innerHTML:u(t),h]):["",!1]}function e(n,t){return!n||ot.test(n)?!1:t&&n.length<=8?!0:ut.test(n)&&ft.test(n)}function b(t){var i=n("<div>"+t+"<\/div>").text();for(i.indexOf("www.")||(i="http://"+i);i.charAt(i.length-1).match(et);)i=i.substring(0,i.length-1);return'<a href="'+i+'" target="_blank">'+t+"<\/a>"}function o(n){var t=document.createElement("div"),i;return f(t,n),i=y(t),t=p(i).node,t.innerHTML}function ct(i){var r=n("<div>"+i+"<\/div>");return t?r.text():w(r[0],!1,!0)[0]}function k(t){var i=n("<div><\/div>");return t.contents().each(function(){var t,r,u;this.nodeType==3?i.append(lt(this.nodeValue)):(t=n(this),r=t.html(),!!r&&r.length>0&&(u=k(t),t.html(u)),i.append(t))}),i.html()}function lt(t){var r,u,f;if(t.length<=i)return t;for(r=n("<div><\/div>"),u=1,f=0;f<t.length;f++)r.append(t.charAt(f)),u==i?(r.append(n("<wbr />")),u=1):u++;return r.html()}function d(t,i){var u,f,r;return t||(t=""),u=t.replace(/&(?!amp;[\w]{2,5};)/g,"&amp;"),u=u.replace(/\n/g,"<br/>"),f=n("<div>").html(u),r="",f.contents().each(function(){if(this.nodeType==3)r+=this.nodeValue;else{var t=n(this);r+=t.is(i)?n("<div>").html(t).html():d(t.html(),i)}}),r}var g=50,s=/(\n|\r)\s{4,}/gi,r={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},v="B,SPAN,WBR,EM,STRONG,I".split(","),ut=/^(((https?|ftp):\/\/)|(www\.))/,ft=/\S$/,et=/[.,!:;\\?]/,ot=/\s/,st=/\b/;return{controlHtmlLength:nt,linkWrapper:ct,truncateHtml:l,toWbr:k,getTextFromHtmlSelectively:d,cutHtmlLength:h}}function yi(){u.trigger("onBeforeSignIn")}function pi(n){u.trigger("SignInComplete",{widgetName:n},t.user)}function ei(n){(!n||n.deactivationFeedbackSubmitted)&&u.trigger("AccountDeactivated")}var o,u,si,bt,kt;typeof window.Flux4!="object"&&(window.Flux4={}),typeof window.Flux!="object"&&(window.Flux={}),Flux4.loadModernizr=function(){function t(){window.Modernizr=function(n,t,i){function h(n){o.cssText=n}function f(n,t){return typeof n===t}function ut(n,t){return!!~(""+n).indexOf(t)}function tt(n,t){for(var r in n)if(o[n[r]]!==i)return t=="pfx"?n[r]:!0;return!1}function ft(n,t,r){var e,u;for(e in n)if(u=t[n[e]],u!==i)return r===!1?n[e]:f(u,"function")?u.bind(r||t):u;return!1}function p(n,t,i){var r=n.charAt(0).toUpperCase()+n.substr(1),u=(n+" "+k.join(r+" ")+r).split(" ");return f(t,"string")||f(t,"undefined")?tt(u,t):(u=(n+" "+d.join(r+" ")+r).split(" "),ft(u,t,i))}var r={},it=t.documentElement,e="modernizr",w=t.createElement(e),o=w.style,rt,ot={}.toString,l=" -webkit- -moz- -o- -ms- ".split(" "),b="Webkit Moz O ms",k=b.split(" "),d=b.toLowerCase().split(" "),u={},g=[],a=g.slice,s,nt=function(n,i,r,u){var c,l,h,f=t.createElement("div"),s=t.body,o=s?s:t.createElement("body");if(parseInt(r,10))while(r--)h=t.createElement("div"),h.id=u?u[r]:e+(r+1),f.appendChild(h);return c=["&#173;","<style>",n,"<\/style>"].join(""),f.id=e,(s?f:o).innerHTML+=c,o.appendChild(f),s||(o.style.background="",it.appendChild(o)),l=i(f,n),s?f.parentNode.removeChild(f):o.parentNode.removeChild(o),!!l},v={}.hasOwnProperty,y,et,c;y=f(v,"undefined")||f(v.call,"undefined")?function(n,t){return t in n&&f(n.constructor.prototype[t],"undefined")}:function(n,t){return v.call(n,t)},Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i,r;if(typeof t!="function")throw new TypeError;return i=a.call(arguments,1),r=function(){var f,e,u;return this instanceof r?(f=function(){},f.prototype=t.prototype,e=new f,u=t.apply(e,i.concat(a.call(arguments))),Object(u)===u)?u:e:t.apply(n,i.concat(a.call(arguments)))},r}),et=function(i,u){var e=i.join(""),f=u.length;nt(e,function(i){for(var u=t.styleSheets[t.styleSheets.length-1],s=u?u.cssRules&&u.cssRules[0]?u.cssRules[0].cssText:u.cssText||"":"",o=i.childNodes,e={};f--;)e[o[f].id]=o[f];r.touch="ontouchstart"in n||n.DocumentTouch&&t instanceof DocumentTouch||(e.touch&&e.touch.offsetTop)===9},f,u)}([,["@media (",l.join("touch-enabled),("),e,")","{#touch{top:9px;position:absolute}}"].join("")],[,"touch"]),u.touch=function(){return r.touch},u.postmessage=function(){return!!n.postMessage},u.rgba=function(){return h("background-color:rgba(150,255,150,.5)"),ut(o.backgroundColor,"rgba")},u.multiplebgs=function(){return h("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(o.background)},u.borderradius=function(){return p("borderRadius")},u.boxshadow=function(){return p("boxShadow")};for(c in u)y(u,c)&&(s=c.toLowerCase(),r[s]=u[c](),g.push((r[s]?"":"no-")+s));return r.addTest=function(n,t){if(typeof n=="object")for(var u in n)y(n,u)&&r.addTest(u,n[u]);else{if(n=n.toLowerCase(),r[n]!==i)return r;t=typeof t=="function"?t():t,r[n]=t}return r},h(""),w=rt=null,r._version="2.5.3",r._prefixes=l,r._domPrefixes=d,r._cssomPrefixes=k,r.testProp=function(n){return tt([n])},r.testAllProps=p,r.testStyles=nt,r}(this,this.document)}var n=window.Modernizr;if(t.apply(window),Flux4.Modernizr=window.Modernizr,typeof n!="undefined")window.Modernizr=n;else try{delete window.Modernizr}catch(i){window.Modernizr=undefined}(function(n){n.addTest("ipad",function(){return!!navigator.userAgent.match(/iPad/i)}),n.addTest("iphone",function(){return!!navigator.userAgent.match(/iPhone/i)}),n.addTest("ipod",function(){return!!navigator.userAgent.match(/iPod/i)}),n.addTest("appleios",function(){return n.ipad||n.ipod||n.iphone}),n.addTest("cookies",function(){if(navigator.cookieEnabled)return!0;if(navigator.cookieEnabled===!1)return!1;document.cookie="cookietest=1";var n=document.cookie.indexOf("cookietest=")!=-1;return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",n}),n.addTest("positionfixed",function(){var i=document.createElement("div"),r=i.cloneNode(!1),u=!1,t=document.body||function(){return u=!0,document.documentElement.appendChild(document.createElement("body"))}(),e=t.style.cssText,f;return t.style.cssText="padding:0;margin:0",i.style.cssText="position:fixed;top:42px",t.appendChild(i),t.appendChild(r),f=i.offsetTop!==r.offsetTop,t.removeChild(i),t.removeChild(r),t.style.cssText=e,u&&document.documentElement.removeChild(t),navigator.userAgent.match(/OS (\d)/i),f&&(!n.appleios||n.appleios&&RegExp.$1>=5)}),n.addTest("mediaquery",function(){var t="(min-width: 0px)",i=window.matchMedia||window.msMatchMedia,r;return i?i(t)&&i(t).matches||!1:(n.testStyles("@media "+t+" { #modernizr { position: absolute; } }",function(n){r=(window.getComputedStyle?getComputedStyle(n,null):n.currentStyle).position=="absolute"}),r)}),window.matchMedia||(window.matchMedia=function(n){"use strict";var r=n.document,f=r.documentElement,i=[],u=0,e="",t={},l=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,a=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,o=0,s=function(n){var tt=n.indexOf(",")!==-1&&n.split(",")||[n],b=tt.length-1,it=b,c=null,i=null,k="",p=0,d=!1,w="",h="",g=null,v=0,rt=0,r=null,nt="",f="",s="",o="",y="",u=!1;if(n==="")return!0;do{if(c=tt[it-b],d=!1,i=c.match(l),i&&(k=i[0],p=i.index),!i||c.substring(0,p).indexOf("(")===-1&&(p||!i[3]&&k!==i.input)){u=!1;continue}if(h=c,d=i[1]==="not",p||(w=i[2],h=c.substring(k.length)),u=w===e||w==="all"||w==="",g=h.indexOf(" and ")!==-1&&h.split(" and ")||[h],v=g.length-1,rt=v,u&&v>=0&&h!=="")do{if(r=g[v].match(a),!r||!t[r[3]]){u=!1;break}if(nt=r[2],f=r[5],o=f,s=r[7],y=t[r[3]],s&&(o=s==="px"?Number(f):s==="em"||s==="rem"?16*f:r[8]?(f/r[8]).toFixed(2):s==="dppx"?f*96:s==="dpcm"?f*.3937:Number(f)),u=nt==="min-"&&o?y>=o:nt==="max-"&&o?y<=o:o?y===o:!!y,!u)break}while(v--);if(u)break}while(b--);return d?!u:u},h=function(){var i=n.innerWidth||f.clientWidth,r=n.innerHeight||f.clientHeight,e=n.screen.width,o=n.screen.height,s=n.screen.colorDepth,u=n.devicePixelRatio;t.width=i,t.height=r,t["aspect-ratio"]=(i/r).toFixed(2),t["device-width"]=e,t["device-height"]=o,t["device-aspect-ratio"]=(e/o).toFixed(2),t.color=s,t["color-index"]=Math.pow(2,s),t.orientation=r>=i?"portrait":"landscape",t.resolution=u&&u*96||n.screen.deviceXDPI||96,t["device-pixel-ratio"]=u||1},c=function(){clearTimeout(o),o=setTimeout(function(){var t=null,f=u-1,c=f,e=!1,r,o;if(f>=0){h();do if(t=i[c-f],t&&(e=s(t.mql.media),(e&&!t.mql.matches||!e&&t.mql.matches)&&(t.mql.matches=e,t.listeners)))for(r=0,o=t.listeners.length;r<o;r++)t.listeners[r]&&t.listeners[r].call(n,t.mql);while(f--)}},10)},v=function(){var s=r.getElementsByTagName("head")[0],t=r.createElement("style"),l=null,u=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],i=0,v=u.length,f="#mediamatchjs { position: relative; z-index: 0; }",o="",a=n.addEventListener||(o="on")&&n.attachEvent;for(t.type="text/css",t.id="mediamatchjs",s.appendChild(t),l=n.getComputedStyle&&n.getComputedStyle(t)||t.currentStyle;i<v;i++)f+="@media "+u[i]+" { #mediamatchjs { position: relative; z-index: "+i+" } }";t.styleSheet?t.styleSheet.cssText=f:t.textContent=f,e=u[l.zIndex*1||0],s.removeChild(t),h(),a(o+"resize",c),a(o+"orientationchange",c)};return v(),function(n){var r=u,t={matches:!1,media:n,addListener:function(n){i[r].listeners||(i[r].listeners=[]),n&&i[r].listeners.push(n)},removeListener:function(n){var t=i[r],u=0,f=0;if(t)for(f=t.listeners.length;u<f;u++)t.listeners[u]===n&&t.listeners.splice(u,1)}};return n===""?(t.matches=!0,t):(t.matches=s(n),u=i.push({mql:t,listeners:null}),t)}}(window))})(Flux4.Modernizr)},o=function(n,t){var u,e,i,r;if(!(this instanceof o))return new o(n,t);if(!f)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(arguments.length<=2&&arguments.length>0)t=typeof arguments[0]=="function"?arguments[0]:arguments[1],n=typeof arguments[0]=="function"?{}:arguments[0];else throw"Incorrect # of ctor args!";if(typeof t!="function")throw"No callback was provided";if(this.record=n.record||"record",this.name=n.name||"records",n.adapter)for(i=0,r=o.adapters.length;i<r;i++)if(o.adapters[i].adapter===n.adapter){u=o.adapters[i].valid()?o.adapters[i]:undefined;break}if(!u)for(i=0,r=o.adapters.length;i<r;i++)if(u=o.adapters[i].valid()?o.adapters[i]:undefined,u)break;if(!u)throw"No valid adapter.";for(e in u)this[e]=u[e];for(i=0,r=o.plugins.length;i<r;i++)o.plugins[i].call(this);this.init(n,t)},o.adapters=[],o.adapter=function(n,t){var r,u,i;t.adapter=n,r="adapter valid init keys save batch get exists all remove nuke".split(" "),u=this.prototype.indexOf;for(i in t)if(u(r,i)===-1)throw"Invalid adapter! Nonstandard method: "+i;o.adapters.push(t)},o.plugins=[],o.plugin=function(n){for(var t in n)t==="init"?o.plugins.push(n[t]):this.prototype[t]=n[t]},o.prototype={isArray:Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},indexOf:function(n,t,i,r){if(n.indexOf)return n.indexOf(t);for(i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},lambda:function(n){return this.fn(this.record,n)},fn:function(n,t){return typeof t=="string"?new Function(n,t):t},uuid:function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},each:function(n){var i=this.lambda(n),t,r;if(this.__results)for(t=0,r=this.__results.length;t<r;t++)i.call(this,this.__results[t],t);else this.all(function(n){for(var t=0,r=n.length;t<r;t++)i.call(this,n[t],t)});return this}},o.adapter("dom",function(){o.prototype.isLocalStorageEnabled=function(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}};var n=o.prototype.isLocalStorageEnabled()?window.localStorage:null,t=function(t){return{key:t+"._index_",all:function(){var t=n.getItem(this.key);return t&&(t=f.parse(t)),t===null&&n.setItem(this.key,f.stringify([])),f.parse(n.getItem(this.key))},add:function(t){var i=this.all();i.push(t),n.setItem(this.key,f.stringify(i))},del:function(t){for(var r=this.all(),u=[],i=0,e=r.length;i<e;i++)r[i]!=t&&u.push(r[i]);n.setItem(this.key,f.stringify(u))},find:function(n){for(var i=this.all(),t=0,r=i.length;t<r;t++)if(n===i[t])return t;return!1}}};return{valid:function(){return!!n},init:function(n,i){this.indexer=t(this.name),i&&this.fn(this.name,i).call(this,this)},save:function(t,i){var r=t.key?this.name+"."+t.key:this.name+"."+this.uuid();return this.indexer.find(r)===!1&&this.indexer.add(r),delete t.key,n.setItem(r,f.stringify(t)),t.key=r.slice(this.name.length+1),i&&this.lambda(i).call(this,t),this},batch:function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)this.save(n[i],function(n){r.push(n)});return t&&this.lambda(t).call(this,r),this},keys:function(n){if(n){var t=this.name,i=this.indexer.all().map(function(n){return n.replace(t+".","")});this.fn("keys",n).call(this,i)}return this},get:function(t,i){var o,u,s,e,r;if(this.isArray(t)){for(o=[],u=0,s=t.length;u<s;u++)e=this.name+"."+t[u],r=n.getItem(e),r&&(r=f.parse(r),r.key=t[u],o.push(r));i&&this.lambda(i).call(this,o)}else e=this.name+"."+t,r=n.getItem(e),r&&(r=f.parse(r),r.key=t),i&&this.lambda(i).call(this,r);return this},exists:function(n,t){var i=this.indexer.find(this.name+"."+n)===!1?!1:!0;return this.lambda(t).call(this,i),this},all:function(t){for(var e=this.indexer.all(),o=[],r,u,i=0,s=e.length;i<s;i++)u=e[i],r=f.parse(n.getItem(u)),r.key=u.replace(this.name+".",""),o.push(r);return t&&this.fn(this.name,t).call(this,o),this},remove:function(t,i){var r=this.name+"."+(t.key?t.key:t);return this.indexer.del(r),n.removeItem(r),i&&this.lambda(i).call(this),this},nuke:function(n){return this.all(function(t){for(var i=0,r=t.length;i<r;i++)this.remove(t[i]);n&&this.lambda(n).call(this)}),this}}}()),o.adapter("ie-userdata",{valid:function(){return typeof document.body.addBehavior!="undefined"},init:function(n,t){var i=document.createElement("span");i.style.behavior="url('#default#userData')",i.style.position="absolute",i.style.left=1e4,document.body.appendChild(i),this.storage=i,this.storage.load(this.name),this.fn(this.name,t).call(this,this)},get:function(n,t){var i=f.parse(this.storage.getAttribute(n)||"null");return i&&(i.key=n),t&&this.lambda(t).call(this,i),this},save:function(n,t){var i=n.key||"lc"+this.uuid();return delete n.key,this.storage.setAttribute(i,f.stringify(n)),this.storage.save(this.name),n.key=i,t&&this.lambda(t).call(this,n),this},all:function(n){for(var u=this.storage.XMLDocument.firstChild.attributes,e=[],r,t,i=0,o=u.length;i<o;i++)r=u[i],t=f.parse(r.nodeValue||"null"),t&&(t.key=r.nodeName,e.push(t));return n&&this.fn(this.name,n).call(this,e),this},remove:function(n,t){var i=typeof n=="string"?n:n.key;return this.storage.removeAttribute(i),this.storage.save(this.name),t&&this.lambda(t).call(this),this},nuke:function(n){var t=this;return this.all(function(i){for(var r=0,u=i.length;r<u;r++)i[r].key&&t.remove(i[r].key);n&&t.lambda(n).call(t)}),this}}),o.adapter("indexed-db",function(){function t(n,t){console.error("error in indexed-db adapter!",n,t)}var n="lawnchair",i=2,u=function(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB},r=function(){return window.IDBTransaction||window.webkitIDBTransaction||window.mozIDBTransaction||window.oIDBTransaction||window.msIDBTransaction},f=function(){return window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.oIDBKeyRange||window.msIDBKeyRange};return{valid:function(){return!!u()},init:function(r,f){this.idb=u(),this.waiting=[];var o=this.idb.open(this.name,i),e=this,c=e.fn(e.name,f),s=function(){return c.call(e,e)},h=function(){try{e.db.deleteObjectStore("teststore")}catch(i){}try{e.db.deleteObjectStore(n)}catch(r){}e.store=e.db.createObjectStore(n,{autoIncrement:!0});for(var t=0;t<e.waiting.length;t++)e.waiting[t].call(e);e.waiting=[],s()};o.onupgradeneeded=function(n){h(n.oldVersion,n.newVersion)},o.onsuccess=function(){var u,r,n;if(e.db=o.result,e.db.version!=""+i)u=e.db.version,r=e.db.setVersion(""+i),r.onsuccess=function(){h(u,i)},r.onerror=function(n){console.log("Failed to create objectstore "+n),t(n)};else{for(e.store={},n=0;n<e.waiting.length;n++)e.waiting[n].call(e);e.waiting=[],s()}},o.onerror=t},save:function(i,u){if(!this.store){this.waiting.push(function(){this.save(i,u)});return}var f=this,s=function(n){u&&(i.key=n.target.result,f.lambda(u).call(f,i))},h=this.db.transaction(n,r().READ_WRITE),e=h.objectStore(n),o=i.key?e.put(i,i.key):e.put(i);return o.onsuccess=s,o.onerror=t,this},batch:function(n,t){for(var r=[],u=!1,f=this,o=function(t){r.push(t),u=r.length===n.length},s=setInterval(function(){u&&(t&&f.lambda(t).call(f,r),clearInterval(s))},200),i=0,e=n.length;i<e;i++)this.save(n[i],o);return this},get:function(i,r){var u,h,e,f,l;if(!this.store){this.waiting.push(function(){this.get(i,r)});return}if(u=this,h=function(n){r&&u.lambda(r).call(u,n.target.result)},this.isArray(i)){var o=[],c=!1,s=i,a=function(n){o.push(n),c=o.length===s.length},v=setInterval(function(){c&&(r&&u.lambda(r).call(u,o),clearInterval(v))},200);for(f=0,l=s.length;f<l;f++)this.get(s[f],a)}else e=this.db.transaction(n).objectStore(n).get(i),e.onsuccess=h,e.onerror=function(n){console.log("Failed to find "+i),t(n)};return this},exists:function(i,r){if(!this.store){this.waiting.push(function(){this.exists(i,r)});return}var u=this,e=this.db.transaction(n).objectStore(n).openCursor(f().only(i));return e.onsuccess=function(n){u.lambda(r).call(u,n.target.result!==null)},e.onerror=function(n){console.log("Failed to test for "+i),t(n)},this},all:function(t){if(!this.store){this.waiting.push(function(){this.all(t)});return}var i=this.fn(this.name,t)||undefined,u=this,f=this.db.transaction(n).objectStore(n),r=[];return f.openCursor().onsuccess=function(n){var t=n.target.result;t?(r.push(t.value),t["continue"]()):i&&i.call(u,r)},this},remove:function(i,u){if(!this.store){this.waiting.push(function(){this.remove(i,u)});return}typeof i=="object"&&(i=i.key);var f=this,o=function(){u&&f.lambda(u).call(f)},e=this.db.transaction(n,r().READ_WRITE).objectStore(n)["delete"](i);return e.onsuccess=o,e.onerror=t,this},nuke:function(i){if(!this.store){this.waiting.push(function(){this.nuke(i)});return}var u=this,f=i?function(){u.lambda(i).call(u)}:function(){};try{this.db.transaction(n,r().READ_WRITE).objectStore(n).clear().onsuccess=f}catch(e){t()}return this}}}()),o.adapter("webkit-sqlite",function(){var n=function(n,t){console.log("error in sqlite adaptor!",n,t)},t=function(){return new Date};return Function.prototype.bind||(Function.prototype.bind=function(n){var i=[].slice,f=i.call(arguments,1),r=this,t=function(){},u=function(){return r.apply(this instanceof t?this:n||{},f.concat(i.call(arguments)))};return t.prototype=r.prototype,u.prototype=new t,u}),{valid:function(){return!!window.openDatabase},init:function(t,i){var r=this,u=r.fn(r.name,i),f="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",e=function(){return u.call(r,r)};this.db=openDatabase(this.name,"1.0.0",this.name,65536),this.db.transaction(function(t){t.executeSql(f,[],e,n)})},keys:function(t){var i=this.lambda(t),r=this,u="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.transaction(function(t){var f=function(n,t){var f,u,e;if(t.rows.length==0)i.call(r,[]);else{for(f=[],u=0,e=t.rows.length;u<e;u++)f.push(t.rows.item(u).id);i.call(r,f)}};t.executeSql(u,[],f,n)}),this},save:function(i,r){var u=this,o=i.key||u.uuid(),h="INSERT INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",c="UPDATE "+this.record+" SET value=?, timestamp=? WHERE id=?",s=function(){r&&(i.key=o,u.lambda(r).call(u,i))},e=[t(),o];return u.exists(i.key,function(t){u.db.transaction(function(r){var u=function(t){e.unshift(f.stringify(t)),r.executeSql(h,e,s,n)},o=function(t){delete t.key,e.unshift(f.stringify(t)),r.executeSql(c,e,s,n)};t?o(i):u(i)})}),this},batch:function(n,t){for(var r=[],u=!1,f=this,o=function(t){r.push(t),u=r.length===n.length},s=setInterval(function(){u&&(t&&f.lambda(t).call(f,r),clearInterval(s))},200),i=0,e=n.length;i<e;i++)this.save(n[i],o);return this},get:function(t,i){var r=this,u="",e;return u=this.isArray(t)?"SELECT id, value FROM "+this.record+" WHERE id IN ('"+t.join("','")+"')":"SELECT id, value FROM "+this.record+" WHERE id = '"+t+"'",e=function(n,u){var s=null,e=[],o,h;if(u.rows.length)for(o=0,h=u.rows.length;o<h;o++)s=f.parse(u.rows.item(o).value),s.key=u.rows.item(o).id,e.push(s);r.isArray(t)||(e=e.length?e[0]:null),i&&r.lambda(i).call(r,e)},this.db.transaction(function(t){t.executeSql(u,[],e,n)}),this},exists:function(t,i){var u="SELECT * FROM "+this.record+" WHERE id = ?",r=this,f=function(n,t){i&&r.fn("exists",i).call(r,t.rows.length>0)};return this.db.transaction(function(i){i.executeSql(u,[t],f,n)}),this},all:function(t){var u=this,e="SELECT * FROM "+this.record,i=[],r=this.fn(this.name,t)||undefined,o=function(n,t){var e,s,o;if(t.rows.length!=0)for(e=0,s=t.rows.length;e<s;e++)o=f.parse(t.rows.item(e).value),o.key=t.rows.item(e).id,i.push(o);r&&r.call(u,i)};return this.db.transaction(function(t){t.executeSql(e,[],o,n)}),this},remove:function(t,i){var r=this,u=typeof t=="string"?t:t.key,f="DELETE FROM "+this.record+" WHERE id = ?",e=function(){i&&r.lambda(i).call(r)};return this.db.transaction(function(t){t.executeSql(f,[u],e,n)}),this},nuke:function(t){var r="DELETE FROM "+this.record,i=this,u=t?function(){i.lambda(t).call(i)}:function(){};return this.db.transaction(function(t){t.executeSql(r,[],u,n)}),this}}}());var dt=function(){var i=function(){var t=0,i,r=function(){t=0,n.isFunction(i)&&i()};return{newCallback:function(i){return t++,function(){n.isFunction(i)&&i(),t--,t==0&&r()}},allDone:function(n){i=n,t==0&&r()}}},t={};return t.iterator=function(n){var t=function(i){var r=function(){return n.length&&n[i].apply(null,arguments),r.next()};return r.next=function(){return i<n.length-1?t(i+1):null},r};return t(0)},t.waterfall=function(n,i){if(i=i||function(){},!n.length)return i();var r=function(n){return function(t){if(t)i(t),i=function(){};else{var u=Array.prototype.slice.call(arguments,1),f=n.next();f?u.push(r(f)):u.push(i),setTimeout(function(){n.apply(null,u)},0)}}};r(t.iterator(n))()},{fork:function(){var r=arguments.length-1,u=arguments[arguments.length-1],f,t,i;if(!n.isFunction(u))throw new p("AsyncOperations - fork: last argument must be a function.");for(f=function(){r--,r==0&&u()},t=0;t<arguments.length-1;t++){if(i=arguments[t],!n.isFunction(i))throw new p("AsyncOperations - fork: "+(t+1)+" argument must be a function.");i(f)}},createAsyncManager:function(){return new i},waterfall:t.waterfall}}(),ki=function(){function u(){}function f(f,e,o){o&&o.width&&o.height&&o.buttonSpriteUrl||u("parameter buttonInfo of embedClipboardFlash(containerId, callback, buttonInfo) must contain width, height and buttonSpriteUrl");var s="_copyCallback_"+t;t++,window[n]||(window[n]=[]),window[n][s]=function(){return e()},r.embedSWF(i.clipboardFlashUrl,f,o.width,o.height,"9.0.0",null,{buttonSpriteUrl:encodeURIComponent(o.buttonSpriteUrl),copyCallbackName:"window."+n+"."+s},{allowscriptaccess:"always",wmode:"transparent",scale:"noscale",salign:"lt",menu:"false"},{id:f})}var n="Flux4_Core_Utils_Clipboard_GlobalCallbacks",r=function(){function b(){var u,r,f,i;if(!c){if(n.ie&&n.win){u=o("span");try{r=t.getElementsByTagName("body")[0].appendChild(u),r.parentNode.removeChild(r)}catch(e){return}}for(c=!0,p&&(clearInterval(p),p=null),f=y.length,i=0;i<f;i++)y[i]()}}function k(n){c?n():y[y.length]=n}function ut(n){if(typeof r.addEventListener!=i)r.addEventListener("load",n,!1);else if(typeof t.addEventListener!=i)t.addEventListener("load",n,!1);else if(typeof r.attachEvent!=i)r.attachEvent("onload",n);else if(typeof r.onload=="function"){var u=r.onload;r.onload=function(){u(),n()}}else r.onload=n}function ot(){for(var f=e.length,r,i,t=0;t<f;t++)r=e[t].id,n.pv[0]>0?(i=u(r),i&&(e[t].width=i.getAttribute("width")?i.getAttribute("width"):"0",e[t].height=i.getAttribute("height")?i.getAttribute("height"):"0",l(e[t].swfVersion)?(n.webkit&&n.webkit<312&&st(i),s(r,!0)):e[t].expressInstall&&!v&&l("6.0.65")&&(n.win||n.mac)?ft(e[t]):ct(i))):s(r,!0)}function st(n){var s=n.getElementsByTagName(f)[0],e,t,h,i,r,c,u;if(s){if(e=o("embed"),t=s.attributes,t)for(h=t.length,i=0;i<h;i++)t[i].nodeName.toLowerCase()=="data"?e.setAttribute("src",t[i].nodeValue):e.setAttribute(t[i].nodeName,t[i].nodeValue);if(r=s.childNodes,r)for(c=r.length,u=0;u<c;u++)r[u].nodeType==1&&r[u].nodeName.toLowerCase()=="param"&&e.setAttribute(r[u].getAttribute("name"),r[u].getAttribute("value"));n.parentNode.replaceChild(e,n)}}function ht(t){n.ie&&n.win&&l("8.0.0")&&r.attachEvent("onunload",function(){var n=u(t),i;if(n){for(i in n)typeof n[i]=="function"&&(n[i]=function(){});n.parentNode.removeChild(n)}})}function ft(i){var f,e,c;if(v=!0,f=u(i.id),f){i.altContentId?(e=u(i.altContentId),e&&(h=e,w=i.altContentId)):h=g(f),!/%$/.test(i.width)&&parseInt(i.width,10)<310&&(i.width="310"),!/%$/.test(i.height)&&parseInt(i.height,10)<137&&(i.height="137"),t.title=t.title.slice(0,47)+" - Flash Player Installation";var l=n.ie&&n.win?"ActiveX":"PlugIn",a=t.title,y="MMredirectURL="+r.location+"&MMplayerType="+l+"&MMdoctitle="+a,s=i.id;n.ie&&n.win&&f.readyState!=4&&(c=o("div"),s+="SWFObjectNew",c.setAttribute("id",s),f.parentNode.insertBefore(c,f),f.style.display="none",r.attachEvent("onload",function(){f.parentNode.removeChild(f)})),nt({data:i.expressInstall,id:rt,width:i.width,height:i.height},{flashvars:y},s)}}function ct(t){if(n.ie&&n.win&&t.readyState!=4){var i=o("div");t.parentNode.insertBefore(i,t),i.parentNode.replaceChild(g(t),i),t.style.display="none",r.attachEvent("onload",function(){t.parentNode.removeChild(t)})}else t.parentNode.replaceChild(g(t),t)}function g(t){var u=o("div"),e,i,s,r;if(n.win&&n.ie)u.innerHTML=t.innerHTML;else if(e=t.getElementsByTagName(f)[0],e&&(i=e.childNodes,i))for(s=i.length,r=0;r<s;r++)i[r].nodeType==1&&i[r].nodeName.toLowerCase()=="param"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function nt(t,r,e){var b,p=u(e),k,s,d,w,c,h,v,a,l,y;if(typeof t.id==i&&(t.id=e),n.ie&&n.win){k="";for(s in t)t[s]!=Object.prototype[s]&&(s=="data"?r.movie=t[s]:s.toLowerCase()=="styleclass"?k+=' class="'+t[s]+'"':s!="classid"&&(k+=" "+s+'="'+t[s]+'"'));d="";for(w in r)r[w]!=Object.prototype[w]&&(d+='<param name="'+w+'" value="'+r[w]+'" />');p.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+k+">"+d+"<\/object>",ht(t.id),b=u(t.id)}else if(n.webkit&&n.webkit<312){c=o("embed"),c.setAttribute("type",it);for(h in t)t[h]!=Object.prototype[h]&&(h=="data"?c.setAttribute("src",t[h]):h.toLowerCase()=="styleclass"?c.setAttribute("class",t[h]):h!="classid"&&c.setAttribute(h,t[h]));for(v in r)r[v]!=Object.prototype[v]&&v!="movie"&&c.setAttribute(v,r[v]);p.parentNode.replaceChild(c,p),b=c}else{a=o(f),a.setAttribute("type",it);for(l in t)t[l]!=Object.prototype[l]&&(l.toLowerCase()=="styleclass"?a.setAttribute("class",t[l]):l!="classid"&&a.setAttribute(l,t[l]));for(y in r)r[y]!=Object.prototype[y]&&y!="movie"&&lt(a,y,r[y]);p.parentNode.replaceChild(a,p),b=a}return b}function lt(n,t,i){var r=o("param");r.setAttribute("name",t),r.setAttribute("value",i),n.appendChild(r)}function u(n){return t.getElementById(n)}function o(n){return t.createElement(n)}function l(t){var r=n.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10),i[2]=parseInt(i[2],10),r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function et(r,u){var h,e,s;n.ie&&n.mac||(h=t.getElementsByTagName("head")[0],e=o("style"),e.setAttribute("type","text/css"),e.setAttribute("media","screen"),n.ie&&n.win||typeof t.createTextNode==i||e.appendChild(t.createTextNode(r+" {"+u+"}")),h.appendChild(e),n.ie&&n.win&&typeof t.styleSheets!=i&&t.styleSheets.length>0&&(s=t.styleSheets[t.styleSheets.length-1],typeof s.addRule==f&&s.addRule(r,u)))}function s(n,t){var i=t?"visible":"hidden";c?u(n).style.visibility=i:et("#"+n,"visibility:"+i)}var i="undefined",f="object",tt="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",it="application/x-shockwave-flash",rt="SWFObjectExprInst",r=window,t=document,a=navigator,y=[],e=[],p=null,h=null,w=null,c=!1,v=!1,n=function(){var c=typeof t.getElementById!=i&&typeof t.getElementsByTagName!=i&&typeof t.createElement!=i&&typeof t.appendChild!=i&&typeof t.replaceChild!=i&&typeof t.removeChild!=i&&typeof t.cloneNode!=i,u=[0,0,0],n=null,e,o;if(typeof a.plugins!=i&&typeof a.plugins[tt]==f)n=a.plugins[tt].description,n&&(n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/r/.test(n)?parseInt(n.replace(/^.*r(.*)$/,"$1"),10):0);else if(typeof r.ActiveXObject!=i){e=null,o=!1;try{e=new ActiveXObject(d+".7")}catch(p){try{e=new ActiveXObject(d+".6"),u=[6,0,21],e.AllowScriptAccess="always"}catch(p){u[0]==6&&(o=!0)}if(!o)try{e=new ActiveXObject(d)}catch(p){}}if(!o&&e)try{n=e.GetVariable("$version"),n&&(n=n.split(" ")[1].split(","),u=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}catch(p){}}var s=a.userAgent.toLowerCase(),h=a.platform.toLowerCase(),l=/webkit/.test(s)?parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=h?/win/.test(h):/win/.test(s),y=h?/mac/.test(h):/mac/.test(s);return{w3cdom:c,pv:u,webkit:l,ie:!1,win:v,mac:y}}(),at=function(){if(n.w3cdom){if(k(ot),n.ie&&n.win)try{t.write("<script id=__ie_ondomload defer=true src=//:><\/script>");var r=u("__ie_ondomload");r&&(r.onreadystatechange=function(){this.readyState=="complete"&&(this.parentNode.removeChild(this),b())})}catch(f){}n.webkit&&typeof t.readyState!=i&&(p=setInterval(function(){/loaded|complete/.test(t.readyState)&&b()},10)),typeof t.addEventListener!=i&&t.addEventListener("DOMContentLoaded",b,null),ut(b)}}();return{registerObject:function(t,i,r){if(n.w3cdom&&t&&i){var u={};u.id=t,u.swfVersion=i,u.expressInstall=r?r:!1,e[e.length]=u,s(t,!1)}},getObjectById:function(t){var o=null,r,e;return n.w3cdom&&c&&(r=u(t),r&&(e=r.getElementsByTagName(f)[0],!e||e&&typeof r.SetVariable!=i?o=r:typeof e.SetVariable!=i&&(o=e))),o},embedSWF:function(t,r,u,e,o,h,c,a,y){var w,b,p;if(n.w3cdom&&t&&r&&u&&e&&o)if(u+="",e+="",l(o)){if(s(r,!1),w=typeof y==f?y:{},w.data=t,w.width=u,w.height=e,b=typeof a==f?a:{},typeof c==f)for(p in c)c[p]!=Object.prototype[p]&&(typeof b.flashvars!=i?b.flashvars+="&"+p+"="+c[p]:b.flashvars=p+"="+c[p]);k(function(){nt(w,b,r),w.id==r&&s(r,!0)})}else h&&!v&&l("6.0.65")&&(n.win||n.mac)&&(s(r,!1),k(function(){var n={};n.id=n.altContentId=r,n.width=u,n.height=e,n.expressInstall=h,ft(n)}))},getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:l,createSWF:function(t,i,r){return n.w3cdom&&c?nt(t,i,r):undefined},createCSS:function(t,i){n.w3cdom&&et(t,i)},addDomLoadEvent:k,addLoadEvent:ut,getQueryParamValue:function(n){var u=t.location.search||t.location.hash,r,i;if(n==null)return u;if(u)for(r=u.substring(1).split("&"),i=0;i<r.length;i++)if(r[i].substring(0,r[i].indexOf("="))==n)return r[i].substring(r[i].indexOf("=")+1);return""},expressInstallCallback:function(){if(v&&h){var t=u(rt);t&&(t.parentNode.replaceChild(h,t),w&&(s(w,!0),n.ie&&n.win&&(h.style.display="block")),h=null,w=null,v=!1)}}}}(),t=0;return{embedClipboardFlash:f}}(),gt=function(n,t){function o(t,i){return e.trace("CookieDataCache"+(n?"["+n+"]:":":")+t,i)}function i(){var t=l.getCookie(n),i=[];if(t)try{i=f.parse(t)}catch(r){o("cookie parsing error: "+r,!0)}return i}function s(n){return n.expires<=(new Date).getTime()}function r(n,t){return _.detect(n,function(n){return n.key==t&&!s(n)})}function u(i){var r=_.reject(i,function(n){return s(n)});r.length>0?l.setCookie(n,f.stringify(r),t):l.setCookie(n,"",-1)}return n||o("cookieName is not defined"),t||(t=9e5),{containsKey:function(n){return!!r(i(),n)},getValue:function(n){return(r(i(),n)||{}).value},add:function(n,f){var o=i(),e=r(o,n);e||(e={key:n},o.push(e)),_.isUndefined(f)||(e.value=f),e.expires=(new Date).getTime()+t,u(o)},removeKey:function(n){var t=i(),f=r(t,n);f&&(f.expires=-1,u(t))},clear:function(){u([])}}},c={getCookie:function(n){var t=_.detect(document.cookie.split("; "),function(t){return t.indexOf(n)==0});if(t)return unescape(t.substring(n.length+1))},setCookie:function(n,t,i){if(i){var r=new Date;r.setTime(r.getTime()+i),i="; expires="+r.toGMTString()}document.cookie=n+"="+t+i+"; path=/;"},setRawCookie:function(n){document.cookie=n+"; path=/"},setCookieToRootDomain:function(n,t,i){var u,r;i&&(u=new Date,u.setTime(u.getTime()+i),i="; expires="+u.toGMTString()),r=location.hostname.split("."),r.length>1&&(r=r[r.length-2]+"."+r[r.length-1]),document.cookie=n+"="+t+i+"; path=/; domain="+r},removeCookie:function(n){this.setCookie(n,null,new Date(0))}};c.ONE_YEAR=31536e6;var ni={generate:function(n){function f(n){var u=n+"",e="",i,r,s=0,f,t,o;for(i=r=0,s=u.length,f=0;f<s;f++)t=u.charCodeAt(f),o=null,t<128?r++:o=t>127&&t<2048?String.fromCharCode(t>>6|192)+String.fromCharCode(t&63|128):String.fromCharCode(t>>12|224)+String.fromCharCode(t>>6&63|128)+String.fromCharCode(t&63|128),o!==null&&(r>i&&(e+=u.substring(i,r)),e+=o,i=r=f+1);return r>i&&(e+=u.substring(i,u.length)),e}function e(n){for(var i,r=n&65535,t=r.toString(16).toUpperCase();t.length<4;)t="0"+t;for(r=n>>>16&65535,i=r.toString(16).toUpperCase();i.length<4;)i="0"+i;return i+t}var i;n=f(n);var t=0,r=0,u=0;for(t=t^-1,i=0;i<n.length;i++)u=(t^n.charCodeAt(i))&255,r="0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(u*9,8),t=t>>>8^r;return t=t^-1,e(t)}},e=function(){function n(n,t){return(n+Math.pow(10,t)).toString().substr(1)}function t(){var t=new Date;return"["+n(t.getHours(),2)+":"+n(t.getMinutes(),2)+":"+n(t.getSeconds(),2)+"."+n(t.getMilliseconds(),3)+"]"}return{trace:function(n,i,r){if(this.enabled&&window.console&&window.console.log){var u=t()+" WDK4:"+n;console.error&&i||console.warn&&r?r?console.warn(u):console.error(u):console.log(u)}},warn:function(n){this.trace(n,!1,!0)},error:function(n){this.trace(n,!0)},enabled:!1}}(),it=function(){function r(n,t){if(t)throw new p(n);}function t(n){if(_.isString(n)&&n.trim())return n;r("Event name must be not an empty string",!0)}var f=/\s+/,n=function(n,t,i,r){var e,o,u,s;if(!i)return!0;if(typeof i=="object"){for(e in i)n[t].apply(n,[e,i[e]].concat(r));return!1}if(f.test(i)){for(o=i.split(f),u=0,s=o.length;u<s;u++)n[t].apply(n,[o[u]].concat(r));return!1}return!0},i=function(n,t){var i,r=-1,u=n.length,f=t[0],e=t[1],o=t[2];switch(t.length){case 0:while(++r<u)(i=n[r]).callback.call(i.ctx);return;case 1:while(++r<u)(i=n[r]).callback.call(i.ctx,f);return;case 2:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e);return;case 3:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e,o);return;default:while(++r<u)(i=n[r]).callback.apply(i.ctx,t);return}};return{on:function(i,r,u){if(!n(this,"on",i,[r,u])||!r)return this;this._events||(this._events={}),i=t(i).toLowerCase();var f=this._events[i]||(this._events[i]=[]);return f.push({callback:r,context:u,ctx:u||this}),this},once:function(t,i,r){if(!n(this,"once",t,[i,r])||!i)return this;var f=this,u=_.once(function(){f.off(t,u),i.apply(this,arguments)});u._callback=i;return this.on(t,u,r)},off:function(i,r,u){var s,f,h,c,e,l,o,a;if(!this._events||!n(this,"off",i,[r,u]))return this;if(!i&&!r&&!u)return this._events=void 0,this;for(c=i?[t(i).toLowerCase()]:_.keys(this._events),e=0,l=c.length;e<l;e++)if(i=c[e],h=this._events[i]){if(this._events[i]=s=[],r||u)for(o=0,a=h.length;o<a;o++)f=h[o],(r&&r!==f.callback&&r!==f.callback._callback||u&&u!==f.context)&&s.push(f);s.length||delete this._events[i]}return this},trigger:function(f){var e=Array.prototype.slice.call(arguments,1),o,s;return n(this,"trigger",f,e)?(this===u&&r('"'+f+'" has been raised'),f=t(f).toLowerCase(),this._events&&(o=this._events[f],s=this._events.all,o&&i(o,e),s&&i(s,arguments)),this===u&&_.each(Flux4.eventListeners,function(n,t){t.toLowerCase()===f&&i([{callback:n,ctx:this}],e)},this),this):this},stopListening:function(n,t,i){var r=this._listeningTo,f,u;if(!r)return this;f=!t&&!i,i||typeof t!="object"||(i=this),n&&((r={})[n._listenId]=n);for(u in r)n=r[u],n.off(t,i,this),(f||_.isEmpty(n._events))&&delete this._listeningTo[u];return this}}}();_.each({listenTo:"on",listenToOnce:"once"},function(n,t){it[t]=function(t,i,r){var u=this._listeningTo||(this._listeningTo={}),f=t._listenId||(t._listenId=_.uniqueId("l"));return u[f]=t,r||typeof i!="object"||(r=this),t[n](i,r,this),this}}),u=_.extend({},it),u.addEventListener=u.on,u.removeEventListener=u.off,u.raiseEvent=u.trigger,si=function(){var t={twitter:{url:"http://platform.twitter.com/widgets.js",isLoaded:function(){return!!window.twttr&&!!window.twttr.widgets}},tumblr:{url:"http://platform.tumblr.com/v1/share.js",isLoaded:function(){return!1}},foursquare:{url:"http://platform.foursquare.com/js/widgets.js",isLoaded:function(){return!!window.fourSq}},pinterest:{url:"http://assets.pinterest.com/js/pinit.js",attributes:{"data-pin-shallow":"true"},isLoaded:function(){return window["PIN_"+~~((new Date).getTime()/864e5)]=!1,!1}}};return{loadLibrary:function(i,r){var u=t[i.toLowerCase()];u&&(u.isLoaded()?r():u.isLoading?u.callbacks.push(r):(u.isLoading=!0,u.callbacks||(u.callbacks=[]),n.isFunction(r)&&u.callbacks.push(r),n.ajax({url:u.url,attributes:u.attributes,success:function(){delete u.isLoading,n.each(u.callbacks,function(n,t){t()}),delete u.callbacks},dataType:"script_extended"})))}}}(),jQuery.ajaxTransport("script_extended",function(n,t){if(n.crossDomain){var i,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(u,f){var e,o;if(i=document.createElement("script"),e=t.attributes,!!e)for(o in e)i.setAttribute(o,e[o]);i.async="async",n.scriptCharset&&(i.charset=n.scriptCharset),i.src=n.url,i.onload=i.onreadystatechange=function(n,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&!e&&r.removeChild(i),i=undefined,t||f(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){if(i)i.onload(0,1)}}}});var di={subscribe:function(t,i,r){typeof window.FB!="object"||_.isNull(window.Fb)||(this[t]||(this[t]={},FB.Event.subscribe(t,_.bind(function(i){var r=this[t][i.toLowerCase()];n.isFunction(r)&&r()},this))),this[t][i.toLowerCase()]=r)}},gi={embed:function(n,t,i,r,u,f,e){var c=st.generate(),s,h,o;e=e||{},e.id=c,e.type="application/x-shockwave-flash",e.data=n,e.width=i,e.height=r,s="<object ";for(o in e)e[o]!=Object.prototype[o]&&(s+=o+'="'+e[o]+'" ');if(s+=">",f=f||{},f.movie=n,u){h="";for(o in u)u[o]!=Object.prototype[o]&&(h+=o+"="+u[o]+"&");f.flashVars=h}for(o in f)f[o]!=Object.prototype[o]&&(s+='<param name="'+o+'" value="'+f[o]+'" />');return s+="<\/object>",_.isString(t)&&(t=document.getElementById(t)),t.innerHTML=s,c}},nr=function(){function r(n,t){if(!window.gapi||!window.gapi.plusone){var r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.type="text/javascript",i.async=!0,!n||(i.text="{lang: '"+n+"'}"),i.src="https://apis.google.com/js/plusone.js",i.onload=i.onreadystatechange=function(){window.gapi&&window.gapi.plusone&&(i.onload=i.onreadystatechange=null,i=undefined,t())},r.insertBefore(i,r.firstChild)}}var t=!1,i=[];return{loadApiScript:function(u,f){window.gapi&&window.gapi.plusone?setTimeout(f,0):(i.push(f),t||(t=!0,r(u,function(){t=!1,n.each(i,function(n,t){t()})})))},renderButton:function(n,t){if(!window.gapi||!window.gapi.plusone)throw new p("GooglePlusOneButton.renderButton: google api os not loaded. Invoke loadApiScript first.");gapi.plusone.render(n,t)}}}(),tr=function(){function r(n,t){if(!window.gapi||!window.gapi.plus){var r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.type="text/javascript",i.async=!0,!n||(i.text="{lang: '"+n+"'}"),i.src="https://apis.google.com/js/plusone.js",i.onload=i.onreadystatechange=function(){window.gapi&&window.gapi.plus&&(i.onload=i.onreadystatechange=null,i=undefined,t())},r.insertBefore(i,r.firstChild)}}var t=!1,i=[];return{loadApiScript:function(u,f){window.gapi&&window.gapi.plus?setTimeout(f,0):(i.push(f),t||(t=!0,r(u,function(){t=!1,n.each(i,function(n,t){t()})})))},renderButton:function(n,t){if(!window.gapi||!window.gapi.plus)throw new p("GoogleShareButton.renderButton: google api os not loaded. Invoke loadApiScript first.");gapi.plus.render(n,t)}}}();var f=function(){function t(n,t){t.append(String(n))}function i(n,t){var f,u,i;if(t.append('"'),r.test(n))for(f=n.length,u=0;u<f;++u)if(i=n.charAt(u),i>=" ")(i==="\\"||i==='"')&&t.append("\\"),t.append(i);else switch(i){case"\b":t.append("\\b");break;case"\f":t.append("\\f");break;case"\n":t.append("\\n");break;case"\r":t.append("\\r");break;case"\t":t.append("\\t");break;default:t.append("\\u00"),i.charCodeAt()<16&&t.append("0"),t.append(i.charCodeAt().toString(16))}else t.append(n);t.append('"')}function u(n,t){t.append(n.toString())}function n(r,f,e,o){var s,c,h,a,y,v,l;switch(typeof r){case"object":if(r){if(o){for(c=0;c<o.length;c++)if(o[c]===r)throw"JSON: Circular reference";}else o=[];try{if(o.push(r),r instanceof Number)t(r,f);else if(r instanceof Boolean)u(r,f);else if(r instanceof String)i(r,f);else if(r instanceof Array){for(f.append("["),s=0;s<r.length;++s)s>0&&f.append(","),n(r[s],f,!1,o);f.append("]")}else{if(r instanceof Date){f.append('"\\/Date('),f.append(r.getTime()),f.append(')\\/"');break}h=[],a=0;for(y in r)h[a++]=y;for(e&&h.sort(),f.append("{"),v=!1,s=0;s<a;s++)l=r[h[s]],typeof l!="undefined"&&typeof l!="function"&&(v?f.append(","):v=!0,n(h[s],f,e,o),f.append(":"),n(l,f,e,o));f.append("}")}}finally{o.splice(o.length-1,1)}}else f.append("null");break;case"number":t(r,f);break;case"string":i(r,f);break;case"boolean":f.append(r.toString());break;default:f.append("null")}}var r=new RegExp('["\\b\\f\\n\\r\\t\\\\\\x00-\\x1F]',"i");return{stringify:function(t){var i={data:"",append:function(n){this.data=this.data+n}};return n(t,i,!1),i.data},parse:function(n){return eval("("+n+")")},dictionaryToJson:function(n){var i={},t;if(n instanceof Array)for(t=0;t<n.length;t++)i[n[t].Key]=n[t].Value;return i},jsonToDictionary:function(n){var i=[],t;for(t in n)i.push({Key:t,Value:n[t]});return i},parseDate:function(n){return new Date(parseInt(n.replace(/\/Date\(|\)\//gi,"")))}}}(),l=function(){function n(n,t,i){if(i){var r=new Date;r.setTime(r.getTime()+i),i="; expires="+r.toGMTString()}document.cookie=n+"="+t+i+"; path=/"}function t(n){for(var r=document.cookie.split("; "),i,t=0;t<r.length;t++)if(i=r[t],i.indexOf(n)==0)return unescape(i.substring(n.length+1));return null}return{getCookie:t,setCookie:n,setActivityFeedCacheCookie:function(){n("_af_skipCache",!0,6e4)},isActivityFeedCacheCookieExist:function(){return!!t("_af_skipCache")},setActivityRatingCookie:function(t,i){n("_af_rating"+t,i,36e5)},getActivityRatingCookie:function(n){var i=t("_af_rating"+n);return i?i*1:0},setSentimentTagCacheCookie:function(){n("_st_skipCache",!0,3e5)},isSentimentTagCacheCookieExist:function(){return!!t("_st_skipCache")}}}(),hi=function(n){function u(){try{}catch(n){}}var t=o.prototype.isLocalStorageEnabled()?window.localStorage:null,l=(n.TTL||5)*6e4,s=nt.getCommunityUcid(),i=n.dataKey,h=i,r=i.timestampKeyPrefix||i+"Saved",c=r;return n.useUcid!==!1&&(i=h+s,r=c+s),{save:function(n){if(!t)return!1;var o=+new Date,e;try{return e=f.stringify(n),t.setItem(i,e),t.setItem(r,o),!0}catch(s){return u("Saving failed: "+s,!0),!1}},read:function(){if(!t)return null;try{var e=parseInt(t.getItem(r),10),n;return e+l<=+new Date?(this.reset(),null):(n=t.getItem(i),n?f.parse(n):null)}catch(o){u("Reading failed: "+o,!0);return}},reset:function(){if(!t)return!1;try{return t.removeItem(i),t.removeItem(r),!0}catch(n){return u("Reset failed: "+n,!0),!1}},resetAll:function(){if(!t)return!1;try{for(key in t)t.hasOwnProperty(key)&&(key.indexOf(h)===0||key.indexOf(c)===0)&&t.removeItem(key);return!0}catch(n){return u("Reset all failed: "+n,!0),!1}}}},rr=function(){function n(n,t){return(n+Math.pow(10,t)).toString().substr(1)}function t(){var t=new Date;return"["+n(t.getHours(),2)+":"+n(t.getMinutes(),2)+":"+n(t.getSeconds(),2)+"."+n(t.getMilliseconds(),3)+"]"}return{traceError:function(n){if(window.console&&window.console.error){var i=t()+" WDK4:"+n;console.error(i)}}}}(),ti=function(){function s(){}function u(){}function f(){}function h(r){var e=n(),h;e?e!=r&&(h=new ot("MtvnUserIdHelper",null,[{name:"updateMtvnCookieValue",template:i,isAction:!1,skipAkamaiBatch:!0}],{}),h.methods().updateMtvnCookieValue({mtvnUserId:e},u,f),c.setCookie(o,e,c.ONE_YEAR)):s("cookie '"+t+"' not found",!1)}function l(){var t=n(),o=c.getCookie(r),e;!t||t==o||(e=new ot("MtvnUserIdHelper",null,[{name:"updateMtvnCookieValue",template:i,isAction:!1,skipAkamaiBatch:!0}],{}),e.methods().updateMtvnCookieValue({mtvnUserId:t},u,f),c.setCookie(r,t,c.ONE_YEAR))}function n(){return c.getCookie(t)}var t="vmn_uuid",i="http://daapi.flux.com/2.0/00001/Json/{communityUcid}/Action/UpdateCookie?mtvnUserId={mtvnUserId}",o="savedvmn_uuid",r="loggedoutvmn_uuid";return{processMtvnUserId:h,processMtvnUserIdForLoggedOut:l,getMtvnCookie:n}}(),ur={overrideMethod:function(n,t,i){var r=n[t],u=i.length>2;n[t]=function(){if(u){var n=Array.prototype.slice.call(arguments);return n.unshift(r,arguments),i.apply(this,n)}return i.call(this,r,arguments)}}},y=function(){function s(){}function u(n){return o&&n||!!window.XMLHttpRequest&&_.isNull((new window.XMLHttpRequest).onprogress)}var o=window.XDomainRequest&&jQuery.ajaxTransport,t,r;return o&&jQuery.ajaxTransport(function(n){if(n.crossDomain&&n.async){n.timeout&&(n.xdrTimeout=n.timeout,delete n.timeout);var t;return{send:function(i,r){function u(n,i,u,f){t.onload=t.onerror=t.ontimeout=jQuery.noop,t=undefined,r(n,i,u,f)}t=new XDomainRequest,t.onload=function(){u(200,"OK",{text:t.responseText},"Content-Type: "+t.contentType)},t.onerror=function(){u(404,"Not Found")},t.onprogress=jQuery.noop,t.ontimeout=function(){u(0,"timeout")},t.timeout=n.xdrTimeout||Number.MAX_VALUE,t.open(n.type,n.url),t.send(n.hasContent&&n.data||null)},abort:function(){t&&(t.onerror=jQuery.noop,t.abort())}}}}),t={},r="application/x-www-form-urlencoded",{loadScript:function(r,u,f){var e="F"+ni.generate(r),o,h;r=i.addQueryParameter(r,"callback",e),t[e]=t[e]||[],t[e].push(u),t[e].length==1&&(o=n("<script>").attr({src:r,type:"text/javascript"}),rt.create(function(i,u){if(o.remove(),u&&u!=200)if(n.isFunction(f))f(i,u);else{var h="There was an error (HTTP "+u+") with request to url "+r+".";i&&(h+=" Error: "+i),s(h,!0)}else n.each(t[e],function(){this.call(null,i)});delete t[e]},e),o.bind("error",f),h=document.getElementsByTagName("HEAD")[0]||document.documentElement,h.insertBefore(o[0],h.firstChild))},invokePostRequest:function(t,i,r,f){if(u()){var e={url:t,type:"POST",data:i,crossDomain:!0,async:!f,success:r,xhrFields:{withCredentials:!0},beforeSend:function(n){n&&(n.withCredentials=!0)}};/ShareService_Share/.test(t)||(e.contentType="application/json"),n.ajax(e)}else ri.executeWebRequest("POST",t,i,r,"application/json",!0)},getRequest:function(t,i,r,e,o){u()?n.ajax({url:t,type:"Get",data:i,dataType:"json",async:!o,xhrFields:{withCredentials:!0},success:r,error:e,crossDomain:!0}):ri.executeWebRequest("GET",t,i,function(n){!!n&&_.isFunction(r)?_.isString(n)?r(f.parse(n)):r(n):_.isFunction(e)&&e(n)},!0)},postFormRequest:function(t,i,e,o,s){u(s)?n.ajax({url:t,type:"POST",data:i,success:e,contentType:r,xhrFields:{withCredentials:!0},error:o}):ri.executeWebRequest("POST",t,i,function(n){!!n&&_.isFunction(e)?_.isString(n)?e(f.parse(n)):e(n):_.isFunction(o)&&o(n)},r,!0)},setPostContentType:function(n){r=n}}}();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var v={replace:function(n,t,i){return _.isString(n)?n.replace(i||new RegExp("\\{(.*?)\\}","gm"),function(){var n=(t||{})[arguments[1]];return _.isUndefined(n)||_.isNull(n)?"":n}):null},truncate:function(n,t){return n==null||t==0?"":n.length<=t?n:n.substring(0,t)+"..."},toWbrFormat:function(n,t){var i,r;if(!_.isString("string"))return"";for(i=[],t=t||5,r=t;r<n.length;r+=t)i.push(n.substring(r-t,r));return i.length*t<n.length&&i.push(n.substring(i.length*t)),i.join("<wbr />")},isEmail:function(n){return/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9._%-]+\.[a-zA-Z0-9._: /]+$/i.test(n)},isPhone:function(n){return/^\(?([0-9]{3})\)?\s*[\. -]?\s*([0-9]{3})\s*[\. -]?\s*([0-9]{4})\s?((ext|x)\s*\.?:?\s*([0-9]+))?$/i.test(n)},camelize:function(n){return n.charAt(0).toLowerCase()+n.substr(1)},capitalize:function(n){return n.charAt(0).toUpperCase()+n.slice(1)},compactNumber:function(n){return n>999999?Math.round(n/1e6)+"m":n>999?Math.round(n/1e3)+"k":n}},ci=function(){function v(){}function y(n){var t=document.createElement("a");return t.href=n,t.hostname}function k(n){var o=y(n.originalEvent.origin),i,r,e;if(o==l&&(i=f.parse(n.originalEvent.data),i)){if(r=i.eventName.split("::")[1],r!="eventFired"&&v("received event: "+r),r=="ready"){s=t[0].contentWindow,b("setCommunityId",{id:nt.getCommunityUcid()},function(){setTimeout(d,0)});return}r=="eventFired"?(e=h[i.id],e&&(e.callback&&e.callback(i),delete h[i.id])):u.trigger("TabSync:"+r,i.eventData)}}function p(){t.length||s||(o=i.tabSyncServerUrl,l=y(o),n(window).bind("message",k),t=n("<iframe />").css({position:"absolute",left:-32767,top:-32767}),n("body").append(t),setTimeout(function(){t[0].src=o},5))}function d(){for(var n=0;n<c.length;n++)w(h[c.shift()])}function w(n){s.postMessage(f.stringify(n),o)}function g(n){r||(n.id=a,h[a++]=n,t.length&&s?w(n):(c.push(n.id),p()))}function b(t,i,r){n.isFunction(i)&&(r=i,i={});var u={eventName:t,eventData:i,callback:r};t!="eventFired"&&v("raising event: "+t),g(u)}var r,c;try{r=!(window.postMessage&&window.localStorage&&window.JSON)}catch(tt){r=!0}var o,l,t={},s=null,h={},a=0;return c=[],{trigger:b,init:p,disabled:r}}(),g=function(){function s(){e||(o=Math.random(),e=!0)}function h(){s(),f._lastTrackingImage=null;try{var n=new Image;n.onError=function(){},n.onAbort=function(){},n.src=l(),f._lastTrackingImage=n}catch(t){}}function l(){return s(),[decodeURIComponent(f._trackingUrl),"?","CMU=",n("CommunityUcid",""),"&CU=",n("ContentUcid",""),"&UU=",n("UserUcid",""),"&LUU=",n("LoggedUserUcid",""),"&PT=",n("PageTypeId","17"),"&CUR=",n("ContentUri",""),"&AU=",n("AbsoluteUri",""),"&WN=",n("WidgetName",""),"&FTG=",encodeURIComponent(o),"&rnd=",encodeURIComponent(Math.random()),"&REF=",function(){return n("ServerRefferer",null)?n("ServerRefferer"):document.referrer?encodeURIComponent(document.referrer):""}(),"&RT=",n("ReportType",""),"&RP=",n("RP",""),"&RPL=",n("RPL",""),"&RAIU=",n("RAIU",""),"&RAS=",n("RAS",""),"&AIA=",n("activityItemAuthor",""),"&AICD=",n("activityItemClickDetail",""),"&MUID=",n("MtvUuid",""),"&UMT=",n("UserMemberType",""),"&ULS=",n("UserLoginSate",""),"&UNMT=",n("UserNetworkMemberType",""),"&DEV=",g.getDeviceType(n("Device",null))].join("")}function c(){r={}}function i(n,t){r[n]=t}function n(n,t){return r[n]||r[n]===0?encodeURIComponent(r[n]):t}function a(n,t){var r=null;_.isUndefined(n.userLoginState)||(r={userLoginState:n.userLoginState,userMemberType:n.userMemberType,userNetworkMemberType:n.userNetworkMemberType}),r||t!==!0||(r=g.getLoggedInUserInfo()),r&&(i("UserLoginSate",r.userLoginState),r.userLoginState!==0&&(i("UserMemberType",r.userMemberType),i("UserNetworkMemberType",r.userNetworkMemberType)))}var r={},e,o,u={web:1,mobile:2,app:3,player:4},f={_trackingUrl:"http://t.flux.com/tracking.gif",_lastTrackingImage:null,getLoggedInUserInfo:function(){return t.user?{userLoginState:t.user.communityMember?2:1,userMemberType:t.user.communityMemberType,userNetworkMemberType:t.user.memberType}:{userLoginState:0}},trackWidget:function(n,t,r){c(),i("CommunityUcid",n),i("WidgetName",t),i("ContentUri",r),h()},trackForReporting:function(n,t){c(),i("CommunityUcid",n.communityUcid),i("ContentUri",n.contentUri),i("UserUcid",n.userUcid),i("LoggedUserUcid",n.loggedUserUcid),i("WidgetName","Reporting"),i("ReportType",n.reportType),i("RP",n.product),i("RPL",n.productLocation),i("RAIU",n.activityItemUcid),i("RAS",n.activityService),i("ContentUcid",n.contentUcid),i("activityItemAuthor",n.activityItemAuthor),i("activityItemClickDetail",n.activityItemClickDetail),i("MtvUuid",ti.getMtvnCookie()),i("Device",n.device),a(n,t),h()},isNativeApp:!1,getDeviceType:function(n){var t=this.isNativeApp===!0?u.app:Flux4.Modernizr.touch?u.mobile:u.web;return n==undefined||!u[n.toLowerCase()]||(t=u[n.toLowerCase()]),t}};return f}(),st=function(){var n=0;return{generate:function(){return"F"+(new Date).getTime()+n++}}}(),et=function(){var r={msie:function(n){return/MSIE/gi.test(n)},firefox:function(n){return/firefox/gi.test(n)},opera:function(n){return/opera/gi.test(n)},safari:function(n){return/safari/gi.test(n)||/AppleWebKit.*Mobile/.test(n)},chrome:function(n){return/chrome/gi.test(n)}},i=navigator.userAgent,t=i.match(/(?:firefox|MSIE|opera|safari|chrome)([\/\:\s][\d\.]+)?/i)||i.match(/AppleWebKit([\/\:\s][\d\.]+)?.*Mobile/i),u=t&&t[0],n={version:t&&t[1]?t[1].replace(/[\/\:\s]/,""):0,other:!0};return _.each(r,function(t,i){n[i]=t(u),n[i]&&(n.other=!1)}),{getBrowserVersion:function(){return n},isBrowserSupported:function(){return!n.msie||n.version>7}}}(),rt={create:function(n,t,i){return t=t||st.generate(),window[t]=i?function(){window[t]=undefined;try{delete window[t]}catch(i){}return n.apply(this,arguments)}:function(){window[t]=undefined;try{delete window[t]}catch(r){}var i=arguments;window.setTimeout(function(){n.apply(this,i)},0)},t}},ii=function(t){function s(n){var i=t.attr("src"),r=i.match(/:\/\/(.[^\/]+)/)[1];t.get(0).contentWindow.postMessage(f.stringify(n),"http://"+r)}function h(n){s(n.data[0]),t.unbind("load",h)}var u=null,o=!1,r="";return t.load(function(){o=!1,r=t.attr("src")}),{loadAndListen:function(s,h,c){if(this.stopListening(),n.isFunction(h)&&(r=s,r=i.addQueryParameter(r,"callbackName",rt.create(h,"F"+ni.generate(r),!0)),!c)){r=i.addQueryParameter(r,"postMessage","true");var l={};u=function(n){var t=n.origin.toLowerCase(),i;if(r.toLowerCase().indexOf(t)!=0){l[t]=(l[t]||0)+1,l[t]<=10&&e.trace("Hosts differ. Original: "+r+", message received from: "+n.origin,!0);return}try{i=f.parse(n.data)}catch(n){}i&&h(i)},window.addEventListener?window.addEventListener("message",u,!1):window.attachEvent("onmessage",u)}o=!0,t.attr("src",r)},stopListening:function(){u&&(window.addEventListener?window.removeEventListener("message",u,!1):window.detachEvent("onmessage",u),u=null)},send:function(n){t.attr("src")&&!o?s(n):t.load([n],h)}}},nt=function(){var t=n("script[widgets4Debug=true]")[0],r,u;return t||(t=n("script.widgets4Core")[0]),t||(r=document.getElementsByTagName("script"),u=new RegExp("http://k?widgets[34].flux(-dev|-staging)?.com/(Core|Loader)","i"),n.each(r,function(){if(u.test(this.src))return t=this,!1})),{getCommunityUcid:function(){return t.getAttribute("id")},getCulture:function(){return i.getQueryParameter(window.document.location.href,"culture")||t.getAttribute("culture")}}}(),fr=function(){function i(){function n(){t.community.highTrafficOptimizedMode===!0&&t._saveContextCache()}t.user||t.community.readOnlyMode||ti.processMtvnUserIdForLoggedOut();u.on({FbTlToggleChanged:function(i){!t.user||(t.user.publishToFbTimeline=i,n())},FbTlPromoOverlayDisabled:function(i){!t.user||(t.user.disableFbTimelineFirstTimeNotification=i,n())},FbTlAlertOverlayDisabled:function(i){!t.user||(t.user.disableFbTimelinePostedNotification=i,n())},UserPhoneSaved:function(){!t.user||(t.user.hasPhone=!0,n())}});loadCounter=!!c.getCookie("FluxLoadCounter"+t.community.ucid)==!1?1:Number(c.getCookie("FluxLoadCounter"+t.community.ucid))+1,c.setCookie("FluxLoadCounter"+t.community.ucid,loadCounter,c.ONE_YEAR)}function f(){if(!!t.user&&!t.community.readOnlyMode){var n=c.getCookie(savedMtvnUserIdCookieName)||t.user.loggedMtvnUserId;ti.processMtvnUserId(n)}t.user||r.removeBigDoorCookie(),r.dropMasterCookiesOnBrandsDomain(),!ct().isContextValid()}function o(){n||(n=!0,i()),f()}var n=!1;return{onContextReload:o}}(),t=function(){function t(){try{}catch(n){}}var r=new hi({dataKey:"FluxContext"}),f=nt.getCommunityUcid();return{_queue:[],_saveContextCache:function(){if(Flux4.Modernizr.touch)return!1;t("Saving context to cache");var i=n.extend(!0,{},this);return(delete i._queue,!r.save(i))?(t("Saving context to cache failed",!0),!1):!0},_resetContextCache:function(n){var i;return n?(i=r.reset(),i&&t("Flux cache reset for community "+f)):(i=r.resetAll(),i&&t("Flux cache reset for all communities")),i||t("Flux cache reset failed"),i},_readContextCache:function(){if(Flux4.Modernizr.touch)return null;t("Reading context from cache");var n=r.read();return n===undefined?(t("Reading context from cache failed",!0),null):n},reset:function(){this._resetContextCache()},loadIfEmpty:function(n){this.community?n():this._reload(n,!0,!1)},_reload:function(r,f,e){var s=!1,c=i.buildContextUrl(),h=_.bind(function(t){n.extend(this,t),u.trigger("ContextLoaded",this.copy()),n.each(this._queue,function(t,i){n.isFunction(i)&&i()}),this._queue=[],fr.onContextReload(),t.community.highTrafficOptimizedMode?t&&t.community&&t.community.readOnlyMode||s||this._saveContextCache():this._resetContextCache(!0)},this),o;this._queue.push(r),this._queue.length===1&&(f&&(o=this._readContextCache(),s=!!o),o?h(o):(this._resetContextCache(!e),t("Loading context from URL"),y.loadScript(c,h)))},reload:function(n){this._reload(n,!1,!0)},copy:function(){return this.community?{community:n.extend(!0,{},this.community),user:!this.user?null:n.extend(!0,{},this.user)}:null},hostedPage:_.isBoolean(window.FluxHostedPage)&&window.FluxHostedPage}}(),ut=function(){function f(){}function k(i){t.loadIfEmpty(function(){var t=new vt(!0).performCheck(i);n.isFunction(i.resultCallback)&&i.resultCallback(t)})}function et(){var i,e;typeof window.Flux4!="object"&&(window.Flux4={}),typeof window.Flux!="object"&&(window.Flux={}),i=window.Flux4,i.createWidget=ut.createWidget,i.getWidgetApi=ut.getWidgetApi,i.signIn=function(n){var i=arguments;t.loadIfEmpty(function(){i.length>1?(i=[].slice.apply(i),new s(i[0]).signIn.apply(null,i.slice(1))):new s(n.settings).signIn(n.clickEvent,n.title,n)})},i.signUp=function(n){var i=arguments;t.loadIfEmpty(function(){i.length>1?(i=[].slice.apply(i),new s(i[0]).signUp.apply(null,i.slice(1))):new s(n.settings).signUp(n.clickEvent,n.title,n)})},i.signOut=function(n,i){t.loadIfEmpty(function(){(new s).signOut(n,i)})},i.performRoadBlockerCheck=function(n){n=n||{},n.reloadContext&&t.community?r.authenticationChanged(function(){k(n)}):k(n)},i.thouToFluxSignUp=function(n,i,r,u){t.loadIfEmpty(function(){new s(r).thouToFluxSignUp(n,i,u)})},i.sutSignUp=function(n,i,r){t.loadIfEmpty(function(){new s(i).sutSignUp(n,r)})},i.getContext=function(i){var r=t.copy(),f;if(n.isFunction(i)){if(!!r){i(r);return}f=!1;u.on("ContextLoaded",function(n){f||(f=!0,i(n))})}else return r},i.loadContext=function(i){t.loadIfEmpty(function(){n.isFunction(i)&&i(t.copy())})},i.showInterimForm=function(n,i){t.loadIfEmpty(function(){new s(n).showInterimForm(i)})},i.addEventListener=function(){u.on.apply(u,arguments)},i.removeEventListener=function(){u.off.apply(u,arguments)},i.raiseEvent=function(){u.trigger.apply(u,arguments)},i.showOverlay=function(n){t.loadIfEmpty(function(){n&&a.showOverlay("authentication",n)})},i.confirm=function(n){t.loadIfEmpty(function(){n&&a.confirm("authentication",n)})},i.openFeedbackOverlay=function(){t.loadIfEmpty(function(){h.show("deeplink",{size:{width:530,height:560},pageUrl:t.community.feedbackUrl})})},i.openReportAbuse=function(n,i){if(!n){f("ReportAbuse deep link: obligatory parameter 'itemId' is missed",!0);return}if(!i){f("ReportAbuse deep link: obligatory parameter 'type' is missed",!0);return}var r="&itemId="+n+"&flagItem="+i;i.toLowerCase()=="content"&&(r+="&contentUri="+n),t.loadIfEmpty(function(){h.show("deeplink",{size:{width:530,height:560},pageUrl:t.community.reportAbuseUrl+r})})},i.syncExternalAuth=function(n,i,r,u,f){t.loadIfEmpty(function(){lr.login(t.community.externalAuthUrl+"?userid="+n+"&ts="+i+"&tsOfUpdate="+r+"&signature="+u+"&postMessage=true",f)})},i.verifyEmail=function(){t.loadIfEmpty(function(){(new s).verifyEmail()})},i.passwordReset=function(){t.loadIfEmpty(function(){(new s).passwordReset()})},i.mergeTwitterUserToFlux=function(){t.loadIfEmpty(function(){(new s).mergeTwitterUserToFlux()})},i.changeGlobalContentId=function(n){u.trigger("GlobalContentIdChanged",n)},e=_.extend(window.Flux||{},i)}function ot(){f("Widgets list:"),b.widgets.names={},_.each(b.widgets,function(n){b.widgets.names[n.name]=n.name,f(n.name+" -> "+n.url)}),f("Controls list:"),b.controls.names={},_.each(b.controls,function(n){b.controls.names[n.name]=n.name,f(n.name+" -> "+n.url)})}function st(){var t,r;document.createStyleSheet?(t=document.createStyleSheet(i.commonCssUrl,0),r=t.ownerNode||t.owningElement):(r=t=n("<link>").attr({type:"text/css",rel:"stylesheet",href:i.commonCssUrl}),n(n("head")[0]||n("body")[0]||document.documentElement).prepend(t)),n("<!--[if IE 9]><link rel='stylesheet' type='text/css' href='"+i.commonCssIE9Url+"'/><![endif]-->").insertAfter(r),f("Common css has been added")}function d(t){if(!t.apiOnly&&!t._inheritOnly&&_.isUndefined(t.container)&&_.isUndefined(t.containerId)&&!y){var i="Flux4Widget_"+v;v++,document.write('<div id="'+i+'"><\/div>'),t.container=n("#"+i).removeAttr("id")}}function nt(t,i,r,u,e,o,s){if(!u){f(o,!0);return}var h=null;i.container&&(h=n(i.container),delete i.container),i.containerId&&(h=n("#"+i.containerId),delete i.containerId),er.get(t,u,e,function(n){n.controlData=s,w.invokeWidget(h,t,n,i,r)})}function ht(n,t){if(w.isSingletonWidget(n)){var i=w.tryGetWidgetByName(n);if(!!i)return f('"'+n+'" is singleton, will be reused'),t&&t(i.getExternalInterface()),!0}return!1}function tt(n,r,u){c?t.loadIfEmpty(function(){lt.loadIfNeed(function(){var f=ui.getWidgetInfo(n),s='Widget "'+n+'" is not allowed. Creation is failed',o,t,e;f&&(e=i.buildWidgetUrl(f),t=i.replaceWidgetVersion(e,r._version),t==e&&(o=f.dependencies),Flux4.Modernizr.touch&&(t=i.addQueryParameter(t,"platform","mobile"))),nt(n,r,u,t,o,s)})}):l.push(arguments)}function it(t){var e=t[0],r=null,u=null,i;switch(t.length){case 1:f("createWidget called with no settings");break;case 2:i=t[1],n.isFunction(i)?u=i:r=i;break;case 3:r=t[1],u=t[2];break;default:f("Incorrect args count for createWidget",!0);return}return{name:e,settings:r||{},callback:u}}function rt(n){d(n.settings),ht(n.name,n.callback)||window.setTimeout(function(){tt(n.name,n.settings,n.callback)},30)}function ct(n){var i,r,t;f('Create widget "'+n+'"...'),i={QuickMenu:"UserBar",Comments:"Comments",ContentAction:"ContentAction"};for(r in i)r==n&&(n=i[r]);(t=it(Array.prototype.slice.call(arguments)),t)&&(t.name=t.name.replace(/#.+/,""),t.settings._version=n.replace(/\w+#?/,""),rt(t))}function at(n){f('Get API for widget "'+n+'"...');var t=it(Array.prototype.slice.call(arguments));t&&(t.settings.apiOnly=!0,rt(t))}function yt(){o={}}var c=!1,l=[],v=1,y=!1,p=!1,o={};return{initialize:function(h,a,v,w){(i.getQueryParameter(window.location.href,"closeWindow")=="true"&&window.close(),p!==!0)&&(p=!0,e.enabled=h,ft.loadFacebookJDK=v,g.isNativeApp=w,f("Register Flux4 object..."),et(),Flux4.loadModernizr(),n(function(){f("DOM is ready"),y=!0,a&&st(),(new s).checkAuthRedirectParams(),b.load(function(){ot(),c=!0,u.trigger("CoreInitialized"),n.each(l,function(){tt.apply(null,this)})}),ci.init();u.on("TabSync:synchronizeAuthCookie",function(n){var i=n.cookie,c;if(!_.isEqual(i,o)){o=i;var u=r.getUserAuthParams(),f=!u.loggedIn&&i.loggedIn,e=u.loggedIn&&!i.loggedIn,s=i.globalMemberType!=u.globalMemberType,h=i.isMember!=u.isMember;if(f||e||s||i.isMember!=u.isMember||i.initialConnection!=u.initialConnection||i.hasRoadblock!=u.hasRoadblock){if(!f&&!e&&n.communityId!=t.community.ucid&&!s)return;(f||e||h)&&(c={widgetName:"auth",eventName:f?"SignIn":e?"SignOut":h?"Join":""}),r.authenticationChanged(null,!0,c,f)}}})}))},createWidget:ct,getWidgetApi:at,createControl:function(n,t,r,u){f('Create control "'+n+'" with version '+t.version+"..."),d(r);var e=i.buildControlUrl(n,t.version),o='Control "'+n+'" is not allowed. Creation is failed';nt(n,r,u,e,null,o,t)},setLastAuthCookie:yt}}(),ri=new function(){function n(){}function s(){return document.getElementById(u)}function h(n){for(var r=n.substring(1).split("|"),i=[],t=0;t<r.length;t++)i[i.length]=parseInt(r[t],16);return String.fromCharCode.apply(String,i)}function c(n){return eval('"'+n.replace(/\|/g,"\\u")+'"')}function l(n){return'\v'=="v"?c(n):h(n)}function a(t,i){return rt.create(function(r){window.setTimeout(function(){if(n("Received data from "+t),r){var u=(new Date).getTime();r=l(r),n("Data decoded in "+((new Date).getTime()-u)+" ms")}i.call(null,r)},0)})}function v(i){f?i():(t.push(i),o||(o=!0,n("Initialization..."),y(function(){n("Initialization complete"),f=!0;for(var i=0;i<t.length;i++)t[i]();t=null})))}function y(n){function e(){++s==2&&n()}var s=0,o=st.generate(),t=document.createElement("div"),f;t.setAttribute("id",o),t.style.height="0",t.style.width="0",f=document.getElementsByTagName("body")[0],f.insertBefore(t,f.firstChild),r=st.generate(),u=gi.embed(i.coreFlashUrl,o,"0","0",{onload:rt.create(e),executeWebRequest:r},{allowscriptaccess:"always"}),e()}var u=null,r,f=!1,o=!1,t=[];return{executeWebRequest:function(n,t,i,u,f,e){v(function(){s()[r](n,t,i,a(t,u),f,e)})}}},lt=function(){function e(t){r={},n.each(t,function(n,t){r[t.name.toLowerCase().replace("widgets4,","")]=t.strings})}function f(){var n=nt.getCulture();return n||(n=!t.user||!t.user.localization||!t.user.localization.cultureName?t.community.localization.cultureName:t.user.localization.cultureName),n}var r,u;return{loadIfNeed:function(n){var t=f(),o=u!=t,s;o&&(r={}),t.toLowerCase()!="en-us"&&(!u||o)?(s=i.buildLocalizedResourcesUrl(t),y.loadScript(s,function(i){u=t,e(i),n()})):(u=t,n())},merge:function(t,i,u){var f=r?r[t.toLowerCase()]:null;return n.extend({},i,f||{},u)},getCurrentCulture:function(){return f()}}}(),i=function(){function s(n,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r="[\\?&]"+t+"=([^&#]*)",u=new RegExp(r),i=u.exec(n);return i?i[1]:""}function it(n,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r="[\\#&]"+t+"=([^&#]*)",u=new RegExp(r),i=u.exec(n);return i?i[1]:""}function f(n,t){var f=s(n,t),u=t+"="+f,e=u.length,r=n.indexOf(u),i;return r<0?n:(i=r+e,n[r-1]!="?"||i==n.length?r--:i++,i=Math.min(i,n.length),n.substring(0,r)+""+n.substring(i))}function o(n,t,i){var r=n.split("#"),u;return!r[1]||(n=r[0]),n=f(n,t),u=n.indexOf("?"),u==-1?n+="?":u<n.length-1&&(n+="&"),n=n+t+"="+i,!r[1]||(n=n+"#"+r[1]),n}function rt(n,t,i){return n=n.replace(/#.*$/,""),n=f(n,t),n+="#",n+t+"="+i}function b(n){return!e.enabled||n.toLowerCase().indexOf((c.toLowerCase()+"="+l).toLowerCase())!=-1?n:o(n,c,l)}function ut(n){var t=n.match(k);return t&&t[1]}var c="enableWidgetsDebug",l="true",a="http://cus.flux.com/api/widgetsService/widgetList?communityUcid={communityUcid}",d="http://daapiak.flux.com/2.0/00001/json/{communityUcid}/feeds/widgets4Context",u="s.fluxstatic.com/widgets4",tt="http://daapiak.flux.com/2.0/00001/json/{communityUcid}/feeds/LocalizedResources?culture={culture}&resourceGroupId=50",y=a.replace(/^.+\/cus(.flux.*.com\/).+$/,"$1"),p=".flux-dev.com/",r=s(location.search,"enableDevEnv"),w,k,h;return r&&(r=r.split(",")),w=/((?!\?)[\w]+=&|[&?][\w]+=$)/g,k=/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i,h="http://"+u+"/CSS/common.css?v=30",{commonCssUrl:h,commonCssIE9Url:h.replace(".css","-ie9.css"),coreFlashUrl:"http://"+u+"/Flash/Core/Core.swf",clipboardFlashUrl:"http://"+u+"/Flash/Clipboard/Clipboard.swf",zeroClipboardFlashUrl:"http://"+u+"/Flash/ZeroClipboard/ZeroClipboard10.swf",tabSyncServerUrl:"http://"+u+"/TabSync/Server.min.html",facebookSignUpUrlTemplate:"http://daapi.flux.com/2.0/00001/Json/{communityUcid}/Action/FacebookSignUp2",logoutUrlTemplate:"http://daapi.flux.com/2.0/00001/Json/{communityUcid}/Action/Logout",buildWidgetUrl:function(n){if(n)return r&&_.contains(r,n.name)&&(n.url=n.url.replace(y,p),n.url=f(f(n.url,"communityUcid"),"customCss")),b(n.url)},replaceWidgetVersion:function(n,t){return t?n.replace(/version\=\d+/,"version="+t):n},buildControlUrl:function(n,t){var i=ui.getControlInfo(n);if(i)return b(i.url.replace("{version}",t||""))},buildWidgetListUrl:function(){return a.replace("{communityUcid}",nt.getCommunityUcid())},buildContextUrl:function(){var n="";return typeof FluxAuthPresentation!="undefined"&&(n="&authPresentation="+FluxAuthPresentation),d.replace("{communityUcid}",nt.getCommunityUcid())+n},buildDaapiUrl:function(t){var e,f,u;if(t.params)for(e in t.params)f=t.params[e],_.isString(f)&&f.trim()&&(t.params[e]=encodeURIComponent(f));return u=v.replace(t.template,n.extend({communityUcid:nt.getCommunityUcid()},t.params||{})),t.bypassCache&&(u=o(u,"skipCache","true")),t.product&&(u=i.addQueryParameter(u,"product",t.product)),t.productLocation&&(u=i.addQueryParameter(u,"productLocation",t.productLocation)),t.device&&(u=i.addQueryParameter(u,"device",t.device)),u=u.replace(w,""),r&&(u=u.replace(p,y)),u},addQueryParameter:o,addAnchorParameter:rt,getDomainName:ut,getQueryParameter:s,getAnchorParameter:it,removeQueryParameter:f,setHash:function(n,t){var r=new RegExp("#([^\\?&]*)"),i=r.exec(n);return i&&(n=n.replace("#"+i[1],"")),n+"#"+t},buildLocalizedResourcesUrl:function(n){if(t.community)return v.replace(tt,{communityUcid:nt.getCommunityUcid(),culture:n})},addCultureQueryParameter:function(n){var t=nt.getCulture();return t?o(n,"culture",t):n},getProductLocationName:function(n){return(n||"").toLowerCase()},addDeviceQueryParameter:function(n){return o(n,"device",g.getDeviceType())},getThumbnailUrl:function(n,t){return n&&n.CustomTemplate?n.CustomTemplate.replace("(THUMBNAIL_SIZE)",n[t]):""}}}(),er=function(){function s(n,t){r[n]=t}function u(i,r,u,f){var e=(r.name+":"+r.version).toLowerCase();t[i]={id:e,callbacks:f&&n.isFunction(f)?[f]:[]},u&&u.push(e)}function f(t,r,o){t&&(t.widgets&&n.each(t.widgets,function(n,t){var h=ui.getWidgetInfo(t.name),s=i.buildWidgetUrl(h),c,l;h&&s&&(c=i.getQueryParameter(s,"version"),!t.version||t.version==c?t.version=c:(s=i.replaceWidgetVersion(s,t.version),l=!0),Flux4.Modernizr.touch&&(s=i.addQueryParameter(s,"platform","mobile")),e(s)&&(u(s,t,r),l||f(h.dependencies,r,o)))}),t.controls&&n.each(t.controls,function(n,t){var r=i.buildControlUrl(t.name,t.version);r&&e(r)&&u(r,t,o)}))}function e(n){return!r[n]&&!t[n]}function h(n,t){var r=[],u=[],i=n;return t&&(f(t,r,u),i=o(i,"widgets",r),i=o(i,"controls",u)),i}function o(n,t,r){var u=r.join(",");return!u?n:i.addQueryParameter(n,t,u)}function c(i){var u,o,r,f,e;for(u in i){o=u.toLowerCase();for(r in t)if(f=t[r],f.id==o){e=i[u],s(r,e),delete t[r],n.each(f.callbacks,function(n,t){t(e)});break}}}var r={},t={};return{get:function(n,f,e,o){var s=r[f],l=t[f],a;s?o(s):l?l.callbacks.push(o):(u(f,{name:n,version:i.getQueryParameter(f,"version")},null,o),a=h(f,e),y.loadScript(a,c))}}}(),b=function(){function n(){try{}catch(n){}}var t=new hi({dataKey:"FluxWidgetList",TTL:60});return{load:function(r){var f=!1,s=i.buildWidgetListUrl(),o=function(i){n("Done"),b=i,f||(t.save(i),n("Saved to cache")),r()},u;n("Load data..."),u=e.enabled?null:t.read(),u?(f=!0,n("Read from cache"),o(u)):(n("Loading from URL"),y.loadScript(s,o))}}}(),ui=function(){var t=function(t,i){var r=i.toLowerCase();return n.grep(t,function(n){return n.name.toLowerCase()==r})[0]};return{getWidgetInfo:function(n){return t(b.widgets,n)},getControlInfo:function(n){return t(b.controls,n)}}}(),ot=function(t,r,u,o){function s(){var n="DAAPI["+t+"]:";r&&(n+="Instance["+r+"]:")}function a(t,i,r){return!n.isFunction(i)||!n.isFunction(t)?(s('onComplete or onError delegate is not specified. Request with template "'+r+'" has been skipped',!0),!1):!0}function v(n,t,i,r){n&&n.readOnly?(s("ReadOnly mode detected",!0),i(new p(ht.readOnlyMode,n))):n&&n.d&&!_.isUndefined(n.d.StatusCode)&&n.d.StatusCode?(s("Widgets web service call returned error: code "+n.d.StatusCode+", message: "+n.d.ErrorText,!0),i(new p("WebService#"+n.d.StatusCode,n))):(!!r&&_.isFunction(r)&&r(n),t(n))}function w(n,t){return _.isUndefined(t)?!1:t&&!_.isString(n[t])?(s('Parameter "'+t+'" is configured as skip cache parameter, but its value is not string or absent',!0),!1):!0}function b(n,i){return n[i]+"_"+t}function k(n){return n+"Completed"}function tt(n,t,r){return function(){var nt=arguments.callee,tt=arguments[arguments.length-2],k=arguments[arguments.length-1],e,u,o,d;if(a(tt,k,n)){e=!1,_.isBoolean(arguments[arguments.length-3])?(e=arguments[arguments.length-3],u=arguments[arguments.length-4],o=!!arguments[arguments.length-5],u.skipLocalCache&&(d=u.skipLocalCache,delete u.skipLocalCache)):(u=arguments[arguments.length-3],o=!!arguments[arguments.length-4],w(u,t)&&(e=l.containsKey(b(u,t)),e&&s("Skip cache param has been detected: name="+t+" value="+u[t]))),n.indexOf("FindActivities2")!==-1&&s(f.stringify(rt(u)));var g=Boolean(i.getQueryParameter(n,"skipCache")),h=function(t){c(nt,u,t),v(t,tt,k,function(t){g||d||li.set(n,u,t)})},it=function(){var t=i.buildDaapiUrl({template:n,params:u,bypassCache:e}),f=function(n,i){c(nt,u,n);var r;switch(i){case 400:r="There was an error (HTTP 400) with daapi request "+t+". Most likely that url is malformed. Check that you provided all information in it: community UCID, content UCID (if applicable), sorting/filtering options.";break;case 500:r="There was an error (HTTP 500) with request to url "+t+". There might be some server side troubles. Please check url again and if you continue to experience this problem - report this URL to Social Media support team.";break;default:r="There was an error (HTTP "+i+") with request to url "+t+"."}n&&(r+=" Error: "+n),s(r,!0),k(new p(ht.systemError,n))};s("GET "+(o?"sync ":"")+t),r=!i.getQueryParameter(t,"cacheDuration")?r:!0,o?y.getRequest(t,{},h,function(n,t){f(t,n.status)},o):r?y.loadScript(t,h,f):or.enqueueRequest(t,h,f)};!!e||g||d?it(g):li.get(n,u,h,it)}}}function it(t,r){return function(){var tt=arguments.callee,d=arguments[arguments.length-2],e=arguments[arguments.length-1],h,k;if(a(d,e,t)){var u=arguments[arguments.length-3],nt=!!arguments[arguments.length-4],it=u.device;delete u.device,h=i.buildDaapiUrl({template:t,params:n.extend({},u),product:(o.settings||{}).product,productLocation:(o.settings||{}).productLocation,device:g.getDeviceType(it)}),k=f.stringify(u||{}),s("POST "+(nt?"sync ":"")+h),y.invokePostRequest(h,k,function(t){if(c(tt,k,t),_.isString(t)||n.isPlainObject(t)){var i=function(n){n.Status==1&&w(u,r)&&(l.add(b(u,r)),s("Skip cache param has been added: value="+u[r])),d(n)};v(_.isString(t)?f.parse(t):t,i,e)}else s("Postback error has occured! data: "+t,!0),e(new p(ht.unexpected))},nt)}}}function rt(n){var t={dashboardShowAllCommunities:!1,dashboardShowOnlyFollowFeed:!1,dashboardIsUserBar:!1,cultureLcid:0,includeChildren:!1,includeGuestActivities:!1,showParentAddedChild:!1,popularActivitiesCount:0,sortByTopCounter:!1};return _.each(n,function(i,r){t[r]==i&&delete n[r]}),n}var d=!1,l=new gt("WDK4SkipDaapiCacheFlags"),h={},nt=function(n){return _.detect(_.functions(h),function(t){return h[t]==n})},c=_.bind(function(t,i,r){var u=k(nt(t));o&&n.isFunction(o.callExternalInterface)&&o.callExternalInterface(u,i,r)},this);n.each(u,function(n,t){var i=d||!!t.skipAkamaiBatch||!Flux4.Modernizr.touch;h[t.name]=t.isAction?it(t.template,t.skipCacheParam):tt(t.template,t.skipCacheParam,i)}),this.initEvents=function(t){var i=[];return this.externalInterface=t,n.each(_.functions(h),function(n,r){var u=k(r);t[u]=function(){},i.push(u)}),i},this.methods=function(){return h}},or=function(){function f(){}function s(){var i,e;t=null,i=r,r=[],e={},n.each(i,function(){e[this.name]=this.url}),y.setPostContentType("application/x-www-form-urlencoded"),y.postFormRequest(u,n.param(e),function(t){n.each(i,function(){var i=t[this.name];i&&!i.akamaiError?n.isFunction(this.onComplete)&&this.onComplete(i):y.loadScript(this.url,this.onComplete,this.onError)})},function(t){f("There was an error (HTTP "+t.status+") with request to url "+u+"."),n.each(i,function(){y.loadScript(this.url,this.onComplete,this.onError)})},!0)}var o=500,u="http://daapiak.flux.com/combine.esi",t=null,r=[];return{enqueueRequest:function(u,e,h){if(!t||(clearTimeout(t),t=null),!i.getQueryParameter(u,"callback")){var c=ni.generate(u);r.push({name:c,url:u,onComplete:e,onError:h})}else f('Url should not have a "callback" parameter.',!0),n.isFunction(h)&&h("",400);t=setTimeout(s,o)}}}(),li=function(){function t(n,t){var i=[],r,u;for(r in t)u=r+"="+(t[r]!=null?t[r]:""),i.push(u);return i=i.sort(),n+"_"+f.stringify(i)}var n={};return{get:function(i,r,u,f){var e=t(i,r);return n[e]?u(n[e]):f(),n[e]},set:function(i,r,u){var f=t(i,r);n[f]=u},reset:function(i,r){n[t(i,r)]=undefined}}}(),p=function(n,t){this.id=n,this.description=t},ht=function(){var t={};return n.each(["unexpected","unknown","invalidParameters","systemError","notFound","forbidden","notLoggedIn","ratingUnsupportedSystem","ratingIllegal","ratingIllegalSystem","invalidCaptcha","readOnlyMode","faceBookAccountAlreadyLinkedToAnother","accountNotFound","incorrectPassword"],function(n,i){t[i]=i}),t}(),sr=function(i){function u(){Flux4.Modernizr.touch&&t.user&&t.user.communityMember&&(r.readyToUse()||r.readyToUse(!0))}var r=at.get();return{save:function(){r.readyToUse(!1),r.add(i,n.makeArray(arguments))},tryExecute:function(n,t){if(u(),r.readyToUse()){var f=r.getValue(i);f&&(t&&f.push.apply(f,t),n.apply(null,f),r.removeKey(i))}},getActionParams:function(){return r}}},at=function(){var n,t="readyToUse";return{get:function(){return n||(n=new gt("PostAuthActionParams",3e5),n.readyToUse=function(i){if(typeof i=="undefined")return n.getValue(t);i?n.add(t,i):n.clear()}),n}}}(),vt=function(i,r){function f(){}function o(){i&&setTimeout(function(){u.trigger("roadBlock",{widgetName:r},t.user)},1)}function h(i){return n.isFunction(i)&&t.community.readOnlyMode?(i(new p(ht.readOnlyMode)),o(),!0):!1}return{needsRoadblocking:function(n){var i;return t.user?(n&&t.user.roadBlocker.FRD||(i=t.user.roadBlocker.redirectUrl),i)?!0:!1:!0},performCheck:function(n){var u,i;return(typeof n.fromSignIn=="string"&&(n.title=n.fromSignIn,n.fromSignIn=!1),typeof n.eventName=="boolean"&&(n.silent=n.eventName),typeof n.title=="boolean"&&(n.silent=n.title),u=new s(null,r),!t.user)?h(n.readOnlyModeHandler)?!1:(u.signIn(null,n.title,{productLocation:n.productLocation,useOriginalRedirect:n.useOriginalRedirect||!1,blockedAction:n.blockedAction}),o(),f("User is not logged in"),!1):(f("Perform check, checkFrdOnly = "+!!n.checkFrdOnly),n.eventName=!n.eventName?"Join":n.eventName,n.checkFrdOnly&&t.user.roadBlocker.FRD||(i=t.user.roadBlocker.redirectUrl),i)?h(n.readOnlyModeHandler)?!1:n.silent?!1:(u.isOverlayMode()?(u.showInterimForm(null,n.fromSignIn,n.title,n.eventName,n.productLocation,n.blockedAction),o()):(i=i.replace("(returnPath)",encodeURIComponent(window.location.href)),f("Perform redirect to "+i),window.location.href=i),!1):(f("Action allowed"),f("Bypass check"),!0)},userCanPostComment:function(n){if(!t.user)f("User is not logged in, bypass check");else{if(f("Can user post a comment?"),t.user.isSystemBanned||t.user.isCommunityBanned)return f("User is banned"),!1;if(t.user.roadBlocker.userCanPostComment)f("Action allowed");else return f("User can't post a comment"),this.performCheck({checkFrdOnly:!1,checkFrdOnly:n}),!1}return!0}}},fi=function(){function b(n){var t=n.match(/\}/g);return t?t.length:0}function h(t){var i=document.createElement("style"),r;return i.type="text/css",i.className="flux4Style",i.styleSheet&&(i.styleSheet.cssText=""),r=n(n("head")[0]||document.body||document.documentElement),t?r.append(i):r.prepend(i),i}function c(n,t){n.styleSheet?n.styleSheet.cssText=t:n.innerHTML=t}function e(n){var s="clientWidth",h=document.documentElement[s],c=document.compatMode==="CSS1Compat"&&h||document.body[s]||h,v=(new Date).getTime(),r,i,t,u,o;if(n&&f&&v-f<a){clearTimeout(l),l=setTimeout(e,a);return}for(f=v,r=document.getElementsByTagName("style"),i=0;i<r.length;i++)(t=r[i].mediaQuery,t)&&(u=t.replace(/^.*max-width\s*:\s*(\d+).*$/m,"$1"),o=t.replace(/^.*min-width\s*:\s*(\d+).*$/m,"$1"),r[i].disabled=u!=t&&c<=u||o!=t&&c>=o?!1:!0)}function v(){e(!0)}var y=500,o=[],r=null,t="",p="\n",u=0,s=et.getBrowserVersion(),w=s.msie&&+s.version<=9,i,l,a=30,f;return{embedStyleSheet:function(n,f){var s,a,v,k,l;if(!_.include(o,n)){o.push(n),i={},f&&(n=this.matchMedia(n,f.breakpoint||f.breakpoints,f._breakpoints),delete f._breakpoints),s=!r,w?(t+=p,a=b(n),u+a>y&&(s=!0,t="",u=0),u+=a,t+=n):(s=!0,t=n),s&&(r=h()),c(r,t),v=!1;for(k in i)v=!0,l=h(!0),l.disabled=!0,l.mediaQuery=k,c(l,i[k]);v&&e()}},matchMedia:function(n,t,r){var e,u,f,o,s;if(n.indexOf("@media")>=0){for(t=_.isArray(t)?t:[t],r=_.isArray(r)?r:[r],e="@media\\s*\\(\\s*(min|max)-width\\s*:\\s*{0}\\s*px\\)",u=0;u<r.length;u++)for(f=-1;f<2;f++)o=r[u]+f,s=t[u]+f,n=n.replace(new RegExp(e.replace(/\{0\}/,o),"g"),"@media($1-width:"+s+"px)");Flux4.Modernizr.mediaquery||(n=n.replace(/@media\s+-sass-debug-info\s*\{([\S\s]+?})[^{]*?}/g,""),n=n.replace(/@media\s*\(([^)]+)\)\s*\{([\S\s]+?})[^{]*?}/g,function(n,t,r){return i[t]=r,""}),window.addEventListener?window.addEventListener("resize",v,!1):window.attachEvent&&window.attachEvent("onresize",v))}return n}}}(),tt=function(){function r(n){return/(Account|Auth\/4100)\/MobileUserProfile/.test(n)}return{getMobileUserProfileUrl:function(n,r){var u=t.community.userProfileUrl.replace("ProfileAccount/Edit","Auth/4100/MobileUserProfile/Edit"),f;return r?u=i.addQueryParameter(u,"doNotShowBackButton",!0):(f=i.getQueryParameter(location.href,"redirectUrl"),f||location.href.indexOf(u)!=0||(f=location.href,f=encodeURIComponent(f)),u=i.addQueryParameter(u,"redirectUrl",f)),u=tt.getUserProfileUrl(u,n),i.addQueryParameter(u,"touch","true")},getUserProfileUrl:function(n,t,r,u){r&&(n=i.addQueryParameter(n,"userProfileTabId",r)),u&&(n=i.addQueryParameter(n,"userProfileTabParam",u));var f=n.indexOf("#")!=-1&&n.indexOf("#openUserProfile")==-1;return f?i.addQueryParameter(n,"openUserProfile",t):i.addAnchorParameter(n,"openUserProfile",t)},openMobileUserProfile:function(u,e,o,s,h){function k(n){return window.open(n,"_blank")}var l,p,a,b,v,y,c;h=h||{initialSettings:{},settings:{}},a=function(n){n.origin.indexOf(i.getDomainName(t.community.authentication.accountDeactivatedUrl))==-1||n.data!=="deactivated"||!l||(p=setInterval(b,2e3))},b=function(){(!l||l.closed==undefined||l.closed)&&(clearInterval(p),w.reloadWidgets())};var d=function(){var t,n;return r(location.href)?encodeURIComponent(location.href):(t=i.getQueryParameter(location.href,"redirectUrl"),!!t)?t:h.settings._hostedPage?encodeURIComponent(location.href):(n=i.removeQueryParameter(location.href,"openUserProfile"),n=i.removeQueryParameter(n,"userProfileTabId"),n=i.removeQueryParameter(n,"userProfileTabParam"),encodeURIComponent(n))},nt=function(n,t){c=i.removeQueryParameter(c,"doNotShowBackButton"),c=n!=t?i.addQueryParameter(c,"doNotShowBackButton",!1):i.addQueryParameter(c,"doNotShowBackButton",!0)},g=function(t){return t.tabs&&_.each(t.tabs,function(t){t.id=="Custom"&&!t.markupHtml&&t.markupPlaceholderId&&(t.markupHtml=n("#"+t.markupPlaceholderId).html(),delete t.markupPlaceholderId)}),delete t._version,encodeURIComponent(window.btoa(f.stringify(t)))};if(o&&(o=o.toLowerCase(),o=="social"?(o="account",v="thirdPartyConnections"):(s&&typeof s=="string"&&(y=f.parse(decodeURIComponent(s))),v=y&&y.subTabId),o=="account"&&t.user&&t.user.ucid==u)){if(c=tt.getMobileAccountUrl(v),c=i.addQueryParameter(c,"redirectUrl",d()),h.settings._hostedPage){if(e)return location.href=c,!1}else return e?(c=i.addQueryParameter(c,"doNotShowBackButton",!0),window.addEventListener("message",a,!1),l=k(c)):location.href=c,!1;return!1}if(c=tt.getMobileUserProfileUrl(u,!r(location.href)),c=tt.getUserProfileUrl(c,u,o,s),c=i.addQueryParameter(c.replace(/#openUserProfile=.+$/,""),"openUserProfile",u),c=i.addQueryParameter(c,"userProfileSettings",g(h.initialSettings)),c=i.addQueryParameter(c,"redirectUrl",d()),h.settings._hostedPage){if(e)return location.href=c,!1}else return e?(window.addEventListener("message",a,!1),l=k(c)):location.href=c,!1;return!0},getMobileAccountUrl:function(n){var r;return n&&(r=t.user[n+"OverlayUrl"]),r||(r=t.community.userProfileUrl),r=i.addQueryParameter(r,"product","Profile"),r=i.addQueryParameter(r,"productLocation","ProfileOverlay"),i.addQueryParameter(r,"touch","true")},userProfileMyUpdatesEnabled:function(t){if(n.isFunction(t)){var i=w.tryGetWidgetByName("UserProfile");if(!i)u.on("WidgetLoaded:userprofile",function(){bt.prototype.userProfileMyUpdatesEnabled(t)});else t(i.getExternalInterface().profileMyUpdatesEnabled())}},openUserProfile:function(t,i,r,f,o){!t;var s=w.tryGetWidgetByName("UserProfile");if(!s)if(Flux4.Modernizr.touch)kt.prototype.openMobileUserProfile(t,i,f,o);else if(w.isLoadingSingleton("userprofile"))u.on("WidgetLoaded:userprofile",function(){s=w.tryGetWidgetByName("UserProfile"),s.getExternalInterface().openProfile(t,i,f,o)});else ut.createWidget("UserProfile",{container:n("<div>")},function(n){n.openProfile(t,i,f,o)});else s.getExternalInterface().openProfile(t,i,f,o)}}}(),yt=function(t,i,r,u){var s,e,o,h;this._widgetName=i,this._container=t,this._settings=u,this._defaultSettings=null,this._controls=r.controls,this._daapiUrls=r.daapiUrls,this._markup=r.markup,this._strings=r.strings,this._style=r.style,this._controlData=r.controlData,this._context={},this._updateContext(),this._renderCompleteList=[],this._instanceId=++yt.instanceCounter,this._clearContainer=!0,this._createThisProxy();try{this._trace("Create..."),s=new ot(this._widgetName,this._instanceId,this._daapiUrls,this.thisProxy),e=new oi(this._widgetName,r,s),d.apply(this._widgetName,this.thisProxy,e),this._instance=new r.constructor(n,this.thisProxy,e,this._context,n.extend({},ht),f),o=this.thisProxy.require("MainView"),typeof o=="function"&&(this._mainView=new o,this._instance.externalInterface=this._mainView.externalInterface),this._instance.externalInterface||(this._instance.externalInterface={}),h=e.initEvents(this._instance.externalInterface),this._controlData&&(this._instance.externalInterface.getCoreEventNames=function(){return h}),this._trace("Done")}catch(c){this._trace(c+". Creation is failed",!0),this._isError=!0}};yt.instanceCounter=0,yt.prototype={render:function(t,i){if(i&&(this._updateContext(),this._updateThisProxy()),!_.isFunction(this._instance.render)&&!this._mainView){_.isFunction(t)&&t();return}if(!this._container){this._onRenderError("containerId or container is not specified",t);return}if(!this._container.length){this._onRenderError("container is not found",t);return}try{this._trace("Render...");var r=!i||this._clearContainer?n("<div />"):this._container.children(":first"),u=_.bind(function(){this._container&&(!i||this._clearContainer)&&this._container.empty().append(r),_.isFunction(t)&&t(),n.each(this._renderCompleteList,function(n,t){t()}),this._renderCompleteList=[]},this);this._mainView?(this._clearContainer=!1,i?this._mainView.reload():(this._mainView.setElement(r),this._mainView.render(u))):this._clearContainer=this._instance.render(r,u,i)!==!1,this._trace("Done")}catch(f){this._onRenderError(f,t)}},getExternalInterface:function(){return this._instance.externalInterface},getApi:function(){return this._instance.API},getStyle:function(){return this._style},isError:function(){return this._isError},getName:function(){return this._widgetName},_onRenderError:function(t,i){this._trace(t+". Render is failed",!0),this._isError=!0,n.isFunction(i)&&i()},_updateContext:function(){this._context.activitySystemUnavailable=t.activitySystemUnavailable,this._context.community=n.extend({},t.community),this._context.user=!t.user?null:n.extend({},t.user),this._context.hostedPage=t.hostedPage,this._context.currentCulture=lt.getCurrentCulture()},_trace:function(){},_warn:function(){},_error:function(n){rr.traceError("Widget["+this._widgetName+"]:Instance["+this._instanceId+"]Error:"+n)},_getSettings:function(){return n.extend({},this._defaultSettings,this._settings)},_validateSettings:function(t,i,r,u){function f(n,t){return(r?r+"."+n:n)+(_.isUndefined(t)?"":"["+t+"]")}function e(n,t){o.push({type:n,text:t})}function a(n){_.each(n,function(n){switch(n.type){case"error":c._error(n.text);break;case"warn":c._warn(n.text)}})}var s=!1,o=[],c=this,h,l;return i=i||this._settings,r=r||"",h={},_.each(t,function(n,t){if(_.isObject(n)){_.isUndefined(n.defaultValue)||_.isFunction(n.defaultValue)||(h[t]=n.defaultValue);var r=i[t];n.caseSensitive===!1&&!_.isUndefined(r)&&_.isString(r)&&(i[t]=r.toLowerCase()),n.required&&(_.isUndefined(r)||_.isNull(r))&&(e("error","Missing required settings parameter: "+f(t)+""),s=!0)}},this),l=n.extend({},h,i),_.each(t,function(n,t){_.isObject(n)&&_.isFunction(n.defaultValue)&&(h[t]=n.defaultValue.call(l))}),_.each(i,function(r,u){var h,a,y,w,b,p,k,v;if(u.charAt(0)!="_"&&!_.isNull(r))if(h=t[u],_.isUndefined(h))t["*"]!=!0&&e("warn","Unknown settings parameter: "+f(u));else{if(a=_.isString(h)||_.isArray(h)?h:h.type||typeof h.defaultValue,!_.isUndefined(a)&&(a=_.isArray(a)?a:[a],y=[],b=_.find(a,function(t){var s,l,a,v;return _.isObject(t)?_.isObject(r)?(s=c._validateSettings(t,r,f(u),!0),s.hasError?(w=!0,y.push(s.messages)):(i[u]=n.extend({},s.defaultSettings,r),o=o.concat(s.messages)),!s.hasError):(y.push([{type:"error",text:"Settings key "+f(u)+" is not object"}]),!1):(l=h.itemTypesMap,t=="array"&&_.isArray(r)&&_.isObject(l))?(a=l["*"],v=!0,_.each(r,function(t,r){var s=t.id,h,p;if(_.isUndefined(s)||_.isString(s)?_.isUndefined(s)?_.isUndefined(a)?e("error","Settings key "+f(u,r)+" has no id set"):h=a:(h=_.find(l,function(n,t){if(!_.isUndefined(n.id)&&_.isString(t))return t.toLowerCase()==s.toLowerCase()}),_.isUndefined(h)&&e("error","Settings key "+f(u,r)+" has unknown id: "+s)):e("error","Settings key "+f(u,r)+".id is not string"),!_.isUndefined(h))if(p=c._validateSettings(h,t,f(u,r+(_.isString(s)?":"+s:"")),!0),p.hasError)y.push(p.messages);else return i[u][r]=n.extend({},p.defaultSettings,t),o=o.concat(p.messages),!0;v=!1,w=!0}),v):t=="array"?_.isArray(r):typeof r==t}),!b)){s=!0,_.each(y,function(n){o=o.concat(n)}),p=_.map(a,function(n){return _.isObject(n)?"object":n}),w?e("error","Settings key "+f(u)+" has validation error"):e("error","Settings key "+f(u)+(p.length==1?" is not "+p[0]:" doesn't match any of expected types: "+p.join(", ")));return}_.isFunction(h)&&(h={validate:h}),_.isObject(h)&&(_.isArray(h.enumValues)&&(k=_.find(h.enumValues,function(n){return n==r}),k||(s=!0,e("error","Unknown value for "+f(u)+" settings key: "+r+", expected: "+h.enumValues.join(", ")))),_.isFunction(h.validate)&&(v=h.validate.call(l,r,f(u)),_.isObject(v)&&v.error&&(v.error?(s=!0,e("error",v.message)):e("warn",v.message)),_.isString(v)&&(s=!0,e("error",v))),h.min&&(_.isNumber(h.min)?r<h.min&&(i[u]=h.min,e("warn",'"'+f(u)+'" value must be not less than '+h.min+". The value has been changed to "+h.min)):s=!0),h.max&&(_.isNumber(h.max)?r>h.max&&(i[u]=h.max,e("warn",'"'+f(u)+'" value must be not greater than '+h.max+". The value has been changed to "+h.max)):s=!0))}},this),u||a(o),{hasError:s,messages:o,defaultSettings:h}},_getInitialSettings:function(){return this._settings},_createThisProxy:function(){var i=this,t={clientId:this._widgetName+"_"+this._instanceId,settings:this._getSettings(),initialSettings:this._getInitialSettings(),trace:_.bind(this._trace,this),error:_.bind(this._error,this),createControl:_.bind(this._createControl,this),renderComplete:_.bind(function(n){this._renderCompleteList.push(n)},this),createWidget:_.bind(this._createWidget,this),extendWidget:_.bind(this._extendWidget,this),getExternalInterface:_.bind(this.getExternalInterface,this),callExternalInterface:function(n){var t=Array.prototype.slice.call(arguments,1);i._callExternalInterface(n,t,[])}};t.setDefaultSettings=_.bind(function(n){this._defaultSettings,this._defaultSettings=n,t.settings=this._getSettings()},this),t.processSettings=_.bind(function(i){var r,u;for(r in i)_.isObject(i[r])&&!_.isUndefined(ai[r])&&(i[r]=n.extend(ai[r],i[r]));if(u=this._validateSettings(i),u.hasError)throw"Malformed settings";else t.setDefaultSettings(u.defaultSettings)},this),t.defaultErrorHandler=function(n){if(!!n&&!!n.id)throw new p("Error has occured: "+n.id);},this.thisProxy=t,this._updateThisProxy()},_callExternalInterface:function(t,i,r){var e=this.thisProxy,s=e.getExternalInterface()||{},o=s[t],f=[].concat(i);r=r||[],r.push(this.getName()),f=f.concat([e.settings.callbackData,r.join(".")]),n.isFunction(o)&&o.apply(null,f),this._parentWidget?this._parentWidget._callExternalInterface(t,i,r):u.trigger.apply(u,[t].concat(f))},_updateThisProxy:function(){var t=this.thisProxy,r=lt.merge(this._widgetName,this._strings,this._settings.localizedStrings),i=n.extend({},this._markup),u,f=/\$\{(.*?)\}/gm;for(u in i)i[u]=v.replace(i[u],r,f);this._style=v.replace(this._style,r,f),t.strings=r,t.markup=i,t.daapiUrls={},n.each(this._daapiUrls,function(){t.daapiUrls[this.name]=this})},_createWidget:function(t,i,r){_.isUndefined(i.productLocation)&&(i.productLocation=this.thisProxy.settings.productLocation);var u=n.extend(!0,{_parentWidget:this},i);Flux4.createWidget(t,u,r)},_extendWidget:function(n,t){var i=_.extend({_parentWidget:this,_inheritOnly:!0},this.thisProxy.settings,t);this.thisProxy._superWidgetName=n,Flux4.createWidget(n,i,function(n){n.define("",function(){return n})})},_createControl:function(t,i,r){if(this._controls&&this._controls[t]){var u=n.extend(!0,{_parentWidget:this},i);_.isUndefined(u.containerId)&&(u.containerId=null),_.isUndefined(u.productLocation)&&(u.productLocation=this.thisProxy.productLocation),ut.createControl(t,{version:this._controls[t],parentName:this._widgetName},u,function(n){r(n)})}else this._trace('Control "'+t+'" is not registered for widget "'+this._widgetName+'"',!0)}};var ai={container:{type:["string","object"]},containerId:{type:"string"}},w=function(){function i(){}function o(t){return n.inArray(t.toLowerCase(),h)>-1}function s(t){return n.inArray(t.toLowerCase(),f)>-1}var r=[],h=["userprofile","auth"],f=[];return{reloadWidgets:function(i){t.reload(function(){lt.loadIfNeed(function(){n.each(r,function(){this.render(null,!0)}),n.isFunction(i)&&i()})}),!!window.Flux&&n.isFunction(window.Flux.reloadWidgets)&&window.Flux.reloadWidgets()},removeWidget:function(t){i('Remove widget "'+t.getName()+'"...'),n.each(r,function(n,i){if(i==t)return r.splice(n,1),!1}),o(t.getName())&&n.each(f,function(n,i){if(t.getName().toLowerCase()==i)return f.splice(n,1),!1}),n(t._container).parent().html("")},invokeWidget:function(t,e,h,c,l){var w,b,p,a,k,y;if(i('Invoke widget "'+e+'"...'),o(e)){if(s(e)){i("The widget is singleton and already loading...");return}f.push(e.toLowerCase())}if(w=v.camelize(e)+(h.controlData?h.controlData.version:""),t&&t.length&&(b=n("<div />").addClass(w),t.addClass("flux4Widget").addClass("flux4").append(b),t=b),p=c._parentWidget,delete c._parentWidget,a=new yt(t,e,h,c),p&&(a._parentWidget=p),!a.isError())return c.apiOnly?(_.isFunction(l)&&l(a.getApi()),i("Widget api successfully returned")):c._inheritOnly?(_.isFunction(l)&&l(a.thisProxy),a.thisProxy.trace("Successfully inherited"),y=a.getStyle(),y&&(k=v.camelize(p._widgetName),y=y.replace(new RegExp("(\\.flux4Widget[\\s>]+\\.)"+w,"g"),"$1"+k),fi.embedStyleSheet(y,a.thisProxy.settings.responsive))):(y=a.getStyle(),y&&fi.embedStyleSheet(y,a.thisProxy.settings.responsive),a.render(function(){if(_.isFunction(l)){var n=a.thisProxy.settings.responsive;l(a.getExternalInterface(),a._settings._returnBreakpoints&&!!n?n.breakpoint||n.breakpoints:null)}u.trigger("WidgetLoaded:"+e.toLowerCase())}),r.push(a),a.isError()?i("Widget has been created, but with errors",!0):i("Widget has been created successfully")),a},isLoadingSingleton:s,tryGetWidgetByName:function(n){return _.detect(r,function(t){return n==t.getName()})},isSingletonWidget:o}}(),hr=function(t){var i=cr.get();return{save:function(){i.add(t,n.makeArray(arguments))},tryGetParams:function(){var n=i.getValue(t);return n&&i.removeKey(t),n}}},cr=function(){var n;return{get:function(){return n||(n=new gt("WidgetStateSaveContainerParams",3e5)),n}}}(),k,vi,s=function(o,a){function ut(){return"Auth"+(r.isNewAuth()?"":" oldAuth")}function st(n){if(k)n(k);else u.on("authWidgetLoaded",function(){n(k)})}function v(t){n.isFunction(t)&&(b.widgets?st(function(){t(k)}):b.load(function(){st(function(){t(k)})}))}function p(n,t,f,e,o,s){reloadPageOnOverlayClose=!1,t=i.addQueryParameter(t,"fbAutoLoginDisabled","true"),_.isUndefined(a)||(t=i.addQueryParameter(t,"productLocation",i.getProductLocationName(a))),h.show(ut(),{pageUrl:i.addCultureQueryParameter(t),size:f,clickEvent:e,onPageLoaded:o,onClose:function(){at.get().readyToUse(!1),ht(),reloadWidgets&&w.reloadWidgets()},callback:n,overlayClass:s,useOldReceiver:!r.isNewAuth(),resizeCallback:function(){u.trigger("overlayResized")}})}function ht(){reloadPageOnOverlayClose&&t.hostedPage&&window.location.reload()}function tt(n,r){if(et.getBrowserVersion().safari&&!_.isUndefined(n.setAuthCookieUrl)){t.reset(),n.action=r,l.setCookie(authRedirectParamsCookieName,f.stringify(n),6e4);var u=decodeURIComponent(n.setAuthCookieUrl);return window.location.href=i.addQueryParameter(u,"returnUrl",encodeURIComponent(window.location.href)),!0}return!1}function ti(){var i=l.getCookie(authRedirectParamsCookieName),n;if(!i)return!1;try{n=f.parse(i)}catch(r){}return l.setCookie(authRedirectParamsCookieName,"",-1),n&&!_.isUndefined(n.action)&&t.loadIfEmpty(function(){if(n.action=="deactivationCompleted"){bt();return}if(t.user){if((n.action=="processOverlayCallback"||n.action=="signIn"||n.action=="signUp")&&n.roadBlockerCheck==="true"){roadBlocker.performCheck({fromSignIn:n.eventName==="SignIn",eventName:n.eventName});return}nt(n)}}),!0}function d(n){return n?{eventName:n,widgetName:a}:null}function nt(f,e){var c,o,v,y,w;if(dt()||gt()){rt();return}if(f.eventName==="SignIn"){c=!1;u.on("OverlayCancelled",function(){c||(pi(a),c=!0)})}if(_.isUndefined(f.resetAuth)||l.setCookie("MasterAuthIsRequested","",-1),_.isUndefined(f.BigDoorCookie)||r.addBigDoorCookie(f.BigDoorCookie),_.isUndefined(f.reloadSignIn)||r.authenticationChanged(null,!0,d(f.eventName)),f.set3POUFirstTimeCookie=="true"&&r.setThirdPartyJustLoggedInCookie(),!!f)if(_.isUndefined(f.showFlyUpType)){if(f.errorMsg&&!r.isAuth41()){h.hide(function(){alert(decodeURIComponent(String(f.errorMsg).replace(/\+/g," ")))});return}}else switch(f.showFlyUpType){case"ShowAlienAccountFlyUp":return h.hide(function(){(new s).showAlienAccountFlyUp(f)}),!0;case"ShowMergeAccountsFlyUp":h.hide(function(){(new s).showMergeAccountsFlyUp(f)})}_.isUndefined(f.postAuthRedirectUrl)?_.isUndefined(f.roadBlockerCheck)?f.isCommunityMember=="false"?r.authenticationChanged(function(){ui(null,!0,!0)},!1,d(f.eventName)):_.isUndefined(f.reload)&&f.isCommunityMember!="true"?f.logOut=="true"?(r.removeBigDoorCookie(),r.reload(null,d("signOut"))):_.isUndefined(f.showSignUpForm)?_.isUndefined(f.reloadSignIn)&&_.isUndefined(f.showSignInForm)?f.closeOverlay=="true"||f.closeOverlay===!0?(h.hide(),ht()):_.isUndefined(f.setheight)&&n.isFunction(e)&&_.isUndefined(f.unload)&&e():t.user?r.authenticationChanged(function(){lt(f.email)}):f.showFlyUpType||f.errorMsg?!f.errorMsg||ii(f.errorMsg):h.hide(function(){ei(f),kt(null,undefined,{email:f.email})}):h.hide(function(){pt()}):(at.get().readyToUse(!0),r.reload(null,d(f.eventName),!0)):(y=f.eventName,w=f.productLocation,r.authenticationChanged(function(){roadBlocker.performCheck({fromSignIn:y==="SignIn",eventName:y,productLocation:w})},!1,d(f.eventName))):(o=decodeURIComponent(f.postAuthRedirectUrl),f.redirectOverlay!="true"||Flux4.Modernizr.touch?h.hide(function(){Flux4.Modernizr.touch&&(o=i.addQueryParameter(o,"redirectUrl",encodeURIComponent(window.location.href)),o=i.removeQueryParameter(o,"callbackname")),window.location.href=o}):(r.authenticationChanged(null,!0,d(f.eventName)),reloadPageOnOverlayClose=!0,h.redirectToUrl(o,r.postAuthOverlaySize())||(v=!1,p(function(){},o,r.postAuthOverlaySize(),undefined,function(){v||(v=!0,h.redirectToUrl(o,r.postAuthOverlaySize()))},"postAuthRedirect"))))}function ii(n){var r=i.addDeviceQueryParameter(t.community.errorMessageUrl);r=i.addQueryParameter(r,"message",n),p(nt,r,{height:170,width:430},undefined,undefined,"auth41")}function lt(n,u){if(!it(u)){var e=new ct(a).useDirectBrandAuthDomain()?t.community.facebookContext.baseDirectAuthUrl+"Account/ShowLogin?product=Auth":t.community.authentication.signInUrl,f=i.addDeviceQueryParameter(o.customSigninPage||yt(e));n&&(f=i.addQueryParameter(f,"email",n)),p(function(n){tt(n,"signIn")||nt(n)},f,r.signInOverlaySize(),u,undefined,"signInOverlay")}}function ri(n,i,u){(t.user||!it(u))&&p(function(n){tt(n,"signUp")||nt(n)},r.replaceUrlLocation(n),i||r.signInOverlaySize(),u,undefined,"signUpOverlay")}function it(n){if(!t.community.authentication.signUpAndSignInEnabled&&r.isNewAuth()){var u=i.addDeviceQueryParameter(yt(t.community.authentication.thouSignInSignUpUrl));return p(function(n){!t.user&&tt(n,"signUp")||nt(n)},u,r.thouSignInSignUpOverlaySize(),n),!0}return!1}function yt(n){return r.isAuth41()&&k&&k.isDeviceSupported||et.getBrowserVersion().safari&&Flux4.Modernizr.touch?i.addQueryParameter(n,"callbackUrl",encodeURIComponent(window.location.href)):n}function pt(n,u,f,e){if(u||!t.user){var s=i.addDeviceQueryParameter(n||o.customSignupPage||t.community.authentication.signUpUrl);r.isOverlayMode()?ri(s,f,e):window.location.href=r.replaceUrlLocation(s)}}function wt(t,i,r){v(function(t){t.keepCurrentAccount.call(null,r,n.extend(y(),{thouSignUpMode:!0}))})}function ui(n,u,f){var h,e,s;if(!t.user.communityMember){if(h=t.user.globalThirdPartyOnly||t.user.communityThirdPartyOnly,e=(t.user.initialThirdPartyConnection||"").toLowerCase(),h&&(e==="facebook"||e==="twitter")&&!!t.community.facebookContext&&t.community.facebookContext.enableThirdPartyAuth){e==="facebook"?new ct(a).triggerFacebookAuthFlow():e==="twitter"&&new ct(a).triggerTwitterAuthFlow();return}if(it(n))return;if(r.isNewAuth()&&h||!ft.enabled()&&t.user.facebookOnly){wt(!1,!1,n);return}}s=i.addDeviceQueryParameter(r.replaceUrlLocation(o.customInterimPage||t.community.authentication.interimPageUrl)),r.isThirdPartyJustLoggedIn()&&(s=i.addQueryParameter(s,"fbJustLoggedIn",1)),p(function(n){nt(n,function(){at.get().readyToUse(!0),n.load||r.reload(null,d(n.eventName),f)})},s,r.interimOverlaySize(),n,function(){r.removeThirdPartyJustLoggedInCookie()},"interimOverlay"),reloadPageOnOverlayClose=!!u||r.isThirdPartyJustLoggedIn()}function bt(){function f(){n||(n=!0,ei())}var n=!1;u.on("OverlayCancelled",f);p(nt,i.addDeviceQueryParameter(t.community.authentication.accountDeactivatedUrl),r.accountDeactivatedOverlaySize())}function y(){return{product:"Auth",productLocation:i.getProductLocationName(a||ut()),device:g.getDeviceType()}}function kt(i,r,u){t.user||(_.isUndefined(u)||!u.productLocation||ni(u),yi(),t.community.authentication.enableApiBasedLogin||v(function(t){t.signIn.call(null,i,n.extend(y(),{title:r},u))}))}function fi(){return dt()?(!n.cookie("FluxBD")&&!!t.user&&t.user.age>0&&r.addFluxBDCookie(new Date(new Date-t.user.age*c.ONE_YEAR).toDateString()),rt({redirectUrl:encodeURIComponent(window.location.href)},"Sorry, you are ineligible to join "+t.community.name+"."),!0):!1}function oi(){return gt()?(rt({isBanned:!0},"You are banned in this community."),!0):!1}function dt(){var r=+t.community.authentication.minAllowedAge,u=n.cookie("FluxBD"),i,f;if(!u)i=!t.user?-1:t.user.age;else if(f=Math.abs(new Date-new Date(u)),i=Math.floor(f/c.ONE_YEAR),i>=0&&i==r+1)return new Date(u).setFullYear((new Date).getFullYear())+864e5>new Date;return!!r&&i>=0&&i<r}function gt(){return!!t.user&&(t.user.isCommunityBanned||t.user.isSystemBanned)}function rt(t){t=t||{},h.hide(function(){v(function(i){i.showIneligibleAgeError.call(null,null,n.extend(y(),{title:"ErrorMessage"},t))})})}function ni(n){n.productLocationForced=!0}return o=o||{},authRedirectParamsCookieName="FluxAuthRedirectParams",reloadPageOnOverlayClose=!1,reloadWidgets=!1,roadBlocker=new vt(!1,a),savedMtvnUserIdCookieName="savedvmn_uuid",k||vi||t.loadIfEmpty(function(){if(r.isAuth41()&&!k){var t=n("<div>").css({position:"absolute",width:"1px",height:"1px",left:"-1000px",top:"-1000px"}).appendTo("body");vi=!0,Flux4.createWidget("Auth",{container:t},function(n){k=n})}}),{isNewAuth:r.isNewAuth,isOverlayMode:r.isOverlayMode,signIn:kt,signUp:function(i,r,u){!u||!u.productLocation||ni(u),v(function(f){t.user||f.signIn.call(null,i,n.extend(y(),{title:r,eventName:"SignUp"},u));return})},thouToFluxSignUp:wt,sutSignUp:function(n,r){var u=i.addDeviceQueryParameter(o.customSignupPage||t.community.authentication.signUpUrl);pt(n?i.addQueryParameter(u,"sutid",n):u,!1,null,r)},fluxSignIn:function(i,r){if(!t.user){var u=this;t.community.authentication.enableApiBasedLogin||v(function(t){n.isFunction(t.signInToFlux)&&(yi(),t.signInToFlux.call(null,i,n.extend(y(),{title:r})))})}},joinCommunity:function(i,r,u){if(!t.user.communityMember){var f=this;v(function(t){t.joinCommunity.call(null,i,n.extend(y(),{title:r,eventName:"Join"}),u)})}},showInterimForm:function(i,r,u,f,e,o){t.user&&(typeof r=="string"&&(u=r,r=!1),v(function(t){t.showInterimForm.call(null,i,n.extend(y(),{title:u,eventName:f},{productLocation:e,blockedAction:o}))}))},checkAuthRedirectParams:ti,signOut:function(u,f,e){var h,o,s;t.user&&(!c.getCookie(savedMtvnUserIdCookieName)||c.setCookie(savedMtvnUserIdCookieName,"",-1),r.removeBigDoorCookie(),h=new ot("Authentication",null,[{name:"logout",template:i.logoutUrlTemplate,isAction:!0}],{settings:y()}),o=f,n.isFunction(o)||(o=function(){}),s=function(){u?window.location.reload():r.reload(n.isFunction(e)?e:null,d("signOut"))},h.methods().logout({},function(){r.dropMasterCookiesOnBrandsDomain(!0,function(){ft.enabled()&&t.user.facebookConnected?ft.signOut(function(){s()}):s()})},o))},deactivationCompleted:function(n){tt(n||{},"deactivationCompleted")||r.authenticationChanged(function(){bt(),reloadPageOnOverlayClose=!0})},showAlienAccountFlyUp:function(n){var i=n;p(function(n){_.isUndefined(n.showSignInForm)||n.showSignInForm!=!0?_.isUndefined(n.redirectParentUrl)?_.isUndefined(n.closeOverlay)||n.closeOverlay!=!0||_.isUndefined(n.reload)||n.reload!=!0?setTimeout(function(){u.trigger("OnAlienAccountFlyUpShowed",i)},0):h.hide(function(){window.location.reload()}):h.hide(function(){window.location.href=n.redirectParentUrl}):h.hide(function(){lt()})},decodeURIComponent(String(n.errorMsgOverlayUrl+"&isInitSignIn=true")).replace(/\+/g," "),{width:376,height:!t.user?176:205},null,null)},showMergeAccountsFlyUp:function(t){v(function(r){if(!t.twitterUserUcid){var u=decodeURIComponent(t.errorMsgOverlayUrl);r.mergeAccounts.call(null,null,n.extend(y(),{title:"MergeAccounts"},{email:decodeURIComponent(i.getQueryParameter(u,"userEmail")),userName:decodeURIComponent(i.getQueryParameter(u,"userName")),userIdentity:decodeURIComponent(i.getQueryParameter(u,"userIdentity")),accessToken:decodeURIComponent(i.getQueryParameter(u,"accessToken"))}))}else r.linkAccount.call(null,null,n.extend(y(),{title:"Link Account"},{twitterUserUcid:decodeURIComponent(t.twitterUserUcid)}))})},verifyEmail:function(){v(function(t){var r=window.location.href,u=decodeURIComponent(i.getQueryParameter(r,"verification_value")),f;u&&(f=decodeURIComponent(i.getQueryParameter(r,"redirectUrl")),t.verifyEmail.call(null,null,n.extend(y(),{title:"EmailVerification"},{redirectUrl:f,verificationValue:u})))})},passwordReset:function(){v(function(t){var r=window.location.href,u=decodeURIComponent(i.getQueryParameter(r,"verification_value")),f=decodeURIComponent(i.getQueryParameter(r,"redirectUrl"));t.passwordReset.call(null,null,n.extend(y(),{title:"Password Reset"},{redirectUrl:f,verificationValue:u}))})},mergeTwitterUserToFlux:function(){v(function(t){var r=window.location.href,u=decodeURIComponent(i.getQueryParameter(r,"verification_value")),f=decodeURIComponent(i.getQueryParameter(r,"redirectUrl"));t.mergeTwitterUserToFlux.call(null,null,n.extend(y(),{title:"Connect Accounts"},{redirectUrl:f,verificationValue:u}))})},getAuthWidget:v,processAuthentication:nt,authenticationChanged:r.authenticationChanged,redirectToSetAuthCookieUrlIfNeed:tt,checkAndShowIfNeededIneligibleAgeError:fi,checkAndShowIfNeededUserBannedError:oi,isChromeOnIosDevice:function(){return Flux4.Modernizr.touch&&!!navigator.userAgent.match("Mac")&&!!navigator.userAgent.match("CriOS")},getPreAuthInterimUrl:function(t){n.isFunction(t)&&v(function(n){t(n.getAuthUrl()+"PreAuthInterim")})}}},r=function(){function y(i,r){w.reloadWidgets(function(){n.isFunction(i)&&i(),r&&setTimeout(function(){u.trigger(r.eventName,{widgetName:r.widgetName},t.user)},1)})}function s(){var t;try{t=n.cookie("fluxAuthCookieState"),!t||(t=f.parse(t))}catch(i){}return t}function a(n){var r=t.community.authentication.baseFluxAuthenticationUrl+"Cookies/GetCookiesFromMasterDomain",u;r=i.addQueryParameter(r,"skipCache",!0),/Android/i.test(navigator.userAgent)&&(r=i.addQueryParameter(r,"ts",(new Date).getTime())),u=new ot("Authentication",null,[{name:"dropMasterCookiesOnBrandsDomain",template:r,isAction:!1,skipAkamaiBatch:!0}],{}),u.methods().dropMasterCookiesOnBrandsDomain({},n,n)}function v(){return{loggedIn:!!t.user,isMember:!!t.user&&t.user.communityMember,initialConnection:!t.user?"":t.user.initialThirdPartyConnection,hasRoadblock:!!t.user&&!!t.user.roadBlocker.redirectUrl,globalMemberType:t.user?t.user.globalMemberType:""}}function p(){var i=s(),e;r||(r=i),!!i&&i.authStateChanged&&(i=v(),i.authStateChanged=!1,_.isEqual(i,r)||(ut.setLastAuthCookie(),ci.trigger("synchronizeAuthCookie",{cookie:i,communityId:t.community.ucid},function(){u.trigger("AuthCookieSynchronized",i)}),r=i),e=location.hostname.split("."),e.length>1&&(e=e[e.length-2]+"."+e[e.length-1]),n.cookie("fluxAuthCookieState",f.stringify(i),{path:"/",domain:e,expires:1}))}function b(i,r){var u=s(),f=function(){p(),n.isFunction(r)&&r()};!u||i?a(f):(f(),u.loggedIn==!!t.user&&u.isMember==(!!t.user&&t.user.communityMember)&&u.initialConnection==(!t.user?"":t.user.initialThirdPartyConnection)&&(u.hasRoadblock!==!0||t.user.roadBlocker.redirectUrl)||a(f))}var o="fbJustLoggedIn",r;return{isNewAuth:function(){return t.community.authentication.pageDisplayMode==3||t.community.authentication.pageDisplayMode==4},isAuth41:function(){return t.community.authentication.pageDisplayMode==4},isOverlayMode:function(){return t.community.authentication.pageDisplayMode==2||t.community.authentication.pageDisplayMode==3||t.community.authentication.pageDisplayMode==4},signInOverlaySize:function(){return{height:this.isNewAuth()?335:300}},thouSignInSignUpOverlaySize:function(){return{width:383,height:233}},interimOverlaySize:function(){return{height:300}},postAuthOverlaySize:function(){return{width:735,height:450}},accountDeactivatedOverlaySize:function(){return{width:400,height:300}},authenticationChanged:function(t,i,u,f){function e(){y(function(){n.isFunction(t)&&t(),f&&setTimeout(function(){pi(u&&u.widgetName)},1)},u)}i?e():h.hide(e),r=undefined},reload:function(n,i,r){t.hostedPage?h.hide(function(){window.location.reload()}):this.authenticationChanged(n,!1,i,r)},replaceUrlLocation:function(n){return n.replace("(location)",encodeURIComponent(window.location.href))},setThirdPartyJustLoggedInCookie:function(){l.setCookie(o,"1",3e5)},isThirdPartyJustLoggedIn:function(){return l.getCookie(o)=="1"},removeThirdPartyJustLoggedInCookie:function(){l.setCookie(o,"",-1)},addBigDoorCookie:function(n){c.setCookieToRootDomain("BDACWE",n,31536e6)},addFluxBDCookie:function(n){c.setCookieToRootDomain("FluxBD",n,864e5)},removeBigDoorCookie:function(){!l.getCookie("BDACWE")||c.setCookieToRootDomain("BDACWE","",-1)},dropMasterCookiesOnBrandsDomain:b,getUserAuthParams:v}}();var lr=function(){function r(i){if(!_.isUndefined(i.errorMsg)){n.isFunction(t)&&t(i.errorMsg);return}i.setAuthCookieUrl&&(new s).redirectToSetAuthCookieUrlIfNeed(i,"processOverlayCallback")||((new s).processAuthentication(i),setTimeout(function(){n.isFunction(t)&&t("None")},100))}var t=null,i=new ii(n("<iframe>").hide().appendTo(n("body")));return{login:function(u,f){t=f,i.loadAndListen(u,n.proxy(r,this),!1)}}}(),pt=null,wi=!1,ct=function(f){function p(){return!!t.community.facebookContext&&t.community.facebookContext.enableThirdPartyAuth===!0&&!!t.community.facebookContext.baseDirectAuthUrl}function w(n){(new s).checkAndShowIfNeededIneligibleAgeError()||c()&&pt.triggerFacebookAuthFlow(n)}function b(n){(new s).checkAndShowIfNeededIneligibleAgeError()||c()&&pt.triggerTwitterAuthFlow(n)}function d(n){t.loadIfEmpty(function(){!t.community.facebookContext||t.community.facebookContext.enableThirdPartyAuth!==!0||n()})}function c(){return!!pt}function g(n,t){var r="http://widgets4.flux.com/iframe/auth_iframe.html";return r=!n?r:i.addQueryParameter(r,"product",n),!t?r:i.addQueryParameter(r,"productLocation",t)}function l(n){return n.product||"Auth"}function h(n){return n.productLocation||i.getProductLocationName(f)}function nt(n,t){var r=decodeURIComponent(t),f,o,u,e;if(n.errorMsgOverlayUrl)!n.showFlyUpType||(r=i.addQueryParameter(r,"showFlyUpType",n.showFlyUpType)),u=decodeURIComponent(n.errorMsgOverlayUrl).split("?")[1],!u||(u=u.split("&"));else return r;for(f=0,o=u.length;f<o;f++)e=u[f].split("="),r=i.addQueryParameter(r,e[0],e[1]);return r}function a(n){var i="",t,f,r,u;if(!n.showFlyUpType||(i="showFlyUpType="+n.showFlyUpType),!!n.errorMsgOverlayUrl)for(t=decodeURIComponent(n.errorMsgOverlayUrl).split("?")[1],!t||(t=t.split("&")),r=0,f=t.length;r<f;r++)u=t[r].split("="),i+="&"+u[0]+"="+u[1];return!n.errorMsg||(i+="&errorMsg="+decodeURIComponent(n.errorMsg)),!n.eventName||(i+="&eventName="+n.eventName),i}function tt(t){var r;if(t=t||{},!(new s).checkAndShowIfNeededIneligibleAgeError()){o||(o=n("<iframe/>").addClass("flux4AuthFrame").appendTo("body"));var e=function(i){if(!!t.redirectUrl&&Flux4.Modernizr.touch){document.location.href=decodeURIComponent(t.redirectUrl);return}if(!_.isUndefined(i.showIneligibleAge)){k.preAuthInterim.call(null,null,{dob:i.showIneligibleAge,redirectUrl:window.location.href,errorCode:i.errorCode});return}i.setAuthCookieUrl&&(new s).redirectToSetAuthCookieUrlIfNeed(i,"processOverlayCallback")||(t.ignoreXdArguments===!0?document.location.href=o[0].src:(new s).processAuthentication(i),n.isFunction(t.callback)&&t.callback(a(i)))},u=t&&t.domain||i.getQueryParameter(document.location.href,"domain")||document.domain,f=i.getQueryParameter(document.location.href,"callbackName")||t.callbackName||rt.create(e,null,!0);t&&t.ignoreXdArguments&&(u=i.getQueryParameter(document.location.href,"domain"),f=i.getQueryParameter(document.location.href,"callbackName")),r=[g(l(t),h(t)),"#token=",t.token,"&secretToken=",t.secretToken,"&product=",l(t),"&productLocation=",h(t),"&action=",t.action,"&provider=",t.provider,"&domain=",u,"&callbackName=",f,"&locationModifier=",t.locationModifier,"&callbackUrl=",t.callbackUrl,"&redirectUrl=",t.redirectUrl,"&touch=",Flux4.Modernizr.touch,"&ignorePostRedirect=",!t.ignorePostRedirect?!1:t.ignorePostRedirect,"&linkAccountEmail=",t.linkAccountEmail,"&callbackUrlForBackButton=",y(),"&device=",v()].join(""),Flux4.Modernizr.touch&&(!t||t.redirectUrl)||!t||t.ignoreXdArguments?document.location.href=r:(r+="&product="+l(t),r+="&productLocation="+h(t),o.attr("src",r))}}function it(u){var o,c,f,e;(new s).checkAndShowIfNeededIneligibleAgeError()||(u=u||{},c=function(t){(Flux4.Modernizr.touch&&window.focus(),o.close(),!t.setAuthCookieUrl||(t.roadBlockerCheck=ut(t),(new s).redirectToSetAuthCookieUrlIfNeed(t,"processOverlayCallback")),u.ignoreXdArguments!==!0&&(new s).processAuthentication(t))||(!!u.callbackUrl&&u.ignoreXdArguments?window.location.href=nt(t,u.callbackUrl):n.isFunction(u.callback)&&(r.isAuth41()||!t.errorMsg||alert(decodeURIComponent(t.errorMsg).replace(/\+/g," ")),u.callback(a(t))))},f=i.addQueryParameter(u.url,"provider","twitter"),f=i.addQueryParameter(f,"productLocation",h(u)),f=i.addQueryParameter(f,"domain",u.domain||document.domain),f=i.addQueryParameter(f,"ignorePostRedirect",!u.ignorePostRedirect?!1:u.ignorePostRedirect),f=i.addQueryParameter(f,"roadBlockCheckSafari",!u.roadBlockCheckSafari?!1:u.roadBlockCheckSafari),f=i.addQueryParameter(f,"callbackName",rt.create(c,"ProcessDirectThirdpartyAuthCallback",!0)),f=i.addQueryParameter(f,"touch",Flux4.Modernizr.touch),f=i.addQueryParameter(f,"device",v()),f=i.addQueryParameter(f,"callbackUrlForBackButton",y()),f=i.addQueryParameter(f,"locationModifier",u.locationModifier),e=new s,e.isChromeOnIosDevice()?e.getPreAuthInterimUrl(function(n){n?(n=i.addQueryParameter(n,"redirectUrl",encodeURIComponent(document.location.href)),n=i.addQueryParameter(n,"touch","true")):n=document.location.href,t.reset(),window.location.href=i.addQueryParameter(f,"callbackUrl",encodeURIComponent(n))}):o=window.open(f,"TwitterAuthFacadePopup","width=800, height=500, status=1, location=1, resizable=yes"))}function v(){return Flux4.Modernizr.touch?"2":"1"}function y(){return encodeURIComponent(window.location.href)}function ut(n){return et.getBrowserVersion().safari&&!!n.roadBlockerCheck?_.isUndefined(n.roadBlockCheckSafari)?n.roadBlockerCheck:n.roadBlockCheckSafari:n.roadBlockerCheck}function ft(){if(t.community.facebookContext&&t.community.facebookContext.enableThirdPartyAuth===!0){var n=t.community.directAuthDomain;return!(!n||0===n.length||/^\s*$/.test(n))}return!0}var o;return d(function(){if(!wi){wi=!0;var t=n("<div>").css({position:"absolute",width:"1px",height:"1px",left:"-1000px",top:"-1000px"}).appendTo("body");Flux4.createWidget("SocialAuth",{container:t,enableUiLayout:!1,productLocation:"Auth"},function(n){pt=n,u.trigger("ThirdPartyDirectAuth.SocialAuthRendered")})}}),{isReady:c,isContextValid:ft,triggerFacebookAuthFlow:w,triggerTwitterAuthFlow:b,processDirectFacebookAuth:tt,processDirectTwitterAuth:it,useDirectBrandAuthDomain:p}},ft=function(){function i(){}function r(){return typeof window.FB=="object"}function s(){return typeof window.fbAsyncInit=="function"||n("body div#fb-root").length>0}function h(){}function f(){return t.community.facebookContext}function c(t,i){r()?i():(n.ajaxSetup({cache:!0}),n.getScript(t,function(){i()}))}var u=0,o=10;return{loadFacebookJDK:!0,enabled:function(){return f()},signOut:function(n){i("Sign Out"),f()&&this.loadJdk({},function(){FB.getLoginStatus(function(t){t.session?FB.logout(n):n()})})},loadJdk:function(i,u,f){var o=n("#fb-root"),e;if(o.length==0&&n("body").prepend('<div id="fb-root"><\/div>'),e=(i?i.locale:null)||"en_US",this.loadFacebookJDK&&!window.FB)c(document.location.protocol+"//connect.facebook.net/"+e+"/all.js",function(){FB.init(n.extend({appId:i.appId||t.community.facebookContext.appId,status:!0,oauth:!0,cookie:!1},i)),u()});else{if(!r()){this.waitFacebookJdk(u,f);return}u()}},waitFacebookJdk:function(t,i){var e=function(){n.isFunction(i)&&i(),h()},c=function(){n.isFunction(t)&&t()},f;r()?c():s()?(u=0,f=setInterval(function(){r()?(clearInterval(f),c()):++u>=o&&(clearInterval(f),e())},500)):e()},getFacebookShareCounters:function(t,r,u){if(u&&!t){r({shareCount:0,followCount:0});return}if(!t){i("getFacebookShareCounters: contentUrl must be specified",!0);return}if(!n.isFunction(r)){i("getFacebookShareCounters: callback must be specified and must be a function",!0);return}this.loadJdk({},function(){FB.api("?id="+encodeURIComponent(t),function(n){if(!n||n.error)i("getFacebookShareCounters: Graph API request failed",!0),r(n);else{var t=(n.shares||0)+(n.likes||0);r({shareCount:t,followCount:t})}})},function(n){i("getFacebookShareCounters: failed to load JDK",!0),r({error:n})})}}}(),wt=function(){function i(){}function t(t,r,u,f,e){n.when||i(funcName+": ERROR - jquery does not contain $.when (Deffered functionality), seems that jquery version is less the 1.5",!0);var o=function(){var i=n.Deferred();return ft.getFacebookShareCounters(t,i.resolve,u),i.promise()},s=function(){var t=n.Deferred();return ar.getTwitterShareCounters(r,t.resolve,u),t.promise()};n.when(o(),s()).then(function(n,t){f({facebook:n,twitter:t})}).fail(function(t){n.isFunction(e)&&e(t)})}return{getAllShareCounters:function(n,i,r){t(n,n,!1,i,r)},getAllFollowCounters:function(n,i,r){t(n,null,!0,i,r)}}}(),ar=function(){function t(){}return{getTwitterShareCounters:function(i,r,u){if(u&&!i){r({shareCount:0,followCount:0});return}if(!i){t("getTwitterShareCounters: contentUrl must be specified",!0);return}if(!n.isFunction(r)){t("getTwitterShareCounters: callback must be specified and must be a function",!0);return}var f=new ot("Twitter",null,[{name:"getTwitterShareCounters",template:"http://urls.api.twitter.com/1/urls/count.json?url={URL}",isAction:!1,skipAkamaiBatch:!0}],{});f.methods().getTwitterShareCounters({URL:i},function(n){r({shareCount:n.count,followCount:0})},function(n){t('getTwitterShareCounters: seems that "http://urls.api.twitter.com/1/urls/count.json?url={URL}&callback={callback}" stop working',!0),r({error:n})})}}}(),oi=function(n,t,i){this.DAAPI=i.methods(),this.utils=new kt;var r=t.controlData?t.controlData.parentName:n;this.authentication=new s(null,r),this.UI=new bt(this.authentication,n),this.performRoadBlockerCheck=function(n,t,i,u,f,e,o){return new vt(!0,r).performCheck({checkFrdOnly:n,readOnlyModeHandler:t,fromSignIn:!1,title:i||undefined,eventName:u,useOriginalRedirect:f,productLocation:e,blockedAction:o})},this.needsRoadblocking=function(n){return new vt(!0,r).needsRoadblocking(n)},this.thirdPartyDirectAuth=new ct(r),this.initEvents=function(n){return[].concat(i.initEvents(n),this.UI.initEvents(n))},this.events=u,this.Events=it};oi.prototype={reloadWidgets:w.reloadWidgets,loadFacebookJdk:_.bind(ft.loadJdk,ft),getAllShareCounters:_.bind(wt.getAllShareCounters,wt),getAllFollowCounters:_.bind(wt.getAllFollowCounters,wt),createPostAuthAction:function(n){return new sr(n)},createWidgetStateContainer:function(n){return new hr(n)}},bt=function(n,t){this.authentication=n,this.widgetName=t},bt.prototype={_addExternalOverlayEvent:function(t,i){var r=this.externalInterface,u,f;return r&&n.isFunction(r[i])?(u=_.bind(r[i],r),n.isFunction(t)?t.externalEventAdded||(f=_.wrap(t,function(n){n(),u()})):f=u,n.extend(f,{externalEventAdded:!0})):t},initEvents:function(t){this.externalInterface=t;var i=[a.EVENTS.OPEN,a.EVENTS.CLOSED];return n.each(i,function(){t[this]=function(){}}),i},showOverlay:function(n){n&&(n.onShowComplete=this._addExternalOverlayEvent(n.onShowComplete,a.EVENTS.OPEN),n.onClose=this._addExternalOverlayEvent(n.onClose,a.EVENTS.CLOSED),a.showOverlay(this.widgetName,n))},hideOverlay:function(n){a.hideOverlay(this.widgetName,this._addExternalOverlayEvent(n,a.EVENTS.CLOSED))},correctOverlayPosition:function(){a.correctPosition(this.widgetName)},initAuthElements:function(n,i){var r=this,u=function(n){var t={cookieEnabled:Flux4.Modernizr.cookies};i=i||{},i.productLocation&&(t.productLocation=i.productLocation),i.blockedAction&&(t.blockedAction=i.blockedAction),r.authentication.signIn(n,i.title||"",t)};n.find(".signIn").click(_.bind(u,this.authentication)).end().find(".signUp").click(_.bind(this.authentication.signUp,this.authentication)).end().find(".joinCommunity").click(_.bind(this.authentication.joinCommunity,this.authentication)),!t.user&&t.community.facebookContext&&this.authentication.isNewAuth()?(n.find(".connectTo3PContainer").show(),n.find(".connectTo3P").addClass("thirdPartyAuth").click(_.bind(this.authentication.signIn,this.authentication))):n.find(".connectTo3PContainer").hide()},initLoggedUserElements:function(i,r){if(t.user){if(_this=this,t.user.communityMember&&i.find(".loggedProfileUrl").removeClass("loggedProfileUrl").wrap(n("<a>").addClass("loggedProfileUrl")).click(function(n){n.preventDefault(),_this.openUserProfile(t.user.ucid,n,t.user.profileUrl)}),r){var u=t.user.thumbnails[r];u&&i.find("img.loggedUserThumbnail").attr("src",u)}!!t.user&&t.user.showFacebookUserWatermark&&(i.find(".thumbnailWrapper").addClass("facebookOGthumbnailWrapper facebook"),i.find(".thumbnailWrapper").attr("data-icon","")),i.find(".loggedDisplayName").each(function(){n(this).html()==""&&n(this).html(t.user.name),!t.user.communityMember&&t.user.communityThirdPartyOnly&&n(this).hide()})}},userProfileMyUpdatesEnabled:tt.userProfileMyUpdatesEnabled,openUserProfile:tt.openUserProfile,showExternalUrlOverlay:function(n){if(n)return h.show(this.widgetName,n)},hideExternalUrlOverlay:function(n){h.hide(n)},redirectExternalUrlOverlay:function(n,t){h.redirectToUrl(n,t)},correctExternalUrlOverlayPosition:function(n,t,i){h.correctPosition(n,t,i)}},kt=function(){this.XdReceiver=ii},kt.prototype={_:_,readCookie:l.getCookie,writeCookie:l.setCookie,setActivityFeedCacheCookie:l.setActivityFeedCacheCookie,isActivityFeedCacheCookieExist:l.isActivityFeedCacheCookieExist,setActivityRatingCookie:l.setActivityRatingCookie,getActivityRatingCookie:l.getActivityRatingCookie,setSentimentTagCacheCookie:l.setSentimentTagCacheCookie,isSentimentTagCacheCookieExist:l.isSentimentTagCacheCookieExist,setCookieToRootDomain:c.setCookieToRootDomain,addBigDoorCookie:r.addBigDoorCookie,removeBigDoorCookie:r.removeBigDoorCookie,setThirdPartyJustLoggedInCookie:r.setThirdPartyJustLoggedInCookie,replace:v.replace,truncateString:v.truncate,toWbrFormatString:v.toWbrFormat,camelize:v.camelize,capitalize:v.capitalize,compactNumber:v.compactNumber,validateEmail:v.isEmail,validatePhone:v.isPhone,getBrowserVersion:et.getBrowserVersion,getQueryParameter:i.getQueryParameter,getAnchorParameter:i.getAnchorParameter,removeQueryParameter:i.removeQueryParameter,trackWidget:g.trackWidget,trackForReporting:g.trackForReporting,getLoggedInUserInfo:g.getLoggedInUserInfo,embedStyleSheet:fi.embedStyleSheet,generateUID:st.generate,externalWidgets:si,googlePlusOneButton:nr,googleShareButton:tr,registerNamedCallback:function(n){return rt.create(n,null,!0)},addQueryParameter:i.addQueryParameter,addAnchorParameter:i.addAnchorParameter,getDomainName:i.getDomainName,addCultureQueryParameter:i.addCultureQueryParameter,addDeviceQueryParameter:i.addDeviceQueryParameter,getThumbnailUrl:i.getThumbnailUrl,fork:dt.fork,waterfall:dt.waterfall,storage:o,createAsyncManager:dt.createAsyncManager,facebookEvents:di,clipboard:ki.embedClipboardFlash,zeroClipboardFlashUrl:i.zeroClipboardFlashUrl,postFormRequest:y.postFormRequest,setPostContentType:y.setPostContentType,getRequest:y.getRequest,loadScript:y.loadScript,buildUrl:function(n,t){return i.buildDaapiUrl({template:n,params:t})},overrideMethod:ur.overrideMethod,_template:function(n,t){return _.template(n,t,{variable:"data"})},getUserProfileUrl:tt.getUserProfileUrl,getMobileUserProfileUrl:tt.getMobileUserProfileUrl,openMobileUserProfile:tt.openMobileUserProfile,HtmlHelper:ir};var h=function(){function h(t){_.isUndefined(t.closeOverlay)||t.closeOverlay!="true"?_.isUndefined(t.setheight)||this.setSize(t):(this.hide(),ei(t)),n.isFunction(r.callback)&&r.callback(t)}function c(){var f=r.pageUrl,o;f=i.addQueryParameter(f,"domain",document.domain),f=i.addQueryParameter(f,"fluxHosted",t.hostedPage),o=n("<iframe>").attr({frameborder:0,marginheight:0,marginwidth:0,scrolling:"no"}).height(r.size.height).hide().load(function(){n.isFunction(r.onPageLoaded)&&r.onPageLoaded()}).appendTo(u),r.size.width&&o.width(r.size.width),e=new ii(o),e.loadAndListen(f,n.proxy(h,this),r.useOldReceiver)}function o(){u&&(e.stopListening(),u=null,e=null,f=null,r=null)}function s(n,t,i){a.correctPosition(f,n,t,i)}var u=null,e=null,f=null,r=null;return{show:function(t,i){if(!!u)throw new p("ExternalUrlOverlay [show] : another overlay already open. Close it first.");f=t,r=n.extend({size:{width:400,height:500},animationDuration:{fade:50,resize:50}},i),u=n(v.replace('<div style="width: {width}px;"><div class="loaderBar" align="center" style="width: {width}px; height: {height}px;"><div class="loaderIcon">&nbsp;<\/div><\/div><\/div>',r.size)),r=n.extend(r,{initContent:u,onClose:function(){o(),n.isFunction(i.onClose)&&i.onClose()},onShowComplete:n.proxy(c,this)}),a.showOverlay(f,r)},hide:function(t){if(!u){n.isFunction(t)&&t();return}a.hideOverlay(f,function(){o(),n.isFunction(t)&&t()})},setSize:function(t,i){var e,f,o;u&&(u.find(".loaderBar").length>0&&u.find(".loaderBar").remove().end().find("iframe").fadeIn(r.animationDuration.fade),e=Number(t.setheight),e!=0)&&(f=t.setwidth?Number(t.setwidth):0,o={height:e},f&&(o.width=f,u.css("width","auto")),u.find("iframe").animate(o,r.animationDuration.resize,function(){if(r){var t=f||r.alwaysCentered;t?s(!1,!r.alwaysCentered,r.resizeCallback):n.isFunction(r.resizeCallback)&&r.resizeCallback()}n.isFunction(i)&&i()}))},correctPosition:s,redirectToUrl:function(n,t){return u?(u.find("iframe").attr("src",n),this.setSize({setheight:t.height,setwidth:t.width},function(){u.find("iframe").attr("scrolling","auto")}),!0):!1}}}(),bi=function(t){function l(){if(i){var t={};return t.left=Math.max((n(window).width()-i.width())/2,0),o||(t.left+=n(window).scrollLeft()),t.top=Math.max((n(window).height()-i.height())/2,0),o||(t.top+=n(window).scrollTop()),t}}function h(t,r,f){var e=l(!0);r&&delete e.top,t?(i.css(e),n.isFunction(f)&&f()):i.animate(e,u.show,f)}function k(t,i){var u={position:o?"fixed":"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:t},r=n("<div>").css(u).addClass("flux4").addClass("flux4Widget");return i&&r.addClass("transparentOverlay"),r}function y(){n("html").addClass("flux4disablePageScrolling")}function d(t){if(!t.shadowCss||r.css(t.shadowCss),b?r.fadeIn(u.show,y):(r.show(),setTimeout(y,u.show)),!f){var o=n.extend(l(!0),{});i.children().hide(),i.css(o).css("visibility","visible"),n.isFunction(t.onStartFadeIn)&&setTimeout(function(){t.onStartFadeIn()},1),i.find(".closeButton").fadeIn(u.show/2),e.fadeIn(u.show/2,function(){n.isFunction(t.onShowComplete)&&setTimeout(function(){t.onShowComplete()},1)})}}function p(){s==="resize"?h(!0):setTimeout(function(){h(!0)},10)}var u={show:50,hide:50},r=null,f=!1,i=null,w=null,o=!1,e=null,s="onorientationchange"in window?"orientationchange":"resize",c=et.getBrowserVersion(),b=!c.msie||c.version*1>8;return{getWidgetName:function(){return t},show:function(u){if(!i&&u&&(u.initContent||u.shadowOnly)){o=!0,f=!!u.shadowOnly;var h=k(u.zIndex,u.showTransparent);r=n("<div>").addClass("overlayShadow"),u.shadowClass&&r.addClass(u.shadowClass),h.append(r.hide()),f||(e=u.initContent.addClass("overlayContent"),i=n("<div>"),i.addClass("overlayContentWrapper").append(n('<div class="closeButton"><b>&#xe00a;<\/b><i>&#xe009;<\/i><\/div>').click(function(){a.hideOverlay(t,u.onClose,!0)})).append(e),u.overlayClass&&i.addClass(u.overlayClass),h.append(n("<div>").addClass(v.camelize(t)).append(i))),h.appendTo(n("body")),n("html").addClass("flux4disablePageScrolling"),d(u),f||n(window).bind(s,p)}},hide:function(t){(i||r||!f)&&(f||(n(window).unbind(s,p),i.width(e.outerWidth()).height(e.outerHeight()),setTimeout(function(){i&&i.find("iframe").attr("src","").end().children().remove()},100),i.fadeOut(u.hide,function(){i.closest(".flux4").remove(),n.isFunction(t)&&setTimeout(t,1),i=w=null})),r.fadeOut(u.hide,function(){f&&r.parent().remove(),r=null,n("html").removeClass("flux4disablePageScrolling")}))},correctPosition:function(n,t,i){h(n,t,i)}}},a=function(){function o(n){for(var t=r.length-1;t>=0;t--)if(r[t].getWidgetName()==n)return t;return-1}function h(n){t=t?n.zIndex?Math.max(n.zIndex,t+1):t+1:n.zIndex||s}function c(){var t=document.location.href;!i.getQueryParameter(t,"openUserProfile")&&!i.getAnchorParameter(t,"openUserProfile")||i.getQueryParameter(t,"userProfileSettings")||i.getQueryParameter(t,"touch")=="true"||(e=new bi(""),e.show({shadowClass:"auth41",zIndex:999,shadowOnly:!0}),setTimeout(function(){if(!w.tryGetWidgetByName("UserProfile")&&!w.isLoadingSingleton("userprofile")){var t=n('<div id="openUserProfile"><\/div>').appendTo("body");ut.createWidget("UserProfile",{container:t})}},5e3))}function l(t){var i=n('<div class="confirmationContent"><div class="confirmField"><strong><span class="confirmMsg"><\/span><\/strong><div class="buttonsLine"><a class="btnCancel"><\/a><a class="primaryButton btnPost"><\/a><\/div><\/div><\/div>');return i.find(".confirmMsg").html(t.msg),i.find(".btnCancel").html(t.cancelLbl),i.find(".btnPost").html(t.yesLbl),!t.className||i.addClass(t.className),i}var r=[],s=9999,t=null,e=null,f;return c(),f={OPEN:"onOverlayOpen",OPENED:"onOverlayOpened",CLOSED:"onOverlayClosed",CANCELLED:"OverlayCancelled"},{EVENTS:f,showOverlay:function(n,i){!e||e.hide();var o=new bi(n);h(i),i.zIndex=t,r.push(o),o.show(i),u.trigger(f.OPENED,n)},confirm:function(n,t){var i,u,r;if(t.nativePopupOnMobile){i=document.createElement("iframe"),i.setAttribute("src","data:text/plain"),document.documentElement.appendChild(i),u=i.contentWindow.confirm(t.msg),i.parentNode.removeChild(i),u&&t.onConfirm();return}r=l(t),r.find(".btnPost").click(function(){a.hideOverlay(n),typeof t.onConfirm=="function"&&t.onConfirm()}),r.find(".btnCancel").click(function(){a.hideOverlay(n)}),a.showOverlay(n,{initContent:r,shadowCss:t.shadowCss,showTransparent:!!t.showTransparent})},hideOverlay:function(i,e,s){var h=o(i);h>-1&&(r[h].hide(function(){n.isFunction(e)&&e(),s&&u.trigger(f.CANCELLED),u.trigger(f.CLOSED,i)}),t--,r.splice(h,1)),r.length==0&&(t=null)},correctPosition:function(n,t,i,u){var f=o(n);f>-1&&r[f].correctPosition(t,i,u)}}}(),d=function(){var r=[],v=r.push,f=r.slice,y=r.splice,t=function(n,t){var i=n||{};t||(t={}),this.cid=_.uniqueId("c"),t.collection&&(this.collection=t.collection),this.initialize.apply(this,arguments)},e,o,h;_.extend(t.prototype,it,{idAttribute:"id",initialize:function(){},set:function(n,t){t||(t={}),this.initialize.apply(this,arguments),this.trigger("update",this,t)},destroy:function(n){n||(n={}),n.silent||this.trigger("destroy",this,this.collection,n)}});var i=function(n,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),n&&this.reset(n,_.extend({silent:!0},t))},c={add:!0,remove:!0,merge:!0},l={add:!0,remove:!1};_.extend(i.prototype,it,{model:t,initialize:function(){},toJSON:function(n){return this.map(function(t){return t.toJSON(n)})},add:function(n,t){return this.set(n,_.extend({merge:!1},t,l))},remove:function(n,t){var f=!_.isArray(n),r,e,u,i;for(n=f?[n]:_.clone(n),t||(t={}),r=0,e=n.length;r<e;r++)(i=n[r]=this.get(n[r]),i)&&(delete this._byId[i.id],delete this._byId[i.cid],u=this.indexOf(i),this.models.splice(u,1),this.length--,t.silent||(t.index=u,i.trigger("remove",i,this,t)),this._removeReference(i,t));return f?n[0]:n},set:function(n,i){var v,k;i=_.defaults({},i,c),i.parse&&(n=this.parse(n,i)),v=!_.isArray(n),n=v?n?[n]:[]:_.clone(n);for(var d,u,f,h,l,y=i.at,nt=this.model,p=this.comparator&&y==null&&i.sort!==!1,tt=_.isString(this.comparator)?this.comparator:null,o=[],w=[],a={},g=i.add,it=i.merge,b=i.remove,s=!p&&g&&b?[]:!1,r=0,e=n.length;r<e;r++){if(f=n[r]||{},d=f instanceof t?u=f:f[nt.prototype.idAttribute||"id"],h=this.get(d))b&&(a[h.cid]=!0),it&&(f=f===u?u.attributes:f,i.parse&&(f=h.parse(f,i)),h.set(f,i),p&&!l&&h.hasChanged(tt)&&(l=!0)),n[r]=h;else if(g){if(u=n[r]=this._prepareModel(f,i),!u)continue;o.push(u),this._addReference(u,i)}u=h||u,s&&(u.isNew()||!a[u.id])&&s.push(u),a[u.id]=!0}if(b){for(r=0,e=this.length;r<e;++r)a[(u=this.models[r]).cid]||w.push(u);w.length&&this.remove(w,i)}if(o.length||s&&s.length)if(p&&(l=!0),this.length+=o.length,y!=null)for(r=0,e=o.length;r<e;r++)this.models.splice(y+r,0,o[r]);else for(s&&(this.models.length=0),k=s||o,r=0,e=k.length;r<e;r++)this.models.push(k[r]);if(l&&this.sort({silent:!0}),!i.silent){for(r=0,e=o.length;r<e;r++)(u=o[r]).trigger("add",u,this,i);(l||s&&s.length)&&this.trigger("sort",this,i)}return v?n[0]:n},reset:function(n,t){t||(t={});for(var i=0,r=this.models.length;i<r;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),n=this.add(n,_.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),n},push:function(n,t){return this.add(n,_.extend({at:this.length},t))},pop:function(n){var t=this.at(this.length-1);return this.remove(t,n),t},unshift:function(n,t){return this.add(n,_.extend({at:0},t))},shift:function(n){var t=this.at(0);return this.remove(t,n),t},slice:function(){return f.apply(this.models,arguments)},get:function(n){if(n!=null)return this._byId[n]||this._byId[n.id]||this._byId[n.cid]},at:function(n){return this.models[n]},sort:function(n){if(!this.comparator)throw new p("Cannot sort a set without a comparator");return n||(n={}),_.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),n.silent||this.trigger("sort",this,n),this},create:function(n,t){if(t=t?_.clone(t):{},!(n=this._prepareModel(n,t)))return!1;t.wait||this.add(n,t);var r=this,i=t.success;return t.success=function(n,u){t.wait&&r.add(n,t),i&&i(n,u,t)},n.save(null,t),n},parse:function(n){return n},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(n,i){if(n instanceof t)return n;i=i?_.clone(i):{},i.collection=this;var r=new this.model(n,i);return r.validationError?(this.trigger("invalid",this,r.validationError,i),!1):r},_addReference:function(n){this._byId[n.cid]=n,n.id!=null&&(this._byId[n.id]=n),n.collection||(n.collection=this);n.on("all",this._onModelEvent,this)},_removeReference:function(n){this===n.collection&&delete n.collection,n.off("all",this._onModelEvent,this)},_onModelEvent:function(n,t,i,r){(n!=="add"&&n!=="remove"||i===this)&&(n==="destroy"&&this.remove(t,r),t&&n==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}}),e=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],_.each(e,function(n){i.prototype[n]=function(){var t=f.call(arguments);return t.unshift(this.models),_[n].apply(_,t)}}),o=["groupBy","countBy","sortBy","indexBy"],_.each(o,function(n){i.prototype[n]=function(t,i){var r=_.isFunction(t)?t:function(n){return n.get(t)};return _[n](this.models,r,i)}});var u=function(n){this.cid=_.uniqueId("view"),n||(n={}),_.extend(this,_.pick(n,s)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},a=/^(\S+)\s*(.*)$/,s=["model","collection","el","id","attributes","className","tagName","events"];return _.extend(u.prototype,it,{tagName:"div",$:function(n){return this.$el.find(n)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof n?t:n(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(n){var i,t;if(!(n||(n=_.result(this,"events"))))return this;this.undelegateEvents();for(i in n)if(t=n[i],_.isFunction(t)||(t=this[n[i]]),t){var u=i.match(a),r=u[1],f=u[2];if(t=_.bind(t,this),r+=".delegateEvents"+this.cid,f==="")this.$el.on(r,t);else this.$el.on(r,f,t)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){var t,i;this.el?this.setElement(_.result(this,"el"),!1):(t=_.extend({},_.result(this,"attributes")),this.id&&(t.id=_.result(this,"id")),this.className&&(t["class"]=_.result(this,"className")),i=n("<"+_.result(this,"tagName")+">").attr(t),this.setElement(i,!1))}}),h=function(n,t){var r=this,i,u;return i=n&&_.has(n,"constructor")?n.constructor:function(){return r.apply(this,arguments)},_.extend(i,r,t),u=function(){this.constructor=i},u.prototype=r.prototype,i.prototype=new u,n&&_.extend(i.prototype,n),i.__super__=r.prototype,i},t.extend=i.extend=u.extend=h,s.push("parent"),{Model:t,Collection:i,View:u}}();d.apply=function(){function i(t){return n[t]}function r(t,i,u){var s=!0,f,e,o;for(_.isFunction(i)&&(u=i,i=[]),f=0;i&&f<i.length;f++)if(e=i[f],_.isString(e))if(o=n[e],o)i[f]=o;else{s=!1;n.on("moduleDefined",_.bind(function(f,e){n[t]||e!=f||r(t,i,u)},n,e))}if(s)return n[t]=u.apply(null,i),n.trigger("moduleDefined",t),n[t]}var n=_.extend({},it);return function(n,u,f){function e(n){return n?s+"."+n:s}var o={},s=n+"#"+u.settings._version;u.require=function(n){return i(e(n))},u.define=function(n,t,f){var c,s,h;if(o[n])throw'Module "'+n+'" already defined';else o[n]=!0;if(n=e(n),c=i(n),c)return c;for(s=0;_.isArray(t)&&s<t.length;s++)if(h=t[s],h.match(/^__super__/)){if(!u._superWidgetName)throw"Super widget is not defined";t[s]=h.replace(/^__super__/,u._superWidgetName)}else h.match(/^[^\.]+$/)&&(t[s]=e(h));return r(n,t,f)},u.define("Model",function(){return d.Model}),u.define("Collection",function(){return d.Collection}),u.define("View",function(){return d.View.extend({template:function(n,t){return f.utils._template(u.markup[n],t)},markup:function(n){var t=this.constructor.prototype;return t._templates=t._templates||{},t._templates[n]||(t._templates[n]=_.template(u.markup[n],null,{variable:"view"})),t._templates[n](this)},track:function(n){f.utils.trackForReporting(_.extend({communityUcid:t.community.ucid,userUcid:t.user?t.user.ucid:"",product:u.settings.product,productLocation:u.settings.productLocation,contentUcid:u.settings.contentId,contentUri:""},n))}})}),u.define("WidgetView",["View"],function(n){return n.extend(_.extend({create:function(){u.createWidget(this.name,this.settings,this.enable)}},d._WidgetViewProto))}),u.define("ControlView",["View"],function(n){return n.extend(_.extend({create:function(){u.createControl(this.name,this.settings,this.enable)}},d._WidgetViewProto))}),u.define("RoadBlockableView",["View"],function(n){return n.extend(_.extend({_performCheck:f.performRoadBlockerCheck},d._RoadBlockableViewProto))})}}(),d._RoadBlockableViewProto={initialize:function(){_.bindAll(this,"_execute"),this._postAuth().tryExecute(this._execute)},_execute:function(){var n=Array.prototype.slice.call(arguments);this[n.pop()].apply(this,n)},_postAuth:function(){return!this.__postAuth&&this.hashCode&&(this.__postAuth=oi.prototype.createPostAuthAction(this.hashCode)),this.__postAuth},ensureRoadBlockable:function(){var t=Array.prototype.slice.call(arguments),i=typeof t[t.length-1]=="object"?t.pop():{},n=this;_.each(t,function(t){var r=n[t];n[t]=_.bind(function(){var u=Array.prototype.slice.call(arguments),f;n._performCheck(!1,null,null,null,null,i.productLocation,i.blockedAction)?r.apply(n,u):(f=n._postAuth(),u.push(t),f.save.apply(f,u))},n)})}},d._WidgetViewProto={initialize:function(){_.bindAll(this,"enable"),this.settings={}},enable:function(n){this.widget=n,this.trigger("load")},ensureLoaded:function(){var t=Array.prototype.slice.call(arguments),n=this;_.each(t,function(t){var i=n[t];n[t]=_.bind(function(){var t=Array.prototype.slice.call(arguments);if(n.widget)i.apply(n,t);else n.on("load",function(){i.apply(n,t)},n)},n)})}},ut.initialize(!1,!0,!0,!1)}(jQuery)}})()